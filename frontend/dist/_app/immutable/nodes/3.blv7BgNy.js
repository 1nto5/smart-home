import{c as Oe,a as l,d as Ut,f as p,s as m}from"../chunks/DN_vEeGv.js";import{f as oe,p as Wt,s as g,c as rt,d as Yt,g as o,j as n,k as e,t as P,l as Zt,e as er,m as s,$ as tr,n as a,o as ae,v as rr}from"../chunks/CEuPnrTr.js";import{l as qe,s as Xe,i as S}from"../chunks/CK2TXMS2.js";import{I as Be,s as Ge,e as se,b as ar,l as sr,m as or,a as v,d as ve,r as M,n as nr,o as ir,p as Me,q as cr,v as lr,w as dr,x as vr,y as pr,z as ur,A as fr}from"../chunks/mpM_GrAP.js";import{h as br,P as at,b as O,X as mr,c as _r}from"../chunks/Cs0FQf_F.js";import{b as gr}from"../chunks/B1Sn1HrY.js";import{F as xr,g as yr}from"../chunks/CjjHEGs3.js";import{T as hr}from"../chunks/CPaTYCEG.js";import{C as st,a as wr,T as ot}from"../chunks/XANkhHnS.js";import"../chunks/DjnKCaAL.js";function kr(R,C){const y=qe(C,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const A=[["path",{d:"m6 9 6 6 6-6"}]];Be(R,Xe({name:"chevron-down"},()=>y,{get iconNode(){return A},children:(N,d)=>{var h=Oe(),H=oe(h);Ge(H,C,"default",{}),l(N,h)},$$slots:{default:!0}}))}function Pr(R,C){const y=qe(C,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const A=[["path",{d:"m18 15-6-6-6 6"}]];Be(R,Xe({name:"chevron-up"},()=>y,{get iconNode(){return A},children:(N,d)=>{var h=Oe(),H=oe(h);Ge(H,C,"default",{}),l(N,h)},$$slots:{default:!0}}))}function $r(R,C){const y=qe(C,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const A=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];Be(R,Xe({name:"rotate-ccw"},()=>y,{get iconNode(){return A},children:(N,d)=>{var h=Oe(),H=oe(h);Ge(H,C,"default",{}),l(N,h)},$$slots:{default:!0}}))}var Cr=p('<div class="card card-active glow-climate-heat mb-4"><div class="p-4"><div class="flex flex-col sm:flex-row gap-3"><input type="text" placeholder="Preset ID (e.g. away)" class="flex-1 bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary placeholder:text-content-tertiary focus:border-device-climate-heat-text focus:outline-none transition-colors"/> <input type="text" placeholder="Display name (e.g. Away)" class="flex-1 bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary placeholder:text-content-tertiary focus:border-device-climate-heat-text focus:outline-none transition-colors"/> <div class="flex items-center gap-2 px-3 py-2 rounded-lg bg-surface-recessed border border-stroke-subtle"><input type="number" min="5" max="30" step="0.5" class="bg-transparent w-16 text-content-primary text-center font-display focus:outline-none [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/> <span class="text-device-climate-heat-text font-display">°C</span></div> <button class="px-4 py-2.5 rounded-lg glow-climate-heat power-btn-on font-semibold uppercase tracking-wider disabled:opacity-50 transition-all">Create</button> <button class="px-3 py-2.5 rounded-lg bg-surface-recessed border border-stroke-default text-content-secondary hover:border-stroke-strong transition-colors"><!></button></div></div></div>'),Hr=p('<div class="flex items-center gap-2"><input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded px-2 py-1 w-16 text-content-primary text-center font-display focus:outline-none focus:border-device-climate-heat-text [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/> <span class="text-device-climate-heat-text">°C</span> <button class="text-xs px-2 py-1 bg-success/20 text-success border border-success/30 rounded hover:bg-success/30 transition-colors">Save</button> <button class="text-xs px-2 py-1 bg-surface-recessed border border-stroke-default text-content-secondary rounded hover:border-stroke-strong transition-colors">Cancel</button></div>'),Tr=p('<button class="font-display text-2xl text-device-climate-heat-text neon-text-subtle hover:scale-105 transition-transform"> </button>'),Dr=p('<p class="text-sm text-content-tertiary">No TRV devices found</p>'),Sr=p('<input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded px-2 py-1 w-16 text-content-primary text-center text-sm font-display focus:outline-none focus:border-device-climate-heat-text [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/> <button class="text-xs px-2 py-1 bg-success/20 text-success border border-success/30 rounded disabled:opacity-50 hover:bg-success/30 transition-colors">Save</button> <button class="text-xs px-2 py-1 bg-surface-recessed border border-stroke-default text-content-secondary rounded hover:border-stroke-strong transition-colors">Cancel</button>',1),Ar=p('<button class="p-1.5 rounded bg-surface-recessed border border-stroke-subtle text-content-tertiary hover:text-content-secondary transition-colors disabled:opacity-50" title="Reset to default"><!></button>'),Nr=p("<button> </button> <!>",1),jr=p('<div class="flex items-center justify-between bg-surface-elevated rounded-lg p-3 border border-stroke-subtle"><span class="text-sm text-content-primary"> </span> <div class="flex items-center gap-2"><!></div></div>'),zr=p('<div class="space-y-2"></div>'),Er=p('<div class="border-t border-stroke-subtle bg-surface-recessed/50 p-4"><p class="text-xs text-content-tertiary uppercase tracking-wider mb-3">Per-device temperatures <span class="text-content-secondary"> </span></p> <!></div>'),Fr=p('<div class="card overflow-hidden hover:border-device-climate-heat-text/30 transition-colors"><div class="p-4"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-3"><div class="w-9 h-9 rounded-lg glow-climate-heat power-btn-on flex items-center justify-center"><!></div> <span class="font-display text-sm uppercase tracking-wider text-content-primary"> </span></div> <div class="flex items-center gap-1.5"><button class="p-2 rounded-lg bg-surface-recessed border border-stroke-default text-device-climate-heat-text hover:glow-climate-heat hover:power-btn-on transition-all disabled:opacity-50" title="Apply to all heaters"><!></button> <button class="p-2 rounded-lg bg-surface-recessed border border-stroke-default text-content-secondary hover:border-stroke-strong transition-colors" title="Per-device settings"><!></button> <button class="p-2 rounded-lg bg-surface-recessed border border-stroke-default text-content-tertiary hover:bg-error/10 hover:text-error hover:border-error/30 transition-all" title="Delete preset"><!></button></div></div> <!></div> <!></div>'),Rr=p('<option class="svelte-1wpfyiy"> </option>'),Vr=p('<div class="card p-6 text-center"><!> <p class="text-content-tertiary">No schedules configured</p></div>'),Lr=p('<div><div class="flex items-center justify-between mb-2"><div class="font-display text-xl text-accent neon-text-subtle"> </div> <div class="flex gap-1.5"><button> </button> <button class="p-1.5 rounded-lg bg-surface-recessed border border-stroke-default text-content-tertiary hover:bg-error/10 hover:text-error hover:border-error/30 transition-colors"><!></button></div></div> <div class="text-sm"><span class="font-medium text-content-primary"> </span> <span class="text-content-tertiary mx-1">→</span> <span class="text-device-climate-heat-text"> </span></div></div>'),Mr=p('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"></div>'),Or=p('<button class="ml-3 px-3 py-1.5 rounded-lg bg-surface-recessed border border-stroke-default text-content-secondary text-sm hover:border-stroke-strong transition-colors">Clear All</button>'),qr=p('<div class="card p-4 flex items-center gap-3"><div class="w-2 h-2 rounded-full bg-success animate-glow"></div> <p class="text-content-secondary text-sm">All heaters online - no pending actions</p></div>'),Xr=p('<div class="card p-3 flex items-center justify-between border-warning/30"><div class="flex items-center gap-3"><div class="w-2 h-2 rounded-full bg-warning animate-glow"></div> <span class="font-mono text-sm text-content-primary"> </span> <span class="text-content-tertiary">→</span> <span class="text-sm text-device-climate-heat-text"> </span></div> <span class="text-xs font-display text-content-tertiary px-2 py-1 rounded bg-surface-recessed"> </span></div>'),Br=p('<div class="space-y-2"></div>'),Gr=p('<div class="space-y-8 pb-24"><section><div class="section-header section-header-climate svelte-1wpfyiy"><div class="section-icon glow-climate-heat svelte-1wpfyiy"><!></div> <h2 class="section-title svelte-1wpfyiy">Heater Presets</h2> <span class="section-count svelte-1wpfyiy"> </span> <div class="section-line svelte-1wpfyiy"></div> <button class="ml-3 px-3 py-1.5 rounded-lg glow-climate-heat power-btn-on text-sm font-medium flex items-center gap-1.5 transition-transform hover:scale-105"><!> Add</button></div> <!> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"></div></section> <section><div class="section-header svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-accent) 15%, transparent); border-color: color-mix(in srgb, var(--color-accent) 30%, transparent); color: var(--color-accent);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-accent);">Create Schedule</h2> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-accent) 40%, transparent) 0%, transparent 100%);"></div></div> <div class="card p-4"><div class="flex flex-col sm:flex-row flex-wrap gap-3"><input type="text" placeholder="Schedule name" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 w-full sm:flex-1 sm:min-w-[150px] text-content-primary placeholder:text-content-tertiary focus:border-accent focus:outline-none transition-colors"/> <div class="flex gap-3"><select class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary flex-1 sm:flex-initial focus:border-accent focus:outline-none transition-colors svelte-1wpfyiy"></select> <input type="time" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary font-display focus:border-accent focus:outline-none transition-colors"/></div> <button>Add</button></div></div></section> <section><div class="section-header svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-accent) 15%, transparent); border-color: color-mix(in srgb, var(--color-accent) 30%, transparent); color: var(--color-accent);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-accent);">Schedules</h2> <span class="section-count svelte-1wpfyiy"> </span> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-accent) 40%, transparent) 0%, transparent 100%);"></div></div> <!></section> <section><div class="section-header svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-warning) 15%, transparent); border-color: color-mix(in srgb, var(--color-warning) 30%, transparent); color: var(--color-warning);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-warning);">Pending Actions</h2> <span class="section-count svelte-1wpfyiy"> </span> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-warning) 40%, transparent) 0%, transparent 100%);"></div> <!></div> <!></section></div>');function ra(R,C){Wt(C,!0);let y=g(""),A=g("night"),N=g("22:00"),d=g(!1),h=g(null),H=g(21),I=g(null),ne=g(rt([])),J=g(rt([])),K=g(null),ie=g(21);Yt(()=>{gr&&sr().then(t=>{o(ne,t.filter(r=>r.category==="wkf"),!0)})});async function nt(t){e(I)===t?(o(I,null),o(J,[],!0)):(o(I,t,!0),o(J,await Me(t),!0)),o(K,null)}function it(t,r){const i=e(J).find(c=>c.device_id===t);return i?{temp:i.target_temp,isCustom:!0}:{temp:r,isCustom:!1}}function ct(t,r){o(K,t,!0),o(ie,r,!0)}async function lt(t,r){o(d,!0);try{await ur(t,r,e(ie)),o(J,await Me(t),!0),o(K,null)}catch(i){console.error(i)}o(d,!1)}async function dt(t,r){o(d,!0);try{await fr(t,r),o(J,await Me(t),!0)}catch(i){console.error(i)}o(d,!1)}async function vt(){if(e(y).trim()){o(d,!0);try{await or(e(y).trim(),e(A),e(N)),o(y,""),await v.refreshHeaterSchedules()}catch(t){console.error(t)}o(d,!1)}}async function pt(t){await vr(t),await v.refreshHeaterSchedules()}async function ut(t){await dr(t),await v.refreshHeaterSchedules()}async function ft(){await pr(),await v.refreshPendingHeater()}function bt(t){o(h,t.id,!0),o(H,t.target_temp,!0)}async function mt(t){await lr(t,e(H)),o(h,null),await v.refreshHeaterPresets()}function _t(){o(h,null)}let Q=g(!1),q=g(""),X=g(""),ce=g(20);async function gt(){if(!(!e(q).trim()||!e(X).trim())){o(d,!0);try{const t=e(q).trim().toLowerCase().replace(/\s+/g,"-");await nr(t,e(X).trim(),e(ce)),o(q,""),o(X,""),o(ce,20),o(Q,!1),await v.refreshHeaterPresets()}catch(t){console.error(t),alert(t.message||"Failed to create preset")}o(d,!1)}}async function xt(t){if(confirm(`Delete preset "${t}"? This will also delete any schedules using this preset.`)){o(d,!0);try{await cr(t),await v.refreshHeaterPresets(),await v.refreshHeaterSchedules()}catch(r){console.error(r)}o(d,!1)}}async function yt(t){o(d,!0);try{const r=await ir(t);console.log("Applied preset:",r),await v.refreshPendingHeater()}catch(r){console.error(r)}o(d,!1)}function Ie(t){const r=v.heaterPresets.find(i=>i.id===t);return(r==null?void 0:r.name)??t}function ht(t){const r=e(ne).find(i=>i.id===t);return(r==null?void 0:r.name)??t}var pe=Gr();br("1wpfyiy",t=>{er(()=>{tr.title="Smart Home - Heater Schedule"})});var ue=s(pe),fe=s(ue),be=s(fe),wt=s(be);hr(wt,{class:"w-4 h-4"}),a(be);var me=n(be,4),kt=s(me,!0);a(me);var _e=n(me,4);_e.__click=()=>o(Q,!e(Q));var Pt=s(_e);at(Pt,{class:"w-4 h-4"}),ae(),a(_e),a(fe);var Je=n(fe,2);{var $t=t=>{var r=Cr(),i=s(r),c=s(i),u=s(c);M(u);var x=n(u,2);M(x);var _=n(x,2),T=s(_);M(T),ae(2),a(_);var $=n(_,2);$.__click=gt;var D=n($,2);D.__click=()=>o(Q,!1);var w=s(D);mr(w,{class:"w-5 h-5"}),a(D),a(c),a(i),a(r),P(f=>$.disabled=f,[()=>e(d)||!e(q).trim()||!e(X).trim()]),O(u,()=>e(q),f=>o(q,f)),O(x,()=>e(X),f=>o(X,f)),O(T,()=>e(ce),f=>o(ce,f)),l(t,r)};S(Je,t=>{e(Q)&&t($t)})}var Ke=n(Je,2);se(Ke,21,()=>v.heaterPresets,t=>t.id,(t,r)=>{var i=Fr(),c=s(i),u=s(c),x=s(u),_=s(x),T=s(_);xr(T,{class:"w-4 h-4"}),a(_);var $=n(_,2),D=s($,!0);a($),a(x);var w=n(x,2),f=s(w);f.__click=()=>yt(e(r).id);var V=s(f);_r(V,{class:"w-4 h-4"}),a(f);var E=n(f,2);E.__click=()=>nt(e(r).id);var de=s(E);{var U=b=>{Pr(b,{class:"w-4 h-4"})},De=b=>{kr(b,{class:"w-4 h-4"})};S(de,b=>{e(I)===e(r).id?b(U):b(De,!1)})}a(E);var B=n(E,2);B.__click=()=>xt(e(r).id);var Se=s(B);ot(Se,{class:"w-4 h-4"}),a(B),a(w),a(u);var Ae=n(u,2);{var Lt=b=>{var k=Hr(),j=s(k);M(j);var W=n(j,4);W.__click=()=>mt(e(r).id);var Ne=n(W,2);Ne.__click=_t,a(k),O(j,()=>e(H),je=>o(H,je)),l(b,k)},Mt=b=>{var k=Tr();k.__click=()=>bt(e(r));var j=s(k);a(k),P(()=>m(j,`${e(r).target_temp??""}°C`)),l(b,k)};S(Ae,b=>{e(h)===e(r).id?b(Lt):b(Mt,!1)})}a(c);var Ot=n(c,2);{var qt=b=>{var k=Er(),j=s(k),W=n(s(j)),Ne=s(W);a(W),a(j);var je=n(j,2);{var Xt=G=>{var Y=Dr();l(G,Y)},Bt=G=>{var Y=zr();se(Y,21,()=>e(ne),ze=>ze.id,(ze,L)=>{const Z=rr(()=>it(e(L).id,e(r).target_temp));var Ee=jr(),Fe=s(Ee),Gt=s(Fe,!0);a(Fe);var tt=n(Fe,2),It=s(tt);{var Jt=F=>{var ee=Sr(),z=oe(ee);M(z);var te=n(z,2);te.__click=()=>lt(e(r).id,e(L).id);var Re=n(te,2);Re.__click=()=>o(K,null),P(()=>te.disabled=e(d)),O(z,()=>e(ie),Ve=>o(ie,Ve)),l(F,ee)},Kt=F=>{var ee=Nr(),z=oe(ee);z.__click=()=>ct(e(L).id,e(Z).temp);var te=s(z);a(z);var Re=n(z,2);{var Ve=Le=>{var re=Ar();re.__click=()=>dt(e(r).id,e(L).id);var Qt=s(re);$r(Qt,{class:"w-3 h-3"}),a(re),P(()=>re.disabled=e(d)),l(Le,re)};S(Re,Le=>{e(Z).isCustom&&Le(Ve)})}P(()=>{ve(z,1,`font-display text-sm ${e(Z).isCustom?"text-device-climate-heat-text":"text-content-secondary"} hover:text-device-climate-heat-text transition-colors`),m(te,`${e(Z).temp??""}°C ${e(Z).isCustom?"":"(default)"}`)}),l(F,ee)};S(It,F=>{e(K)===e(L).id?F(Jt):F(Kt,!1)})}a(tt),a(Ee),P(F=>m(Gt,F),[()=>yr(e(L).name,"wkf")||e(L).id]),l(ze,Ee)}),a(Y),l(G,Y)};S(je,G=>{e(ne).length===0?G(Xt):G(Bt,!1)})}a(k),P(()=>m(Ne,`(override default ${e(r).target_temp??""}°C)`)),l(b,k)};S(Ot,b=>{e(I)===e(r).id&&b(qt)})}a(i),P(()=>{m(D,e(r).name),f.disabled=e(d)}),l(t,i)}),a(Ke),a(ue);var ge=n(ue,2),xe=s(ge),Qe=s(xe),Ct=s(Qe);at(Ct,{class:"w-4 h-4"}),a(Qe),ae(4),a(xe);var Ue=n(xe,2),We=s(Ue),ye=s(We);M(ye);var he=n(ye,2),le=s(he);se(le,21,()=>v.heaterPresets,t=>t.id,(t,r)=>{var i=Rr(),c=s(i);a(i);var u={};P(()=>{m(c,`${e(r).name??""} (${e(r).target_temp??""}°C)`),u!==(u=e(r).id)&&(i.value=(i.__value=e(r).id)??"")}),l(t,i)}),a(le);var Ye=n(le,2);M(Ye),a(he);var we=n(he,2);we.__click=vt,a(We),a(Ue),a(ge);var ke=n(ge,2),Pe=s(ke),$e=s(Pe),Ht=s($e);st(Ht,{class:"w-4 h-4"}),a($e);var Ze=n($e,4),Tt=s(Ze,!0);a(Ze),ae(2),a(Pe);var Dt=n(Pe,2);{var St=t=>{var r=Vr(),i=s(r);st(i,{class:"w-10 h-10 mx-auto text-content-tertiary mb-2 opacity-50"}),ae(2),a(r),l(t,r)},At=t=>{var r=Mr();se(r,21,()=>v.heaterSchedules,i=>i.id,(i,c)=>{var u=Lr();let x;var _=s(u),T=s(_),$=s(T,!0);a(T);var D=n(T,2),w=s(D);w.__click=()=>ut(e(c).id);var f=s(w,!0);a(w);var V=n(w,2);V.__click=()=>pt(e(c).id);var E=s(V);ot(E,{class:"w-3.5 h-3.5"}),a(V),a(D),a(_);var de=n(_,2),U=s(de),De=s(U,!0);a(U);var B=n(U,4),Se=s(B,!0);a(B),a(de),a(u),P(Ae=>{x=ve(u,1,"card p-3 transition-opacity svelte-1wpfyiy",null,x,{"opacity-50":!e(c).enabled,"card-active":e(c).enabled,"glow-accent":e(c).enabled}),m($,e(c).time),ve(w,1,`px-2.5 py-1 rounded-lg font-medium text-xs transition-all
                         ${e(c).enabled?"glow-accent power-btn-on":"bg-surface-recessed border border-stroke-default text-content-tertiary hover:border-stroke-strong"}`,"svelte-1wpfyiy"),m(f,e(c).enabled?"On":"Off"),m(De,e(c).name),m(Se,Ae)},[()=>Ie(e(c).preset_id)]),l(i,u)}),a(r),l(t,r)};S(Dt,t=>{v.heaterSchedules.length===0?t(St):t(At,!1)})}a(ke);var et=n(ke,2),Ce=s(et),He=s(Ce),Nt=s(He);wr(Nt,{class:"w-4 h-4"}),a(He);var Te=n(He,4),jt=s(Te,!0);a(Te);var zt=n(Te,4);{var Et=t=>{var r=Or();r.__click=ft,l(t,r)};S(zt,t=>{v.pendingHeaterActions.length>0&&t(Et)})}a(Ce);var Ft=n(Ce,2);{var Rt=t=>{var r=qr();l(t,r)},Vt=t=>{var r=Br();se(r,21,()=>v.pendingHeaterActions,i=>i.id,(i,c)=>{var u=Xr(),x=s(u),_=n(s(x),2),T=s(_,!0);a(_);var $=n(_,4),D=s($,!0);a($),a(x);var w=n(x,2),f=s(w);a(w),a(u),P((V,E)=>{m(T,V),m(D,E),m(f,`Retry #${e(c).retry_count??""}`)},[()=>ht(e(c).device_id),()=>Ie(e(c).preset_id)]),l(i,u)}),a(r),l(t,r)};S(Ft,t=>{v.pendingHeaterActions.length===0?t(Rt):t(Vt,!1)})}a(et),a(pe),P((t,r)=>{m(kt,v.heaterPresets.length),we.disabled=t,ve(we,1,`px-5 py-2.5 rounded-lg font-semibold uppercase tracking-wider transition-all w-full sm:w-auto
                 ${r??""}`,"svelte-1wpfyiy"),m(Tt,v.heaterSchedules.length),m(jt,v.pendingHeaterActions.length)},[()=>e(d)||!e(y).trim(),()=>!e(d)&&e(y).trim()?"glow-accent power-btn-on":"bg-surface-recessed border border-stroke-default text-content-tertiary"]),O(ye,()=>e(y),t=>o(y,t)),ar(le,()=>e(A),t=>o(A,t)),O(Ye,()=>e(N),t=>o(N,t)),l(R,pe),Zt()}Ut(["click"]);export{ra as component};
