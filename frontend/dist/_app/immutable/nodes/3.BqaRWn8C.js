import{c as ge,a as v,d as wr,f as u,s as f}from"../chunks/C6IfJnDo.js";import{f as W,p as kr,s as m,c as gt,d as xt,j as i,m as s,g as n,k as t,t as k,l as Pr,e as $r,$ as Cr,n as a,o as R,v as Hr}from"../chunks/DKHSd8_d.js";import{l as xe,s as ye,i as T}from"../chunks/DTZz9ds9.js";import{I as he,s as we,e as ve,b as Tr,a as l,l as Or,m as yt,n as Dr,d as Q,o as ht,r as N,p as Sr,q as Ar,v as Nr,w as at,x as jr,y as Mr,z as zr,A as Er,B as Fr,C as Rr}from"../chunks/Dw9FfEim.js";import{h as Vr,b as V,X as wt,P as Lr}from"../chunks/DnakLPvH.js";import{b as qr}from"../chunks/D1qDfmfk.js";import"../chunks/BFRcN8qg.js";import{T as Br}from"../chunks/3mf9VtbY.js";import{P as kt,C as Pt,a as $t,T as Ur}from"../chunks/C8qM28QM.js";import{F as Xr}from"../chunks/C089FVoS.js";function Gr(j,w){const g=xe(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const O=[["path",{d:"m6 9 6 6 6-6"}]];he(j,ye({name:"chevron-down"},()=>g,{get iconNode(){return O},children:(D,d)=>{var _=ge(),P=W(_);we(P,w,"default",{}),v(D,_)},$$slots:{default:!0}}))}function Ir(j,w){const g=xe(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const O=[["path",{d:"m18 15-6-6-6 6"}]];he(j,ye({name:"chevron-up"},()=>g,{get iconNode(){return O},children:(D,d)=>{var _=ge(),P=W(_);we(P,w,"default",{}),v(D,_)},$$slots:{default:!0}}))}function Jr(j,w){const g=xe(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const O=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9"}]];he(j,ye({name:"circle-pause"},()=>g,{get iconNode(){return O},children:(D,d)=>{var _=ge(),P=W(_);we(P,w,"default",{}),v(D,_)},$$slots:{default:!0}}))}function Kr(j,w){const g=xe(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const O=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];he(j,ye({name:"rotate-ccw"},()=>g,{get iconNode(){return O},children:(D,d)=>{var _=ge(),P=W(_);we(P,w,"default",{}),v(D,_)},$$slots:{default:!0}}))}var Qr=u('<div class="rounded-lg p-3 mb-4 bg-warning/10 border border-warning/30 flex items-center gap-2"><!> <p class="text-sm text-warning">Schedules paused while override active</p></div>'),Wr=u('<div class="flex items-center gap-3 p-2 rounded-lg bg-surface-recessed border border-stroke-subtle"><input type="range" min="5" max="25" step="0.5" class="w-32" style="--color-accent: var(--color-warning); --color-accent-glow: color-mix(in srgb, var(--color-warning) 50%, transparent);"/> <span class="font-display text-xl text-warning neon-text-subtle w-16"> </span></div>'),Yr=u('<div class="card card-active glow-climate-heat mb-4"><div class="p-4"><div class="flex flex-col sm:flex-row gap-3"><input type="text" placeholder="Preset ID (e.g. away)" class="flex-1 bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary placeholder:text-content-tertiary focus:border-device-climate-heat-text focus:outline-none transition-colors"/> <input type="text" placeholder="Display name (e.g. Away)" class="flex-1 bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary placeholder:text-content-tertiary focus:border-device-climate-heat-text focus:outline-none transition-colors"/> <div class="flex items-center gap-2 px-3 py-2 rounded-lg bg-surface-recessed border border-stroke-subtle"><input type="number" min="5" max="30" step="0.5" class="bg-transparent w-16 text-content-primary text-center font-display focus:outline-none [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/> <span class="text-device-climate-heat-text font-display">°C</span></div> <button class="px-4 py-2.5 rounded-lg glow-climate-heat power-btn-on font-semibold uppercase tracking-wider disabled:opacity-50 transition-all">Create</button> <button class="px-3 py-2.5 rounded-lg bg-surface-recessed border border-stroke-default text-content-secondary hover:border-stroke-strong transition-colors"><!></button></div></div></div>'),Zr=u('<div class="flex items-center gap-2 mt-1"><input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded px-2 py-1 w-16 text-content-primary text-center font-display focus:outline-none focus:border-device-climate-heat-text [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/> <span class="text-device-climate-heat-text">°C</span> <button class="text-xs px-2 py-1 bg-success/20 text-success border border-success/30 rounded hover:bg-success/30 transition-colors">Save</button> <button class="text-xs px-2 py-1 bg-surface-recessed border border-stroke-default text-content-secondary rounded hover:border-stroke-strong transition-colors">Cancel</button></div>'),ea=u('<button class="font-display text-2xl text-device-climate-heat-text neon-text-subtle hover:scale-105 transition-transform mt-0.5 block"> </button>'),ta=u('<p class="text-sm text-content-tertiary">No TRV devices found</p>'),ra=u('<input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded px-2 py-1 w-16 text-content-primary text-center text-sm font-display focus:outline-none focus:border-device-climate-heat-text [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/> <button class="text-xs px-2 py-1 bg-success/20 text-success border border-success/30 rounded disabled:opacity-50 hover:bg-success/30 transition-colors">Save</button> <button class="text-xs px-2 py-1 bg-surface-recessed border border-stroke-default text-content-secondary rounded hover:border-stroke-strong transition-colors">Cancel</button>',1),aa=u('<button class="p-1.5 rounded bg-surface-recessed border border-stroke-subtle text-content-tertiary hover:text-content-secondary transition-colors disabled:opacity-50" title="Reset to default"><!></button>'),sa=u("<button> </button> <!>",1),na=u('<div class="flex items-center justify-between bg-surface-elevated rounded-lg p-3 border border-stroke-subtle"><span class="text-sm text-content-primary"> </span> <div class="flex items-center gap-2"><!></div></div>'),oa=u('<div class="space-y-2"></div>'),ia=u('<div class="border-t border-stroke-subtle bg-surface-recessed/50 p-4"><p class="text-xs text-content-tertiary uppercase tracking-wider mb-3">Per-device temperatures <span class="text-content-secondary"> </span></p> <!></div>'),ca=u('<div class="card overflow-hidden hover:border-device-climate-heat-text/30 transition-colors"><div class="p-4 relative group"><button class="absolute top-2 right-2 p-1.5 rounded-lg bg-error/10 text-error border border-error/30 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-error/20" title="Delete preset"><!></button> <div class="flex items-center justify-between"><div class="flex items-center gap-4"><div class="w-10 h-10 rounded-lg glow-climate-heat power-btn-on flex items-center justify-center"><!></div> <div><span class="font-display text-sm uppercase tracking-wider text-content-primary"> </span> <!></div></div> <div class="flex items-center gap-2"><button class="p-2.5 rounded-lg bg-surface-recessed border border-stroke-default text-device-climate-heat-text hover:glow-climate-heat hover:power-btn-on transition-all disabled:opacity-50" title="Apply to all heaters"><!></button> <button class="p-2.5 rounded-lg bg-surface-recessed border border-stroke-default text-content-secondary hover:border-stroke-strong transition-colors" title="Per-device settings"><!></button></div></div></div> <!></div>'),la=u('<option class="svelte-1wpfyiy"> </option>'),da=u('<div class="card p-6 text-center"><!> <p class="text-content-tertiary">No schedules configured</p></div>'),va=u('<div><div class="flex items-center gap-4"><div class="font-display text-2xl text-accent neon-text-subtle"> </div> <div class="h-8 w-px bg-stroke-subtle"></div> <div><span class="font-medium text-content-primary"> </span> <span class="text-sm text-content-tertiary ml-2"><span class="text-device-climate-heat-text"> </span></span></div></div> <div class="flex gap-2"><button> </button> <button class="p-1.5 rounded-lg bg-error/10 text-error border border-error/30 hover:bg-error/20 transition-colors"><!></button></div></div>'),pa=u('<div class="space-y-2"></div>'),ua=u('<button class="ml-3 px-3 py-1.5 rounded-lg bg-surface-recessed border border-stroke-default text-content-secondary text-sm hover:border-stroke-strong transition-colors">Clear All</button>'),fa=u('<div class="card p-4 flex items-center gap-3"><div class="w-2 h-2 rounded-full bg-success animate-glow"></div> <p class="text-content-secondary text-sm">All heaters online - no pending actions</p></div>'),ba=u('<div class="card p-3 flex items-center justify-between border-warning/30"><div class="flex items-center gap-3"><div class="w-2 h-2 rounded-full bg-warning animate-glow"></div> <span class="font-mono text-sm text-content-primary"> </span> <span class="text-content-tertiary">→</span> <span class="text-sm text-device-climate-heat-text"> </span></div> <span class="text-xs font-display text-content-tertiary px-2 py-1 rounded bg-surface-recessed"> </span></div>'),ma=u('<div class="space-y-2"></div>'),_a=u('<div class="space-y-8 pb-24"><section><div class="p-4"><div class="section-header section-header-warning mb-4 svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-warning) 15%, transparent); border-color: color-mix(in srgb, var(--color-warning) 30%, transparent); color: var(--color-warning);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-warning);">Override Mode</h2> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-warning) 40%, transparent) 0%, transparent 100%);"></div> <button> </button></div> <!> <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center"><div class="flex items-center gap-4"><label class="flex items-center gap-2 cursor-pointer group"><input type="radio" name="overrideMode" value="pause" class="sr-only peer"/> <div class="w-4 h-4 rounded-full border-2 border-stroke-default peer-checked:border-warning peer-checked:bg-warning/20 transition-colors flex items-center justify-center"><div class="w-2 h-2 rounded-full bg-warning scale-0 peer-checked:scale-100 transition-transform"></div></div> <span class="text-content-primary text-sm group-hover:text-warning transition-colors">Pause schedules</span></label> <label class="flex items-center gap-2 cursor-pointer group"><input type="radio" name="overrideMode" value="fixed" class="sr-only peer"/> <div class="w-4 h-4 rounded-full border-2 border-stroke-default peer-checked:border-warning peer-checked:bg-warning/20 transition-colors flex items-center justify-center"><div class="w-2 h-2 rounded-full bg-warning scale-0 peer-checked:scale-100 transition-transform"></div></div> <span class="text-content-primary text-sm group-hover:text-warning transition-colors">Fixed temperature</span></label></div> <!></div></div></section> <section><div class="section-header section-header-climate svelte-1wpfyiy"><div class="section-icon glow-climate-heat svelte-1wpfyiy"><!></div> <h2 class="section-title svelte-1wpfyiy">Heater Presets</h2> <span class="section-count svelte-1wpfyiy"> </span> <div class="section-line svelte-1wpfyiy"></div> <button class="ml-3 px-3 py-1.5 rounded-lg glow-climate-heat power-btn-on text-sm font-medium flex items-center gap-1.5 transition-transform hover:scale-105"><!> Add</button></div> <!> <div class="space-y-3"></div></section> <section><div class="section-header svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-accent) 15%, transparent); border-color: color-mix(in srgb, var(--color-accent) 30%, transparent); color: var(--color-accent);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-accent);">Create Schedule</h2> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-accent) 40%, transparent) 0%, transparent 100%);"></div></div> <div class="card p-4"><div class="flex flex-col sm:flex-row flex-wrap gap-3"><input type="text" placeholder="Schedule name" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 w-full sm:flex-1 sm:min-w-[150px] text-content-primary placeholder:text-content-tertiary focus:border-accent focus:outline-none transition-colors"/> <div class="flex gap-3"><select class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary flex-1 sm:flex-initial focus:border-accent focus:outline-none transition-colors svelte-1wpfyiy"></select> <input type="time" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary font-display focus:border-accent focus:outline-none transition-colors"/></div> <button>Add</button></div></div></section> <section><div class="section-header svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-accent) 15%, transparent); border-color: color-mix(in srgb, var(--color-accent) 30%, transparent); color: var(--color-accent);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-accent);">Schedules</h2> <span class="section-count svelte-1wpfyiy"> </span> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-accent) 40%, transparent) 0%, transparent 100%);"></div></div> <!></section> <section><div class="section-header svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-warning) 15%, transparent); border-color: color-mix(in srgb, var(--color-warning) 30%, transparent); color: var(--color-warning);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-warning);">Pending Actions</h2> <span class="section-count svelte-1wpfyiy"> </span> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-warning) 40%, transparent) 0%, transparent 100%);"></div> <!></div> <!></section></div>');function Ta(j,w){kr(w,!0);let g=m(""),O=m("night"),D=m("22:00"),d=m(!1),_=m(null),P=m(21),E=m("pause"),B=m(18),Y=m(null),pe=m(gt([])),Z=m(gt([])),ee=m(null),ue=m(21);xt(()=>{l.heaterOverride&&(n(E,l.heaterOverride.mode,!0),n(B,l.heaterOverride.fixed_temp,!0))}),xt(()=>{qr&&Or().then(e=>{n(pe,e.filter(r=>r.category==="wkf"),!0)})});async function Ct(e){t(Y)===e?(n(Y,null),n(Z,[],!0)):(n(Y,e,!0),n(Z,await at(e),!0)),n(ee,null)}function Ht(e,r){const o=t(Z).find(c=>c.device_id===e);return o?{temp:o.target_temp,isCustom:!0}:{temp:r,isCustom:!1}}function Tt(e,r){n(ee,e,!0),n(ue,r,!0)}async function Ot(e,r){n(d,!0);try{await Fr(e,r,t(ue)),n(Z,await at(e),!0),n(ee,null)}catch(o){console.error(o)}n(d,!1)}async function Dt(e,r){n(d,!0);try{await Rr(e,r),n(Z,await at(e),!0)}catch(o){console.error(o)}n(d,!1)}async function St(){var r;n(d,!0);const e=!((r=l.heaterOverride)!=null&&r.enabled);try{await yt(e,t(E),t(B)),await l.refreshHeaterOverride()}catch(o){console.error(o)}n(d,!1)}async function ke(e){var o;if(!((o=l.heaterOverride)!=null&&o.enabled))return;n(d,!0);const r=e??t(E);try{await yt(!0,r,t(B)),await l.refreshHeaterOverride()}catch(c){console.error(c)}n(d,!1)}async function At(){if(t(g).trim()){n(d,!0);try{await Dr(t(g).trim(),t(O),t(D)),n(g,""),await l.refreshHeaterSchedules()}catch(e){console.error(e)}n(d,!1)}}async function Nt(e){await zr(e),await l.refreshHeaterSchedules()}async function jt(e){await Mr(e),await l.refreshHeaterSchedules()}async function Mt(){await Er(),await l.refreshPendingHeater()}function zt(e){n(_,e.id,!0),n(P,e.target_temp,!0)}async function Et(e){await jr(e,t(P)),n(_,null),await l.refreshHeaterPresets()}function Ft(){n(_,null)}let te=m(!1),U=m(""),X=m(""),fe=m(20);async function Rt(){if(!(!t(U).trim()||!t(X).trim())){n(d,!0);try{const e=t(U).trim().toLowerCase().replace(/\s+/g,"-");await Sr(e,t(X).trim(),t(fe)),n(U,""),n(X,""),n(fe,20),n(te,!1),await l.refreshHeaterPresets()}catch(e){console.error(e),alert(e.message||"Failed to create preset")}n(d,!1)}}async function Vt(e){if(confirm(`Delete preset "${e}"? This will also delete any schedules using this preset.`)){n(d,!0);try{await Ar(e),await l.refreshHeaterPresets(),await l.refreshHeaterSchedules()}catch(r){console.error(r)}n(d,!1)}}async function Lt(e){n(d,!0);try{const r=await Nr(e);console.log("Applied preset:",r),await l.refreshPendingHeater()}catch(r){console.error(r)}n(d,!1)}function st(e){const r=l.heaterPresets.find(o=>o.id===e);return(r==null?void 0:r.name)??e}function qt(e){const r=t(pe).find(o=>o.id===e);return(r==null?void 0:r.name)??e}var Pe=_a();Vr("1wpfyiy",e=>{$r(()=>{Cr.title="Smart Home - Heater Schedule"})});var be=s(Pe),nt=s(be),$e=s(nt),Ce=s($e),Bt=s(Ce);Jr(Bt,{class:"w-4 h-4"}),a(Ce);var re=i(Ce,6);re.__click=St;var Ut=s(re,!0);a(re),a($e);var ot=i($e,2);{var Xt=e=>{var r=Qr(),o=s(r);$t(o,{class:"w-4 h-4 text-warning shrink-0"}),R(2),a(r),v(e,r)};T(ot,e=>{var r;(r=l.heaterOverride)!=null&&r.enabled&&e(Xt)})}var it=i(ot,2),He=s(it),Te=s(He),Oe=s(Te);N(Oe),Oe.__change=()=>{n(E,"pause"),ke("pause")},R(4),a(Te);var ct=i(Te,2),De=s(ct);N(De),De.__change=()=>{n(E,"fixed"),ke("fixed")},R(4),a(ct),a(He);var Gt=i(He,2);{var It=e=>{var r=Wr(),o=s(r);N(o),o.__change=()=>ke();var c=i(o,2),p=s(c);a(c),a(r),k(()=>f(p,`${t(B)??""}°C`)),V(o,()=>t(B),y=>n(B,y)),v(e,r)};T(Gt,e=>{t(E)==="fixed"&&e(It)})}a(it),a(nt),a(be);var Se=i(be,2),Ae=s(Se),Ne=s(Ae),Jt=s(Ne);Br(Jt,{class:"w-4 h-4"}),a(Ne);var je=i(Ne,4),Kt=s(je,!0);a(je);var Me=i(je,4);Me.__click=()=>n(te,!t(te));var Qt=s(Me);kt(Qt,{class:"w-4 h-4"}),R(),a(Me),a(Ae);var lt=i(Ae,2);{var Wt=e=>{var r=Yr(),o=s(r),c=s(o),p=s(c);N(p);var y=i(p,2);N(y);var h=i(y,2),$=s(h);N($),R(2),a(h);var C=i(h,2);C.__click=Rt;var A=i(C,2);A.__click=()=>n(te,!1);var S=s(A);wt(S,{class:"w-5 h-5"}),a(A),a(c),a(o),a(r),k(x=>C.disabled=x,[()=>t(d)||!t(U).trim()||!t(X).trim()]),V(p,()=>t(U),x=>n(U,x)),V(y,()=>t(X),x=>n(X,x)),V($,()=>t(fe),x=>n(fe,x)),v(e,r)};T(lt,e=>{t(te)&&e(Wt)})}var dt=i(lt,2);ve(dt,21,()=>l.heaterPresets,e=>e.id,(e,r)=>{var o=ca(),c=s(o),p=s(c);p.__click=()=>Vt(t(r).id);var y=s(p);wt(y,{class:"w-3 h-3"}),a(p);var h=i(p,2),$=s(h),C=s($),A=s(C);Xr(A,{class:"w-5 h-5"}),a(C);var S=i(C,2),x=s(S),G=s(x,!0);a(x);var I=i(x,2);{var Ie=b=>{var H=Zr(),M=s(H);N(M);var ne=i(M,4);ne.__click=()=>Et(t(r).id);var Ke=i(ne,2);Ke.__click=Ft,a(H),V(M,()=>t(P),Qe=>n(P,Qe)),v(b,H)},_e=b=>{var H=ea();H.__click=()=>zt(t(r));var M=s(H);a(H),k(()=>f(M,`${t(r).target_temp??""}°C`)),v(b,H)};T(I,b=>{t(_)===t(r).id?b(Ie):b(_e,!1)})}a(S),a($);var F=i($,2),L=s(F);L.__click=()=>Lt(t(r).id);var ae=s(L);Lr(ae,{class:"w-4 h-4"}),a(L);var se=i(L,2);se.__click=()=>Ct(t(r).id);var Je=s(se);{var vr=b=>{Ir(b,{class:"w-4 h-4"})},pr=b=>{Gr(b,{class:"w-4 h-4"})};T(Je,b=>{t(Y)===t(r).id?b(vr):b(pr,!1)})}a(se),a(F),a(h),a(c);var ur=i(c,2);{var fr=b=>{var H=ia(),M=s(H),ne=i(s(M)),Ke=s(ne);a(ne),a(M);var Qe=i(M,2);{var br=J=>{var oe=ta();v(J,oe)},mr=J=>{var oe=oa();ve(oe,21,()=>t(pe),We=>We.id,(We,q)=>{const ie=Hr(()=>Ht(t(q).id,t(r).target_temp));var Ye=na(),Ze=s(Ye),_r=s(Ze,!0);a(Ze);var _t=i(Ze,2),gr=s(_t);{var xr=K=>{var ce=ra(),z=W(ce);N(z);var le=i(z,2);le.__click=()=>Ot(t(r).id,t(q).id);var et=i(le,2);et.__click=()=>n(ee,null),k(()=>le.disabled=t(d)),V(z,()=>t(ue),tt=>n(ue,tt)),v(K,ce)},yr=K=>{var ce=sa(),z=W(ce);z.__click=()=>Tt(t(q).id,t(ie).temp);var le=s(z);a(z);var et=i(z,2);{var tt=rt=>{var de=aa();de.__click=()=>Dt(t(r).id,t(q).id);var hr=s(de);Kr(hr,{class:"w-3 h-3"}),a(de),k(()=>de.disabled=t(d)),v(rt,de)};T(et,rt=>{t(ie).isCustom&&rt(tt)})}k(()=>{Q(z,1,`font-display text-sm ${t(ie).isCustom?"text-device-climate-heat-text":"text-content-secondary"} hover:text-device-climate-heat-text transition-colors`),f(le,`${t(ie).temp??""}°C ${t(ie).isCustom?"":"(default)"}`)}),v(K,ce)};T(gr,K=>{t(ee)===t(q).id?K(xr):K(yr,!1)})}a(_t),a(Ye),k(()=>f(_r,t(q).name||t(q).id)),v(We,Ye)}),a(oe),v(J,oe)};T(Qe,J=>{t(pe).length===0?J(br):J(mr,!1)})}a(H),k(()=>f(Ke,`(override default ${t(r).target_temp??""}°C)`)),v(b,H)};T(ur,b=>{t(Y)===t(r).id&&b(fr)})}a(o),k(()=>{f(G,t(r).name),L.disabled=t(d)}),v(e,o)}),a(dt),a(Se);var ze=i(Se,2),Ee=s(ze),vt=s(Ee),Yt=s(vt);kt(Yt,{class:"w-4 h-4"}),a(vt),R(4),a(Ee);var pt=i(Ee,2),ut=s(pt),Fe=s(ut);N(Fe);var Re=i(Fe,2),me=s(Re);ve(me,21,()=>l.heaterPresets,e=>e.id,(e,r)=>{var o=la(),c=s(o);a(o);var p={};k(()=>{f(c,`${t(r).name??""} (${t(r).target_temp??""}°C)`),p!==(p=t(r).id)&&(o.value=(o.__value=t(r).id)??"")}),v(e,o)}),a(me);var ft=i(me,2);N(ft),a(Re);var Ve=i(Re,2);Ve.__click=At,a(ut),a(pt),a(ze);var Le=i(ze,2),qe=s(Le),Be=s(qe),Zt=s(Be);Pt(Zt,{class:"w-4 h-4"}),a(Be);var bt=i(Be,4),er=s(bt,!0);a(bt),R(2),a(qe);var tr=i(qe,2);{var rr=e=>{var r=da(),o=s(r);Pt(o,{class:"w-10 h-10 mx-auto text-content-tertiary mb-2 opacity-50"}),R(2),a(r),v(e,r)},ar=e=>{var r=pa();ve(r,21,()=>l.heaterSchedules,o=>o.id,(o,c)=>{var p=va();let y;var h=s(p),$=s(h),C=s($,!0);a($);var A=i($,4),S=s(A),x=s(S,!0);a(S);var G=i(S,2),I=s(G),Ie=s(I,!0);a(I),a(G),a(A),a(h);var _e=i(h,2),F=s(_e);F.__click=()=>jt(t(c).id);var L=s(F,!0);a(F);var ae=i(F,2);ae.__click=()=>Nt(t(c).id);var se=s(ae);Ur(se,{class:"w-4 h-4"}),a(ae),a(_e),a(p),k(Je=>{y=Q(p,1,"card p-3 flex items-center justify-between transition-opacity svelte-1wpfyiy",null,y,{"opacity-50":!t(c).enabled,"card-active":t(c).enabled,"glow-accent":t(c).enabled}),f(C,t(c).time),f(x,t(c).name),f(Ie,Je),Q(F,1,`px-3 py-1.5 rounded-lg font-medium text-sm transition-all
                       ${t(c).enabled?"glow-accent power-btn-on":"bg-surface-recessed border border-stroke-default text-content-tertiary hover:border-stroke-strong"}`,"svelte-1wpfyiy"),f(L,t(c).enabled?"On":"Off")},[()=>st(t(c).preset_id)]),v(o,p)}),a(r),v(e,r)};T(tr,e=>{l.heaterSchedules.length===0?e(rr):e(ar,!1)})}a(Le);var mt=i(Le,2),Ue=s(mt),Xe=s(Ue),sr=s(Xe);$t(sr,{class:"w-4 h-4"}),a(Xe);var Ge=i(Xe,4),nr=s(Ge,!0);a(Ge);var or=i(Ge,4);{var ir=e=>{var r=ua();r.__click=Mt,v(e,r)};T(or,e=>{l.pendingHeaterActions.length>0&&e(ir)})}a(Ue);var cr=i(Ue,2);{var lr=e=>{var r=fa();v(e,r)},dr=e=>{var r=ma();ve(r,21,()=>l.pendingHeaterActions,o=>o.id,(o,c)=>{var p=ba(),y=s(p),h=i(s(y),2),$=s(h,!0);a(h);var C=i(h,4),A=s(C,!0);a(C),a(y);var S=i(y,2),x=s(S);a(S),a(p),k((G,I)=>{f($,G),f(A,I),f(x,`Retry #${t(c).retry_count??""}`)},[()=>qt(t(c).device_id),()=>st(t(c).preset_id)]),v(o,p)}),a(r),v(e,r)};T(cr,e=>{l.pendingHeaterActions.length===0?e(lr):e(dr,!1)})}a(mt),a(Pe),k((e,r)=>{var o,c,p;Q(be,1,`card ${(o=l.heaterOverride)!=null&&o.enabled?"card-active border-warning/50":""}`),re.disabled=t(d),Q(re,1,`ml-3 px-4 py-2 rounded-lg font-semibold uppercase tracking-wider text-sm transition-all disabled:opacity-50
                 ${(c=l.heaterOverride)!=null&&c.enabled?"bg-warning/20 text-warning border border-warning/50 shadow-[0_0_15px_-3px] shadow-warning/40":"bg-surface-recessed border border-stroke-default text-content-secondary hover:border-stroke-strong"}`),f(Ut,(p=l.heaterOverride)!=null&&p.enabled?"Active":"Off"),ht(Oe,t(E)==="pause"),ht(De,t(E)==="fixed"),f(Kt,l.heaterPresets.length),Ve.disabled=e,Q(Ve,1,`px-5 py-2.5 rounded-lg font-semibold uppercase tracking-wider transition-all w-full sm:w-auto
                 ${r??""}`,"svelte-1wpfyiy"),f(er,l.heaterSchedules.length),f(nr,l.pendingHeaterActions.length)},[()=>t(d)||!t(g).trim(),()=>!t(d)&&t(g).trim()?"glow-accent power-btn-on":"bg-surface-recessed border border-stroke-default text-content-tertiary"]),V(Fe,()=>t(g),e=>n(g,e)),Tr(me,()=>t(O),e=>n(O,e)),V(ft,()=>t(D),e=>n(D,e)),v(j,Pe),Pr()}wr(["click","change"]);export{Ta as component};
