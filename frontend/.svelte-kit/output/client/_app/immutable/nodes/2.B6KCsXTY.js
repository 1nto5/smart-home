import{d as be,c as ge,e as ra,a as l,f as v,s as u,t as Ue,b as na}from"../chunks/Dlj6haWL.js";import{h as Qe,a0 as ce,aD as ot,a6 as ue,a1 as a,a2 as e,a3 as r,a5 as g,b5 as ha,a7 as Te,g as t,a4 as R,s as i,a9 as G,aN as Le,R as Xe,K as ya,a8 as wa}from"../chunks/D2JNcFbJ.js";import{i as _}from"../chunks/KdfE8kWJ.js";import{f as Ze,s as rt,h as _e,e as qt,i as se,j as za,k as ka,l as ta,m as Ma,n as Sa,o as Ta,p as Ca,r as ja,q as Pa,u as ea,v as de,w as aa}from"../chunks/mhC6JEJ7.js";import{h as Ra}from"../chunks/CiNAWmNp.js";import{s as f,r as we,b as Se}from"../chunks/D0VUfHch.js";import{p as ve,b as Ba}from"../chunks/JyOeKW3E.js";import{s as Oa}from"../chunks/CjV97wi5.js";import{a as Da}from"../chunks/CxA4e2Oe.js";import{b as Aa}from"../chunks/Bd--2Fle.js";import{t as La}from"../chunks/DXg-5gAH.js";function Me(X,o,j,h){var s=X.__style;if(Qe||s!==o){var T=Da(o,h);(!Qe||T!==X.getAttribute("style"))&&(T==null?X.removeAttribute("style"):X.style.cssText=T),X.__style=o}return h}const Va={"korytarz 1":"Hallway 1","korytarz 2":"Hallway 2",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",jadalnia:"Dining Room",gabinet:"Study",pralnia:"Laundry","Czujnik zalania kuchnia":"Water Sensor Kitchen","Czujnik zalania ≈Çazienka":"Water Sensor Bathroom","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Drzwi:"Door Sensor","Grzejnik salon":"Radiator Living Room","Grzejnik sypialnia":"Radiator Bedroom","Grzejnik kuchnia":"Radiator Kitchen","Grzejnik ≈Çazienka":"Radiator Bathroom","Grzejnik korytarz":"Radiator Hallway","Grzejnik pok√≥j dzieci":"Radiator Kids Room",Grzejnik:"Radiator"},Na={korytarz:"Hallway",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",pok√≥j:"Room",dzieci:"Kids","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Grzejnik:"Radiator",Drzwi:"Door",Lampa:"Light",du≈ºy:"Large",ma≈Çy:"Small",g≈Ç√≥wny:"Main",g√≥rny:"Upper",dolny:"Lower"};function Ce(X){if(!X)return X;const o=X.toLowerCase();for(const[s,T]of Object.entries(Va))if(o===s.toLowerCase())return T;let j=X;const h=Object.entries(Na).sort((s,T)=>T[0].length-s[0].length);for(const[s,T]of h){const F=new RegExp(s,"gi");j=j.replace(F,T)}return j}function ze(X,o){let j=null;return[(...T)=>{j&&clearTimeout(j),j=setTimeout(()=>{j=null,X(...T)},o)},()=>{j&&(clearTimeout(j),j=null)}]}var Ea=v('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in svelte-alpl3u" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="glass-card rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl"><div class="flex items-center justify-between p-4 border-b border-[var(--glass-border)]"><h2 id="dialog-title" class="text-lg font-semibold"> </h2> <button aria-label="Close dialog" class="w-8 h-8 rounded-lg bg-zinc-800/60 text-zinc-400 hover:text-white hover:bg-zinc-700/60 transition-colors flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 overflow-y-auto max-h-[calc(80vh-64px)]"><!></div></div></div>');function ke(X,o){ce(o,!0);let j=ve(o,"open",3,!1);function h(z){z.target===z.currentTarget&&o.onclose()}function s(z){z.key==="Escape"&&o.onclose()}var T=ge();ra("keydown",ha,s);var F=ot(T);{var q=z=>{var D=Ea();D.__click=h,D.__keydown=s;var w=a(D),E=a(w),C=a(E),nt=a(C,!0);e(C);var I=r(C,2);I.__click=function(...yt){var B;(B=o.onclose)==null||B.apply(this,yt)},e(E);var A=r(E,2),$=a(A);Oa($,()=>o.children),e(A),e(w),e(D),g(()=>u(nt,o.title)),l(z,D)};_(F,z=>{j()&&z(q)})}l(X,T),ue()}be(["click","keydown"]);var Ia=v('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-amber-400 rounded-full animate-pulse"></span>'),Wa=v('<p class="text-xs text-indigo-400">Moonlight</p>'),Fa=v('<p class="text-xs text-[var(--muted)]"> </p>'),Ha=v('<p class="text-xs text-[var(--muted)]"> </p>'),Ga=v('<span class="absolute top-2 right-2 w-2 h-2 bg-amber-400 rounded-full animate-pulse"></span>'),$a=v('<span class="absolute top-1 right-1 w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"></span>'),Ka=v("<button> <!></button>"),Ya=v('<div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Brightness</span> <span class="font-medium text-white"> </span></div> <input type="range" min="1" max="100" class="w-full"/></div> <div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Color Temperature</span> <span class="font-medium text-white"> </span></div> <input type="range" min="1700" max="6500" step="100" class="w-full"/> <div class="flex justify-between text-xs text-[var(--muted)] mt-1"><span>Warm</span> <span>Cool</span></div></div>',1),qa=v('<div class="py-4 text-center text-sm text-indigo-400/80">Hardware night light mode active</div>'),Ja=v('<div><p class="text-sm text-[var(--muted)] mb-2">Presets</p> <div class="grid grid-cols-3 gap-2"></div></div> <!>',1),Ua=v('<button> <!></button> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">IP Address</span> <span class="font-mono text-xs"> </span></div></div>',1),Qa=v('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span><!></span></div> <!></div>'),Xa=v('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a.75.75 0 01.75.75v6.5a.75.75 0 01-1.5 0v-6.5A.75.75 0 0110 2z"></path><path d="M5.404 4.343a.75.75 0 10-1.06 1.06 6.5 6.5 0 109.192 0 .75.75 0 00-1.06-1.06 5 5 0 11-7.072 0z"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <!></div></div></div> <!>',1);function Za(X,o){ce(o,!0);let j=ve(o,"compact",3,!1),h=G(()=>Ce(o.lamp.name)),s=G(()=>rt.lampStatuses.get(o.lamp.id)),T=R(!1),F=R(!1),q=R(null),z=R(!1),D=R(null),w=R(null),E=R(null),C=G(()=>{var m;return t(q)??((m=t(s))==null?void 0:m.power)??!1}),nt=G(()=>{var m;return t(w)??((m=t(s))==null?void 0:m.brightness)??0}),I=G(()=>{var m;return t(E)??((m=t(s))==null?void 0:m.color_temp)??0});Te(()=>{t(T)||(i(T,!0),Ze(o.lamp.id).then(m=>rt.updateLampStatus(o.lamp.id,m.status)).catch(()=>{}))});async function A(m){m.stopPropagation();const P=!t(C);i(q,P),i(z,!0);try{await _e(o.lamp.id,{toggle:!0}),$()}catch(et){console.error(et),i(q,null),i(z,!1)}}async function $(){try{const m=await Ze(o.lamp.id);rt.updateLampStatus(o.lamp.id,m.status),i(q,null)}catch(m){console.error(m)}i(z,!1),i(D,null)}const[yt]=ze(async m=>{try{await _e(o.lamp.id,{brightness:m}),t(s)&&rt.updateLampStatus(o.lamp.id,{...t(s),brightness:m})}catch(P){console.error(P)}i(w,null)},300),[B]=ze(async m=>{try{await _e(o.lamp.id,{color_temp:m}),t(s)&&rt.updateLampStatus(o.lamp.id,{...t(s),color_temp:m})}catch(P){console.error(P)}i(E,null)},300);function ct(m){i(w,m,!0),yt(m)}function Mt(m){i(E,m,!0),B(m)}const Bt=[{id:"day",label:"Day",brightness:100,colorTemp:5e3,moonlight:!1},{id:"night",label:"Night",brightness:30,colorTemp:2700,moonlight:!1},{id:"moonlight",label:"Moonlight",brightness:10,colorTemp:2700,moonlight:!0}];async function Ot(m){var P,et;i(D,m.id,!0),m.moonlight?t(s)&&rt.updateLampStatus(o.lamp.id,{...t(s),power:!0,moonlight_mode:!0,brightness:m.brightness}):t(s)&&rt.updateLampStatus(o.lamp.id,{...t(s),power:!0,moonlight_mode:!1,brightness:m.brightness,color_temp:m.colorTemp});try{m.moonlight?await _e(o.lamp.id,{moonlight:!0,moonlight_brightness:m.brightness}):((P=t(s))!=null&&P.moonlight_mode?await _e(o.lamp.id,{moonlight:!1}):(et=t(s))!=null&&et.power||await _e(o.lamp.id,{power:!0}),await _e(o.lamp.id,{brightness:m.brightness,color_temp:m.colorTemp})),$()}catch(n){console.error(n),i(D,null),$()}}function J(m){var n,p,y,L;if(!t(C))return!1;if(m.moonlight)return((n=t(s))==null?void 0:n.moonlight_mode)??!1;if((p=t(s))!=null&&p.moonlight_mode)return!1;const P=Math.abs((((y=t(s))==null?void 0:y.brightness)??0)-m.brightness)<=5,et=Math.abs((((L=t(s))==null?void 0:L.color_temp)??0)-m.colorTemp)<=200;return P&&et}var U=Xa(),k=ot(U);k.__click=()=>i(F,!0),k.__keydown=m=>m.key==="Enter"&&i(F,!0);var K=a(k),M=a(K);M.__click=A;let S;var c=r(a(M),2);{var b=m=>{var P=Ia();l(m,P)};_(c,m=>{t(z)&&m(b)})}e(M);var Z=r(M,2),tt=a(Z),xt=a(tt,!0);e(tt);var Dt=r(tt,2);{var kt=m=>{var P=ge(),et=ot(P);{var n=y=>{var L=Wa();l(y,L)},p=y=>{var L=Fa(),st=a(L);e(L),g(()=>u(st,`${t(nt)??""}% ¬∑ ${t(I)??""}K`)),l(y,L)};_(et,y=>{var L;(L=t(s))!=null&&L.moonlight_mode?y(n):y(p,!1)})}l(m,P)},Xt=m=>{var P=Ha(),et=a(P,!0);e(P),g(()=>u(et,t(s)?"Off":"Offline")),l(m,P)};_(Dt,m=>{t(C)?m(kt):m(Xt,!1)})}e(Z),e(K),e(k);var Ct=r(k,2);ke(Ct,{get open(){return t(F)},onclose:()=>i(F,!1),get title(){return t(h)},children:(m,P)=>{var et=Qa(),n=a(et),p=r(a(n),2),y=a(p);{var L=lt=>{var at=Ue();g(()=>{var d;return u(at,(d=t(s))!=null&&d.moonlight_mode?"Moonlight":"On")}),l(lt,at)},st=lt=>{var at=Ue();g(()=>u(at,t(s)?"Off":"Offline")),l(lt,at)};_(y,lt=>{t(C)?lt(L):lt(st,!1)})}e(p),e(n);var Vt=r(n,2);{var At=lt=>{var at=Ua(),d=ot(at);d.__click=A;var x=a(d),H=r(x);{var dt=N=>{var mt=Ga();l(N,mt)};_(H,N=>{t(z)&&N(dt)})}e(d);var ut=r(d,2);{var ft=N=>{var mt=Ja(),Ht=ot(mt),Zt=r(a(Ht),2);qt(Zt,21,()=>Bt,se,(Pt,wt)=>{var Lt=Ka();Lt.__click=()=>Ot(t(wt));var Nt=a(Lt),te=r(Nt);{var Tt=zt=>{var Rt=$a();l(zt,Rt)};_(te,zt=>{t(D)===t(wt).id&&zt(Tt)})}e(Lt),g(zt=>{f(Lt,1,`py-2.5 text-sm rounded-lg transition-all relative
                       ${zt??""}`),u(Nt,`${t(wt).label??""} `)},[()=>J(t(wt))||t(D)===t(wt).id?t(wt).moonlight?"bg-indigo-500/20 text-indigo-400":"bg-amber-500/20 text-amber-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"]),l(Pt,Lt)}),e(Zt),e(Ht);var ie=r(Ht,2);{var Gt=Pt=>{var wt=Ya(),Lt=ot(wt),Nt=a(Lt),te=r(a(Nt),2),Tt=a(te);e(te),e(Nt);var zt=r(Nt,2);we(zt),zt.__input=Q=>ct(parseInt(Q.currentTarget.value)),e(Lt);var Rt=r(Lt,2),Kt=a(Rt),Et=r(a(Kt),2),Y=a(Et);e(Et),e(Kt);var W=r(Kt,2);we(W),W.__input=Q=>Mt(parseInt(Q.currentTarget.value)),Le(2),e(Rt),g(()=>{u(Tt,`${t(nt)??""}%`),Se(zt,t(nt)),u(Y,`${t(I)??""}K`),Se(W,t(I))}),l(Pt,wt)},$t=Pt=>{var wt=qa();l(Pt,wt)};_(ie,Pt=>{t(s).moonlight_mode?Pt($t,!1):Pt(Gt)})}l(N,mt)};_(ut,N=>{t(C)&&N(ft)})}var jt=r(ut,2),vt=a(jt),St=r(a(vt),2),it=a(St,!0);e(St),e(vt);var gt=r(vt,2),O=r(a(gt),2),V=a(O,!0);e(O),e(gt),e(jt),g(()=>{f(d,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${t(C)?t(s).moonlight_mode?"bg-indigo-500/20 text-indigo-400":"bg-amber-500/20 text-amber-400":"bg-zinc-800 text-zinc-400"}
               hover:scale-[1.02]`),u(x,`${t(C)?"Turn Off":"Turn On"} `),u(it,o.lamp.model),u(V,o.lamp.ip)}),l(lt,at)};_(Vt,lt=>{t(s)&&lt(At)})}e(et),g(()=>{var lt;return f(p,1,`font-medium ${t(C)?(lt=t(s))!=null&&lt.moonlight_mode?"text-indigo-400":"text-amber-400":"text-zinc-500"}`)}),l(m,et)},$$slots:{default:!0}}),g(()=>{var m;f(k,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),M.disabled=!t(s),S=f(M,1,`w-9 h-9 rounded-lg flex items-center justify-center transition-all shrink-0 relative
             ${t(C)?(m=t(s))!=null&&m.moonlight_mode?"bg-indigo-500/20 text-indigo-400":"bg-amber-500/20 text-amber-400":"bg-zinc-800/60 text-zinc-500"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,S,{"status-active":t(C)}),u(xt,t(h))}),l(X,U),ue()}be(["click","keydown","input"]);var tr=v("<p> </p>"),er=v('<p class="text-xs text-[var(--muted)]">Offline</p>'),ar=v('<div class="flex items-center gap-1 text-xs shrink-0"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 11.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zm4-3a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-4z"></path><path d="M8 4.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v8a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-8z"></path></svg> <span> </span></div>'),rr=v('<span class="absolute top-1 right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>'),nr=v('<span class="absolute top-1 right-1 w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></span>'),sr=v('<span class="absolute top-1 right-1 w-2 h-2 bg-blue-400 rounded-full animate-pulse"></span>'),ir=v('<span class="absolute top-2 right-2 w-2 h-2 bg-zinc-400 rounded-full animate-pulse"></span>'),or=v('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-purple-400 rounded-full animate-pulse"></span>'),lr=v('<button><div class="text-base mb-0.5"> </div> <!></button>'),dr=v('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-cyan-400 rounded-full animate-pulse"></span>'),vr=v('<button><div class="text-base mb-0.5"> </div> <!></button>'),cr=v(`<div><p class="text-sm text-[var(--muted)] mb-2">Actions</p> <div class="grid grid-cols-3 gap-2"><button class="py-4 rounded-xl bg-green-500/20 text-green-400 text-sm font-medium relative
                     hover:bg-green-500/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> Start <!></button> <button class="py-4 rounded-xl bg-yellow-500/20 text-yellow-400 text-sm font-medium relative
                     hover:bg-yellow-500/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Pause <!></button> <button class="py-4 rounded-xl bg-blue-500/20 text-blue-400 text-sm font-medium relative
                     hover:bg-blue-500/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg> Home <!></button></div></div> <div><button class="w-full py-3 rounded-xl bg-zinc-800/60 text-zinc-400 text-sm font-medium relative
                   hover:bg-zinc-700/60 transition-colors">Find Robot <!></button></div> <div><p class="text-sm text-[var(--muted)] mb-2">Suction Power</p> <div class="grid grid-cols-4 gap-1"></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Mop Intensity</p> <div class="grid grid-cols-4 gap-1"></div></div>`,1),ur=v("<button> </button>"),mr=v('<span class="absolute top-2 right-2 w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></span>'),pr=v(`<button class="w-full mt-3 py-3 rounded-xl bg-cyan-500/20 text-cyan-400 text-sm font-medium relative
                       hover:bg-cyan-500/30 transition-colors"> <!></button>`),xr=v('<div class="grid grid-cols-2 gap-2"></div> <!>',1),fr=v('<p class="text-zinc-500 text-sm">Loading rooms...</p>'),_r=v('<div><p class="text-sm text-[var(--muted)] mb-2">Select rooms to clean</p> <!></div>'),gr=v('<div><p class="text-sm text-[var(--muted)] mb-3">Consumables</p> <div class="space-y-3"><div><div class="flex justify-between text-xs mb-1"><span class="text-zinc-400">Main Brush</span> <div class="flex items-center gap-2"><span class="text-zinc-500"> </span> <button>Reset</button></div></div> <div class="h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-zinc-400">Side Brush</span> <div class="flex items-center gap-2"><span class="text-zinc-500"> </span> <button>Reset</button></div></div> <div class="h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-zinc-400">Filter</span> <div class="flex items-center gap-2"><span class="text-zinc-500"> </span> <button>Reset</button></div></div> <div class="h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-zinc-400">Sensors</span> <div class="flex items-center gap-2"><span class="text-zinc-500"> </span> <button>Reset</button></div></div> <div class="h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div></div></div>'),br=v('<p class="text-zinc-500 text-sm">Loading consumables...</p>'),hr=v(`<div><div class="flex justify-between items-center mb-2"><span class="text-sm text-[var(--muted)]">Volume</span> <span class="text-sm font-medium"> </span></div> <input type="range" min="0" max="100" step="10" class="w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer
                   [&amp;::-webkit-slider-thumb]:appearance-none [&amp;::-webkit-slider-thumb]:w-4 [&amp;::-webkit-slider-thumb]:h-4
                   [&amp;::-webkit-slider-thumb]:bg-white [&amp;::-webkit-slider-thumb]:rounded-full [&amp;::-webkit-slider-thumb]:cursor-pointer"/></div> <!>`,1),yr=v('<div class="grid grid-cols-2 gap-3"><div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Battery</span> <p> </p></div> <div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Fan Speed</span> <p class="text-2xl font-bold mt-1"> </p></div></div> <div class="flex gap-1 bg-zinc-800/40 rounded-lg p-1"><button>Controls</button> <button>Rooms</button> <button>Settings</button></div> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs">Roborock S8</span></div></div>',1),wr=v('<div class="text-center py-8 text-[var(--muted)]">Start bridge to control robot</div>'),zr=v('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),kr=v('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z" clip-rule="evenodd"></path></svg></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate">Roborock</h4> <!></div> <!></div></div> <!>',1);function Mr(X,o){ce(o,!0);let j=ve(o,"compact",3,!1),h=R(!1),s=R(null),T=R(null),F=R(null),q=R(!1),z=R(null),D=R(null),w=R(null),E=G(()=>{var d;return t(D)??((d=o.status)==null?void 0:d.fanPower)??102}),C=G(()=>{var d;return t(w)??((d=o.status)==null?void 0:d.waterBoxMode)??200}),nt=R(Xe([])),I=R(Xe(new Set)),A=R(30),$=R(null),yt=G(()=>t($)??t(A)),B=R(null),ct=R("controls");const Mt={1:"Starting",2:"Charger disconnected",3:"Idle",4:"Remote control",5:"Cleaning",6:"Returning",7:"Manual mode",8:"Charging",9:"Charging problem",10:"Paused",11:"Spot cleaning",12:"Error",13:"Shutting down",14:"Updating",15:"Docking",16:"Going to target",17:"Zoned cleaning",18:"Segment cleaning",22:"Emptying dustbin",23:"Washing mop",26:"Going to wash mop"},Bt=[{mode:101,name:"Quiet",icon:"üîá"},{mode:102,name:"Balanced",icon:"‚öñÔ∏è"},{mode:103,name:"Turbo",icon:"üí®"},{mode:104,name:"Max",icon:"üî•"}],Ot=[{mode:200,name:"Off",icon:"‚ùå"},{mode:201,name:"Low",icon:"üíß"},{mode:202,name:"Med",icon:"üíßüíß"},{mode:203,name:"High",icon:"üíßüíßüíß"}];function J(d){return Mt[d]||"Unknown"}function U(d){const x=Bt.find(H=>H.mode===d);return x?x.name:`${d}%`}async function k(){try{const[d,x,H]=await Promise.all([za(),ka(),ta()]);i(nt,d.rooms,!0),i(A,x.volume,!0),i(B,H,!0)}catch(d){console.error("Failed to load extended data:",d)}}async function K(d){i(s,d,!0);try{await Ma(d),rt.refreshRoborock()}catch(x){console.error(x)}i(s,null)}async function M(d){i(D,d,!0),i(T,d,!0);try{await Sa(d),rt.refreshRoborock()}catch(x){console.error(x),i(D,null)}i(T,null)}async function S(d){i(w,d,!0),i(F,d,!0);try{await Ta(d),rt.refreshRoborock()}catch(x){console.error(x),i(w,null)}i(F,null)}const[c]=ze(async d=>{try{await Pa(d),i(A,d,!0)}catch(x){console.error(x)}i($,null)},300);function b(d){i($,d,!0),c(d)}function Z(d){const x=new Set(t(I));x.has(d)?x.delete(d):x.add(d),i(I,x,!0)}async function tt(){if(t(I).size!==0){i(q,!0);try{await Ca([...t(I)]),i(I,new Set,!0),rt.refreshRoborock()}catch(d){console.error(d)}i(q,!1)}}function xt(d,x){const H=d/3600;return Math.max(0,Math.min(100,H/x*100))}function Dt(d){return d<50?"bg-green-500":d<80?"bg-yellow-500":"bg-red-500"}async function kt(d){i(z,d,!0);try{await ja(d);const x=await ta();i(B,x,!0)}catch(x){console.error(x)}i(z,null)}function Xt(d){switch(d){case 5:case 11:case 17:case 18:return{color:"text-green-400",bg:"bg-green-500/20"};case 8:return{color:"text-blue-400",bg:"bg-blue-500/20"};case 3:return{color:"text-zinc-400",bg:"bg-zinc-800/60"};case 10:return{color:"text-yellow-400",bg:"bg-yellow-500/20"};case 6:case 15:case 16:case 26:return{color:"text-cyan-400",bg:"bg-cyan-500/20"};case 12:case 9:return{color:"text-red-400",bg:"bg-red-500/20"};default:return{color:"text-zinc-400",bg:"bg-zinc-800/60"}}}let Ct=G(()=>o.status?Xt(o.status.state):{color:"text-zinc-500",bg:"bg-zinc-800/60"});Te(()=>{t(h)&&k()});var m=kr(),P=ot(m);P.__click=()=>i(h,!0),P.__keydown=d=>d.key==="Enter"&&i(h,!0);var et=a(P),n=a(et);let p;var y=r(n,2),L=r(a(y),2);{var st=d=>{var x=tr(),H=a(x,!0);e(x),g(dt=>{f(x,1,`text-xs ${t(Ct).color??""}`),u(H,dt)},[()=>J(o.status.state)]),l(d,x)},Vt=d=>{var x=er();l(d,x)};_(L,d=>{o.status?d(st):d(Vt,!1)})}e(y);var At=r(y,2);{var lt=d=>{var x=ar(),H=a(x),dt=r(H,2),ut=a(dt);e(dt),e(x),g(()=>{f(H,0,`w-3.5 h-3.5 ${o.status.battery>20?"text-green-400":"text-red-400"}`),f(dt,1,o.status.battery>20?"text-zinc-400":"text-red-400"),u(ut,`${o.status.battery??""}%`)}),l(d,x)};_(At,d=>{j()&&o.status&&d(lt)})}e(et),e(P);var at=r(P,2);ke(at,{get open(){return t(h)},onclose:()=>i(h,!1),title:"Roborock",children:(d,x)=>{var H=zr(),dt=a(H),ut=r(a(dt),2),ft=a(ut,!0);e(ut),e(dt);var jt=r(dt,2);{var vt=it=>{var gt=yr(),O=ot(gt),V=a(O),N=r(a(V),2),mt=a(N);e(N),e(V);var Ht=r(V,2),Zt=r(a(Ht),2),ie=a(Zt,!0);e(Zt),e(Ht),e(O);var Gt=r(O,2),$t=a(Gt);$t.__click=()=>i(ct,"controls");var Pt=r($t,2);Pt.__click=()=>i(ct,"rooms");var wt=r(Pt,2);wt.__click=()=>i(ct,"settings"),e(Gt);var Lt=r(Gt,2);{var Nt=Tt=>{var zt=cr(),Rt=ot(zt),Kt=r(a(Rt),2),Et=a(Kt);Et.__click=()=>K("start");var Y=r(a(Et),2);{var W=pt=>{var _t=rr();l(pt,_t)};_(Y,pt=>{t(s)==="start"&&pt(W)})}e(Et);var Q=r(Et,2);Q.__click=()=>K("pause");var ee=r(a(Q),2);{var It=pt=>{var _t=nr();l(pt,_t)};_(ee,pt=>{t(s)==="pause"&&pt(It)})}e(Q);var ht=r(Q,2);ht.__click=()=>K("home");var bt=r(a(ht),2);{var Jt=pt=>{var _t=sr();l(pt,_t)};_(bt,pt=>{t(s)==="home"&&pt(Jt)})}e(ht),e(Kt),e(Rt);var oe=r(Rt,2),me=a(oe);me.__click=()=>K("find");var ae=r(a(me));{var Ut=pt=>{var _t=ir();l(pt,_t)};_(ae,pt=>{t(s)==="find"&&pt(Ut)})}e(me),e(oe);var Yt=r(oe,2),le=r(a(Yt),2);qt(le,21,()=>Bt,se,(pt,_t)=>{var Ft=lr();Ft.__click=()=>M(t(_t).mode);var re=a(Ft),pe=a(re,!0);e(re);var xe=r(re),he=r(xe);{var ye=ne=>{var fe=or();l(ne,fe)};_(he,ne=>{t(T)===t(_t).mode&&ne(ye)})}e(Ft),g(()=>{f(Ft,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${t(E)===t(_t).mode?"bg-purple-500/30 text-purple-400 ring-1 ring-purple-500/50":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),u(pe,t(_t).icon),u(xe,` ${t(_t).name??""} `)}),l(pt,Ft)}),e(le),e(Yt);var Wt=r(Yt,2),Qt=r(a(Wt),2);qt(Qt,21,()=>Ot,se,(pt,_t)=>{var Ft=vr();Ft.__click=()=>S(t(_t).mode);var re=a(Ft),pe=a(re,!0);e(re);var xe=r(re),he=r(xe);{var ye=ne=>{var fe=dr();l(ne,fe)};_(he,ne=>{t(F)===t(_t).mode&&ne(ye)})}e(Ft),g(()=>{f(Ft,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${t(C)===t(_t).mode?"bg-cyan-500/30 text-cyan-400 ring-1 ring-cyan-500/50":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),u(pe,t(_t).icon),u(xe,` ${t(_t).name??""} `)}),l(pt,Ft)}),e(Qt),e(Wt),l(Tt,zt)},te=Tt=>{var zt=ge(),Rt=ot(zt);{var Kt=Y=>{var W=_r(),Q=r(a(W),2);{var ee=ht=>{var bt=xr(),Jt=ot(bt);qt(Jt,21,()=>t(nt),se,(ae,Ut)=>{var Yt=ur();Yt.__click=()=>Z(t(Ut).segmentId);var le=a(Yt,!0);e(Yt),g(Wt=>{f(Yt,1,`py-3 px-3 rounded-xl text-sm font-medium transition-colors text-left
                         ${Wt??""}`),u(le,t(Ut).name)},[()=>t(I).has(t(Ut).segmentId)?"bg-cyan-500/30 text-cyan-400 ring-1 ring-cyan-500/50":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"]),l(ae,Yt)}),e(Jt);var oe=r(Jt,2);{var me=ae=>{var Ut=pr();Ut.__click=tt;var Yt=a(Ut),le=r(Yt);{var Wt=Qt=>{var pt=mr();l(Qt,pt)};_(le,Qt=>{t(q)&&Qt(Wt)})}e(Ut),g(()=>u(Yt,`Clean ${t(I).size??""} room${t(I).size>1?"s":""} `)),l(ae,Ut)};_(oe,ae=>{t(I).size>0&&ae(me)})}l(ht,bt)},It=ht=>{var bt=fr();l(ht,bt)};_(Q,ht=>{t(nt).length>0?ht(ee):ht(It,!1)})}e(W),l(Y,W)},Et=Y=>{var W=ge(),Q=ot(W);{var ee=It=>{var ht=hr(),bt=ot(ht),Jt=a(bt),oe=r(a(Jt),2),me=a(oe);e(oe),e(Jt);var ae=r(Jt,2);we(ae),ae.__input=Wt=>b(parseInt(Wt.currentTarget.value)),e(bt);var Ut=r(bt,2);{var Yt=Wt=>{var Qt=gr(),pt=r(a(Qt),2),_t=a(pt),Ft=a(_t),re=r(a(Ft),2),pe=a(re),xe=a(pe);e(pe);var he=r(pe,2);he.__click=()=>kt("main_brush_work_time"),e(re),e(Ft);var ye=r(Ft,2),ne=a(ye);e(ye),e(_t);var fe=r(_t,2),je=a(fe),Ve=r(a(je),2),Pe=a(Ve),sa=a(Pe);e(Pe);var Ne=r(Pe,2);Ne.__click=()=>kt("side_brush_work_time"),e(Ve),e(je);var Ee=r(je,2),Ie=a(Ee);e(Ee),e(fe);var Re=r(fe,2),Be=a(Re),We=r(a(Be),2),Oe=a(We),ia=a(Oe);e(Oe);var Fe=r(Oe,2);Fe.__click=()=>kt("filter_work_time"),e(We),e(Be);var He=r(Be,2),Ge=a(He);e(He),e(Re);var $e=r(Re,2),De=a($e),Ke=r(a(De),2),Ae=a(Ke),oa=a(Ae);e(Ae);var Ye=r(Ae,2);Ye.__click=()=>kt("sensor_dirty_time"),e(Ke),e(De);var qe=r(De,2),Je=a(qe);e(qe),e($e),e(pt),e(Qt),g((la,da,va,ca,ua,ma,pa,xa,fa,_a,ga,ba)=>{u(xe,`${la??""}h`),f(he,1,`text-[10px] px-1.5 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-400 relative ${t(z)==="main_brush_work_time"?"opacity-50":""}`),f(ne,1,`h-full ${da??""} transition-all`),Me(ne,`width: ${va??""}%`),u(sa,`${ca??""}h`),f(Ne,1,`text-[10px] px-1.5 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-400 ${t(z)==="side_brush_work_time"?"opacity-50":""}`),f(Ie,1,`h-full ${ua??""} transition-all`),Me(Ie,`width: ${ma??""}%`),u(ia,`${pa??""}h`),f(Fe,1,`text-[10px] px-1.5 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-400 ${t(z)==="filter_work_time"?"opacity-50":""}`),f(Ge,1,`h-full ${xa??""} transition-all`),Me(Ge,`width: ${fa??""}%`),u(oa,`${_a??""}h`),f(Ye,1,`text-[10px] px-1.5 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-400 ${t(z)==="sensor_dirty_time"?"opacity-50":""}`),f(Je,1,`h-full ${ga??""} transition-all`),Me(Je,`width: ${ba??""}%`)},[()=>Math.round(t(B).mainBrushWorkTime/3600),()=>Dt(xt(t(B).mainBrushWorkTime,300)),()=>xt(t(B).mainBrushWorkTime,300),()=>Math.round(t(B).sideBrushWorkTime/3600),()=>Dt(xt(t(B).sideBrushWorkTime,200)),()=>xt(t(B).sideBrushWorkTime,200),()=>Math.round(t(B).filterWorkTime/3600),()=>Dt(xt(t(B).filterWorkTime,150)),()=>xt(t(B).filterWorkTime,150),()=>Math.round(t(B).sensorDirtyTime/3600),()=>Dt(xt(t(B).sensorDirtyTime,30)),()=>xt(t(B).sensorDirtyTime,30)]),l(Wt,Qt)},le=Wt=>{var Qt=br();l(Wt,Qt)};_(Ut,Wt=>{t(B)?Wt(Yt):Wt(le,!1)})}g(()=>{u(me,`${t(yt)??""}%`),Se(ae,t(yt))}),l(It,ht)};_(Q,It=>{t(ct)==="settings"&&It(ee)},!0)}l(Y,W)};_(Rt,Y=>{t(ct)==="rooms"?Y(Kt):Y(Et,!1)},!0)}l(Tt,zt)};_(Lt,Tt=>{t(ct)==="controls"?Tt(Nt):Tt(te,!1)})}Le(2),g(Tt=>{f(N,1,`text-3xl font-bold mt-1 ${o.status.battery>20?"":"text-red-400"}`),u(mt,`${o.status.battery??""}%`),u(ie,Tt),f($t,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${t(ct)==="controls"?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white"}`),f(Pt,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${t(ct)==="rooms"?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white"}`),f(wt,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${t(ct)==="settings"?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white"}`)},[()=>U(o.status.fanPower)]),l(it,gt)},St=it=>{var gt=wr();l(it,gt)};_(jt,it=>{o.status?it(vt):it(St,!1)})}e(H),g(it=>{f(ut,1,`font-medium ${t(Ct).color??""}`),u(ft,it)},[()=>o.status?J(o.status.state):"Offline"]),l(d,H)},$$slots:{default:!0}}),g(()=>{var d,x,H,dt;f(P,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),p=f(n,1,`w-9 h-9 rounded-lg flex items-center justify-center shrink-0 ${t(Ct).bg??""} ${t(Ct).color??""}`,null,p,{"status-active":((d=o.status)==null?void 0:d.state)===5||((x=o.status)==null?void 0:x.state)===11||((H=o.status)==null?void 0:H.state)===17||((dt=o.status)==null?void 0:dt.state)===18})}),l(X,m),ue()}be(["click","keydown","input"]);var Sr=v('<div class="grid grid-cols-2 gap-3"><div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Temperature</span> <p class="text-2xl font-bold mt-1 text-cyan-400"> </p></div> <div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Humidity</span> <p class="text-2xl font-bold mt-1 text-blue-400"> </p></div></div>'),Tr=v('<div class="bg-zinc-800/40 rounded-xl p-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Battery</span> <span> </span></div> <div class="mt-2 h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div>'),Cr=v('<div class="space-y-4"><div><span class="text-4xl"> </span> <p> </p> <p class="text-sm text-[var(--muted)] mt-1"> </p></div> <!> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Type</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">Online</span> <span> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">Device ID</span> <span class="font-mono text-xs"> </span></div></div></div>'),jr=v('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div> </div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <p> </p></div> <div></div></div></div> <!>',1);function Pr(X,o){ce(o,!0);let j=ve(o,"compact",3,!1),h=G(()=>Ce(o.device.name)),s=R(!1),T=G(()=>()=>{if(!o.device.last_status)return null;try{return JSON.parse(o.device.last_status)}catch{return null}});const F={sj:{label:"Water",icon:"üíß"},mcs:{label:"Door",icon:"üö™"},wsdcg:{label:"Climate",icon:"üå°Ô∏è"},wfcon:{label:"Gateway",icon:"üì°"},cz:{label:"Remote",icon:"üì∫"}},q=15;function z(k,K){if(!k)return K==="sj"||K==="mcs"?{text:"Monitoring",alert:!1,color:"text-zinc-500",lowBattery:!1}:{text:"No data",alert:!1,color:"text-zinc-500",lowBattery:!1};switch(K){case"sj":{const M=k[1],S=M==="alarm"||M==="1"||M===1,c=k[4],b=c!==void 0&&c<=q;return S?{text:"Water detected!",alert:!0,color:"text-red-400",lowBattery:b,batteryPercent:c}:{text:b?`Dry ¬∑ ${c}%`:"Dry",alert:!1,color:"text-green-400",lowBattery:b,batteryPercent:c}}case"mcs":{const M=k[101]===!0||k[1]===!0,S=k[103]||k[4],c=S!==void 0&&S<=q;return{text:c?`${M?"Open":"Closed"} ¬∑ ${S}%`:M?"Open":"Closed",alert:M,color:M?"text-amber-400":"text-green-400",lowBattery:c,batteryPercent:S}}case"wsdcg":{const M=k[103],S=k[102];return M!==void 0&&S!==void 0?{text:`${(M/100).toFixed(1)}¬∞C ¬∑ ${S}%`,alert:!1,color:"text-cyan-400",lowBattery:!1}:{text:"N/A",alert:!1,color:"text-zinc-500",lowBattery:!1}}default:return{text:o.device.online?"Online":"Offline",alert:!1,color:o.device.online?"text-green-400":"text-zinc-500",lowBattery:!1}}}let D=G(()=>F[o.device.category]||{label:o.device.category,icon:"üì±"}),w=G(()=>z(t(T)(),o.device.category));var E=jr(),C=ot(E);C.__click=()=>i(s,!0),C.__keydown=k=>k.key==="Enter"&&i(s,!0);var nt=a(C),I=a(nt);let A;var $=a(I,!0);e(I);var yt=r(I,2),B=a(yt),ct=a(B,!0);e(B);var Mt=r(B,2),Bt=a(Mt,!0);e(Mt),e(yt);var Ot=r(yt,2);let J;e(nt),e(C);var U=r(C,2);ke(U,{get open(){return t(s)},onclose:()=>i(s,!1),get title(){return t(h)},children:(k,K)=>{var M=Cr(),S=a(M),c=a(S),b=a(c,!0);e(c);var Z=r(c,2),tt=a(Z,!0);e(Z);var xt=r(Z,2),Dt=a(xt);e(xt),e(S);var kt=r(S,2);{var Xt=at=>{const d=G(()=>t(T)());var x=ge(),H=ot(x);{var dt=ut=>{var ft=Sr(),jt=a(ft),vt=r(a(jt),2),St=a(vt);e(vt),e(jt);var it=r(jt,2),gt=r(a(it),2),O=a(gt);e(gt),e(it),e(ft),g(V=>{u(St,`${V??""}¬∞C`),u(O,`${t(d)[102]??""}%`)},[()=>(t(d)[103]/100).toFixed(1)]),l(ut,ft)};_(H,ut=>{t(d)&&ut(dt)})}l(at,x)};_(kt,at=>{o.device.category==="wsdcg"&&at(Xt)})}var Ct=r(kt,2);{var m=at=>{const d=G(()=>t(T)());var x=ge(),H=ot(x);{var dt=ut=>{const ft=G(()=>t(d)[4]||t(d)[103]);var jt=ge(),vt=ot(jt);{var St=it=>{var gt=Tr(),O=a(gt),V=r(a(O),2),N=a(V);e(V),e(O);var mt=r(O,2),Ht=a(mt);e(mt),e(gt),g(()=>{f(V,1,`font-bold ${t(ft)>20?"text-green-400":"text-red-400"}`),u(N,`${t(ft)??""}%`),f(Ht,1,`h-full rounded-full transition-all ${t(ft)>20?"bg-green-500":"bg-red-500"}`),Me(Ht,`width: ${t(ft)??""}%`)}),l(it,gt)};_(vt,it=>{t(ft)!==void 0&&it(St)})}l(ut,jt)};_(H,ut=>{t(d)&&ut(dt)})}l(at,x)};_(Ct,at=>{(o.device.category==="sj"||o.device.category==="mcs")&&at(m)})}var P=r(Ct,2),et=a(P),n=r(a(et),2),p=a(n,!0);e(n),e(et);var y=r(et,2),L=r(a(y),2),st=a(L,!0);e(L),e(y);var Vt=r(y,2),At=r(a(Vt),2),lt=a(At);e(At),e(Vt),e(P),e(M),g(at=>{f(S,1,`rounded-xl p-6 text-center ${t(w).alert?"bg-red-500/20":"bg-zinc-800/40"}`),u(b,t(D).icon),f(Z,1,`text-2xl font-bold mt-2 ${t(w).color??""}`),u(tt,t(w).text),u(Dt,`${t(D).label??""} Sensor`),u(p,t(D).label),f(L,1,o.device.online?"text-green-400":"text-red-400"),u(st,o.device.online?"Yes":"No"),u(lt,`${at??""}...`)},[()=>o.device.id.slice(0,12)]),l(k,M)},$$slots:{default:!0}}),g(()=>{f(C,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer
         ${t(w).lowBattery?"border-amber-500/50 bg-amber-500/10":""}`),A=f(I,1,`w-9 h-9 rounded-lg flex items-center justify-center text-base shrink-0
             ${t(w).alert?"bg-red-500/20":t(w).lowBattery?"bg-amber-500/20":"bg-zinc-800/60"}`,null,A,{"status-active":t(w).alert}),u($,t(D).icon),u(ct,t(h)),f(Mt,1,`text-xs ${(t(w).lowBattery?"text-amber-400":t(w).color)??""}`),u(Bt,t(w).text),J=f(Ot,1,`w-2 h-2 rounded-full shrink-0
             ${o.device.online?"bg-green-500":"bg-zinc-600"}`,null,J,{"status-dot":o.device.online})}),l(X,E),ue()}be(["click","keydown"]);var Rr=na('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd"></path></svg>'),Br=na('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M5.05 3.636a1 1 0 010 1.414 7 7 0 000 9.9 1 1 0 11-1.414 1.414 9 9 0 010-12.728 1 1 0 011.414 0zm9.9 0a1 1 0 011.414 0 9 9 0 010 12.728 1 1 0 11-1.414-1.414 7 7 0 000-9.9 1 1 0 010-1.414zM7.879 6.464a1 1 0 010 1.414 3 3 0 000 4.243 1 1 0 11-1.415 1.414 5 5 0 010-7.07 1 1 0 011.415 0zm4.242 0a1 1 0 011.415 0 5 5 0 010 7.072 1 1 0 01-1.415-1.415 3 3 0 000-4.242 1 1 0 010-1.415zM10 9a1 1 0 011 1v.01a1 1 0 11-2 0V10a1 1 0 011-1z"></path></svg>'),Or=v('<p class="text-xs text-[var(--muted)]"> </p>'),Dr=v('<p class="text-xs text-[var(--muted)]">No data</p>'),Ar=v('<input type="number" min="5" max="30" step="0.5" class="text-3xl font-bold w-24 text-center bg-transparent border-b-2 border-orange-400 outline-none [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/>'),Lr=v('<button class="text-3xl font-bold w-24 text-center hover:text-orange-400 transition-colors cursor-text" title="Click to edit"> </button>'),Vr=v('<span class="absolute -top-1 -right-1 w-2 h-2 bg-orange-400 rounded-full animate-pulse"></span>'),Nr=v('<span class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"></span>'),Er=v("<button> </button>"),Ir=v(`<div class="grid grid-cols-2 gap-3"><div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)] uppercase tracking-wide">Current</span> <p class="text-3xl font-bold mt-1"> </p></div> <div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)] uppercase tracking-wide">Target</span> <p class="text-3xl font-bold mt-1 text-orange-400"> </p></div></div> <div><p class="text-sm text-[var(--muted)] mb-3">Set Temperature</p> <div class="flex items-center justify-center gap-4"><button class="w-14 h-14 rounded-full bg-blue-500/20 text-blue-400 text-2xl font-medium
                   hover:bg-blue-500/30 disabled:opacity-50 transition-all">‚àí</button> <div class="relative"><!> <!> <!></div> <button class="w-14 h-14 rounded-full bg-orange-500/20 text-orange-400 text-2xl font-medium
                   hover:bg-orange-500/30 disabled:opacity-50 transition-all">+</button></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Quick Set</p> <div class="grid grid-cols-4 gap-2"></div></div>`,1),Wr=v('<div class="text-center py-8 text-[var(--muted)]">No data available</div>'),Fr=v('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Valve</span> <span> </span></div> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Device ID</span> <span class="font-mono text-xs"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">Online</span> <span> </span></div></div></div>'),Hr=v('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><!></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <!></div></div></div> <!>',1);function Gr(X,o){ce(o,!0);let j=ve(o,"device",7),h=ve(o,"compact",3,!1),s=G(()=>Ce(j().name)),T=R(!1),F=R(null),q=R(!1),z=R(!1),D=R(!1),w=R(""),E=R(null),C=G(()=>()=>{if(!j().last_status)return null;try{return JSON.parse(j().last_status)}catch{return null}}),nt=G(()=>{var n;return(n=t(C)())!=null&&n["5"]?t(C)()[5]/10:null}),I=G(()=>{var n;return(n=t(C)())!=null&&n["4"]?t(C)()[4]/10:null}),A=G(()=>t(F)??t(I)),$=G(()=>{var n;return((n=t(C)())==null?void 0:n["3"])||"unknown"});const[yt,B]=ze(n=>{ct(n)},500);async function ct(n){i(q,!0),i(z,!1);const p=t(I);try{await fetch(`/api/devices/${j().id}/control`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dps:4,value:Math.round(n*10)})}),Mt()}catch(y){console.error(y),i(z,!0),i(F,p,!0),setTimeout(()=>i(z,!1),3e3)}}async function Mt(){try{const n=await fetch(`/api/devices/${j().id}/status`);if(n.ok){const p=await n.json();j().last_status=JSON.stringify(p.status),i(F,null)}}catch(n){console.error(n)}i(q,!1)}function Bt(n){if(t(A)===null)return;const p=Math.max(5,Math.min(30,t(A)+n));i(F,p,!0),yt(p)}function Ot(n){i(F,n,!0),B(),ct(n)}function J(){t(A)!==null&&(i(w,t(A).toString(),!0),i(D,!0),La().then(()=>{var n;return(n=t(E))==null?void 0:n.select()}))}function U(){const n=parseFloat(t(w));if(!isNaN(n)&&n>=5&&n<=30){const p=Math.round(n*2)/2;Ot(p)}i(D,!1)}function k(){i(D,!1)}var K=Hr(),M=ot(K);M.__click=()=>i(T,!0),M.__keydown=n=>n.key==="Enter"&&i(T,!0);var S=a(M),c=a(S);let b;var Z=a(c);{var tt=n=>{var p=Rr();l(n,p)},xt=n=>{var p=Br();l(n,p)};_(Z,n=>{t($)==="opened"?n(tt):n(xt,!1)})}e(c);var Dt=r(c,2),kt=a(Dt),Xt=a(kt,!0);e(kt);var Ct=r(kt,2);{var m=n=>{var p=Or(),y=a(p);e(p),g(()=>u(y,`${t(nt)??""}¬∞C ${t($)==="opened"?"‚Üí":"¬∑"} ${t(A)??""}¬∞C`)),l(n,p)},P=n=>{var p=Dr();l(n,p)};_(Ct,n=>{t(nt)!==null?n(m):n(P,!1)})}e(Dt),e(S),e(M);var et=r(M,2);ke(et,{get open(){return t(T)},onclose:()=>i(T,!1),get title(){return t(s)},children:(n,p)=>{var y=Fr(),L=a(y),st=r(a(L),2),Vt=a(st,!0);e(st),e(L);var At=r(L,2);{var lt=vt=>{var St=Ir(),it=ot(St),gt=a(it),O=r(a(gt),2),V=a(O);e(O),e(gt);var N=r(gt,2),mt=r(a(N),2),Ht=a(mt);e(mt),e(N),e(it);var Zt=r(it,2),ie=r(a(Zt),2),Gt=a(ie);Gt.__click=()=>Bt(-.5);var $t=r(Gt,2),Pt=a($t);{var wt=Y=>{var W=Ar();we(W),W.__keydown=Q=>{Q.key==="Enter"&&U(),Q.key==="Escape"&&k()},Ba(W,Q=>i(E,Q),()=>t(E)),ra("blur",W,U),Aa(W,()=>t(w),Q=>i(w,Q)),l(Y,W)},Lt=Y=>{var W=Lr();W.__click=J;var Q=a(W);e(W),g(()=>u(Q,`${t(A)??""}¬∞C`)),l(Y,W)};_(Pt,Y=>{t(D)?Y(wt):Y(Lt,!1)})}var Nt=r(Pt,2);{var te=Y=>{var W=Vr();l(Y,W)};_(Nt,Y=>{t(q)&&Y(te)})}var Tt=r(Nt,2);{var zt=Y=>{var W=Nr();l(Y,W)};_(Tt,Y=>{t(z)&&Y(zt)})}e($t);var Rt=r($t,2);Rt.__click=()=>Bt(.5),e(ie),e(Zt);var Kt=r(Zt,2),Et=r(a(Kt),2);qt(Et,20,()=>[15,18,21,24],se,(Y,W)=>{var Q=Er();Q.__click=()=>Ot(W);var ee=a(Q);e(Q),g(()=>{f(Q,1,`py-2 text-sm rounded-lg transition-colors
                     ${t(A)===W?"bg-orange-500/20 text-orange-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),u(ee,`${W??""}¬∞`)}),l(Y,Q)}),e(Et),e(Kt),g(()=>{u(V,`${t(nt)??""}¬∞C`),u(Ht,`${t(A)??""}¬∞C`),Gt.disabled=t(A)!==null&&t(A)<=5,Rt.disabled=t(A)!==null&&t(A)>=30}),l(vt,St)},at=vt=>{var St=Wr();l(vt,St)};_(At,vt=>{t(nt)!==null&&t(A)!==null?vt(lt):vt(at,!1)})}var d=r(At,2),x=a(d),H=r(a(x),2),dt=a(H);e(H),e(x);var ut=r(x,2),ft=r(a(ut),2),jt=a(ft,!0);e(ft),e(ut),e(d),e(y),g(vt=>{f(st,1,`font-medium ${t($)==="opened"?"text-orange-400":"text-blue-400"}`),u(Vt,t($)==="opened"?"Heating":"Idle"),u(dt,`${vt??""}...`),f(ft,1,j().online?"text-green-400":"text-red-400"),u(jt,j().online?"Yes":"No")},[()=>j().id.slice(0,12)]),l(n,y)},$$slots:{default:!0}}),g(()=>{f(M,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${h()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b=f(c,1,`w-9 h-9 rounded-lg flex items-center justify-center shrink-0
             ${t($)==="opened"?"bg-orange-500/20 text-orange-400":"bg-blue-500/20 text-blue-400"}`,null,b,{"status-active":t($)==="opened"}),u(Xt,t(s))}),l(X,K),ue()}be(["click","keydown"]);var $r=v('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-purple-400 rounded-full animate-pulse"></span>'),Kr=v('<p class="text-xs text-[var(--muted)]"> </p>'),Yr=v('<p class="text-xs text-[var(--muted)]"> </p>'),qr=v('<span class="absolute top-2 right-2 w-2 h-2 bg-purple-400 rounded-full animate-pulse"></span>'),Jr=v("<button> </button>"),Ur=v("<button> </button>"),Qr=v('<div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Volume</span> <span class="font-medium text-white"> </span></div> <div class="flex gap-2 items-center"><input type="range" min="0" max="100" class="flex-1"/> <button> </button></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Input</p> <div class="grid grid-cols-2 gap-2"></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Sound Program</p> <div class="grid grid-cols-3 gap-2"></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Audio</p> <div class="grid grid-cols-2 gap-2"><button>Clear Voice</button> <button>Bass Ext.</button></div></div> <div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Subwoofer</span> <span class="font-medium text-white"> </span></div> <input type="range" min="-6" max="6" step="1" class="w-full"/></div>',1),Xr=v('<button> <!></button> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs"> </span></div></div>',1),Zr=v('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),tn=v('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <!></div></div></div> <!>',1);function en(X,o){ce(o,!0);let j=ve(o,"compact",3,!1),h=G(()=>Ce(o.device.name)),s=R(null),T=R(!1),F=R(!1),q=R(null),z=R(!1),D=R(null),w=R(null),E=G(()=>{var n;return t(q)??((n=t(s))==null?void 0:n.power)??"standby"}),C=G(()=>{var n;return t(D)??((n=t(s))==null?void 0:n.volume)??0}),nt=G(()=>{var n;return t(w)??((n=t(s))==null?void 0:n.subwoofer_volume)??0});Te(()=>{if(!t(T)&&o.device.last_status)try{i(s,JSON.parse(o.device.last_status),!0)}catch{}}),Te(()=>{t(T)||(i(T,!0),ea(o.device.id).then(n=>i(s,n.status,!0)).catch(()=>{}))});async function I(){const n=t(E)==="on"?"standby":"on";i(q,n,!0),i(z,!0);try{await de(o.device.id,{power:n==="on"}),A()}catch(p){console.error(p),i(q,null),i(z,!1)}}async function A(){try{const n=await ea(o.device.id);i(s,n.status,!0),i(q,null)}catch(n){console.error(n)}i(z,!1)}const[$]=ze(async n=>{try{await de(o.device.id,{volume:n}),t(s)&&i(s,{...t(s),volume:n},!0)}catch(p){console.error(p)}i(D,null)},300),[yt]=ze(async n=>{try{await de(o.device.id,{subwoofer_volume:n}),t(s)&&i(s,{...t(s),subwoofer_volume:n},!0)}catch(p){console.error(p)}i(w,null)},300);function B(n){i(D,n,!0),$(n)}function ct(n){i(w,n,!0),yt(n)}async function Mt(){var p;const n=!((p=t(s))!=null&&p.mute);t(s)&&i(s,{...t(s),mute:n},!0);try{await de(o.device.id,{mute:n})}catch(y){console.error(y),t(s)&&i(s,{...t(s),mute:!n},!0)}}async function Bt(n){var y;const p=(y=t(s))==null?void 0:y.input;t(s)&&i(s,{...t(s),input:n},!0);try{await de(o.device.id,{input:n})}catch(L){console.error(L),t(s)&&p&&i(s,{...t(s),input:p},!0)}}async function Ot(n){var y;const p=(y=t(s))==null?void 0:y.sound_program;t(s)&&i(s,{...t(s),sound_program:n},!0);try{await de(o.device.id,{sound_program:n})}catch(L){console.error(L),t(s)&&p&&i(s,{...t(s),sound_program:p},!0)}}async function J(){var p;const n=!((p=t(s))!=null&&p.clear_voice);t(s)&&i(s,{...t(s),clear_voice:n},!0);try{await de(o.device.id,{clear_voice:n})}catch(y){console.error(y),t(s)&&i(s,{...t(s),clear_voice:!n},!0)}}async function U(){var p;const n=!((p=t(s))!=null&&p.bass_extension);t(s)&&i(s,{...t(s),bass_extension:n},!0);try{await de(o.device.id,{bass_extension:n})}catch(y){console.error(y),t(s)&&i(s,{...t(s),bass_extension:!n},!0)}}const k=["tv","bluetooth"],K=[{id:"movie",label:"Movie"},{id:"music",label:"Music"},{id:"sports",label:"Sports"},{id:"game",label:"Game"},{id:"tv_program",label:"TV"},{id:"stereo",label:"Stereo"}];var M=tn(),S=ot(M);S.__click=()=>i(F,!0),S.__keydown=n=>n.key==="Enter"&&i(F,!0);var c=a(S),b=a(c);b.__click=n=>{n.stopPropagation(),I()};let Z;var tt=r(a(b),2);{var xt=n=>{var p=$r();l(n,p)};_(tt,n=>{t(z)&&n(xt)})}e(b);var Dt=r(b,2),kt=a(Dt),Xt=a(kt,!0);e(kt);var Ct=r(kt,2);{var m=n=>{var p=Kr(),y=a(p);e(p),g(()=>{var L,st;return u(y,`${(L=t(s))!=null&&L.mute?"Muted":`${t(C)}%`} ¬∑ ${((st=t(s))==null?void 0:st.input)??""}`)}),l(n,p)},P=n=>{var p=Yr(),y=a(p,!0);e(p),g(()=>u(y,t(s)?"Standby":"Offline")),l(n,p)};_(Ct,n=>{t(E)==="on"?n(m):n(P,!1)})}e(Dt),e(c),e(S);var et=r(S,2);ke(et,{get open(){return t(F)},onclose:()=>i(F,!1),get title(){return t(h)},children:(n,p)=>{var y=Zr(),L=a(y),st=r(a(L),2),Vt=a(st,!0);e(st),e(L);var At=r(L,2);{var lt=at=>{var d=Xr(),x=ot(d);x.__click=I;var H=a(x),dt=r(H);{var ut=O=>{var V=qr();l(O,V)};_(dt,O=>{t(z)&&O(ut)})}e(x);var ft=r(x,2);{var jt=O=>{var V=Qr(),N=ot(V),mt=a(N),Ht=r(a(mt),2),Zt=a(Ht,!0);e(Ht),e(mt);var ie=r(mt,2),Gt=a(ie);we(Gt),Gt.__input=It=>B(parseInt(It.currentTarget.value));var $t=r(Gt,2);$t.__click=Mt;var Pt=a($t,!0);e($t),e(ie),e(N);var wt=r(N,2),Lt=r(a(wt),2);qt(Lt,21,()=>k,se,(It,ht)=>{var bt=Jr();bt.__click=()=>Bt(t(ht));var Jt=a(bt,!0);e(bt),g(()=>{f(bt,1,`py-3 text-sm rounded-lg transition-colors uppercase
                       ${t(s).input===t(ht)?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),u(Jt,t(ht)==="bluetooth"?"BT":"TV")}),l(It,bt)}),e(Lt),e(wt);var Nt=r(wt,2),te=r(a(Nt),2);qt(te,21,()=>K,se,(It,ht)=>{var bt=Ur();bt.__click=()=>Ot(t(ht).id);var Jt=a(bt,!0);e(bt),g(()=>{f(bt,1,`py-2.5 text-sm rounded-lg transition-colors
                       ${t(s).sound_program===t(ht).id?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),u(Jt,t(ht).label)}),l(It,bt)}),e(te),e(Nt);var Tt=r(Nt,2),zt=r(a(Tt),2),Rt=a(zt);Rt.__click=J;var Kt=r(Rt,2);Kt.__click=U,e(zt),e(Tt);var Et=r(Tt,2),Y=a(Et),W=r(a(Y),2),Q=a(W);e(W),e(Y);var ee=r(Y,2);we(ee),ee.__input=It=>ct(parseInt(It.currentTarget.value)),e(Et),g(()=>{u(Zt,t(s).mute?"Muted":`${t(C)}%`),Se(Gt,t(C)),f($t,1,`w-10 h-10 rounded-lg transition-colors text-lg
                     ${t(s).mute?"bg-red-500/20 text-red-400":"bg-zinc-800/60 text-zinc-400"}
                     hover:bg-zinc-700/60`),u(Pt,t(s).mute?"üîá":"üîä"),f(Rt,1,`py-3 text-sm rounded-lg transition-colors
                     ${t(s).clear_voice?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),f(Kt,1,`py-3 text-sm rounded-lg transition-colors
                     ${t(s).bass_extension?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),u(Q,`${t(nt)>0?"+":""}${t(nt)??""}`),Se(ee,t(nt))}),l(O,V)};_(ft,O=>{t(E)==="on"&&O(jt)})}var vt=r(ft,2),St=a(vt),it=r(a(St),2),gt=a(it,!0);e(it),e(St),e(vt),g(()=>{f(x,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${t(E)==="on"?"bg-purple-500/20 text-purple-400":"bg-zinc-800 text-zinc-400"}
               hover:scale-[1.02]`),u(H,`${t(E)==="on"?"Turn Off":"Turn On"} `),u(gt,o.device.model||"Yamaha Soundbar")}),l(at,d)};_(At,at=>{t(s)&&at(lt)})}e(y),g(()=>{f(st,1,`font-medium ${t(E)==="on"?"text-purple-400":"text-zinc-500"}`),u(Vt,t(E)==="on"?"On":t(s)?"Standby":"Offline")}),l(n,y)},$$slots:{default:!0}}),g(()=>{f(S,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b.disabled=!t(s),Z=f(b,1,`w-9 h-9 rounded-lg flex items-center justify-center transition-all shrink-0 relative
             ${t(E)==="on"?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-500"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,Z,{"status-active":t(E)==="on"}),u(Xt,t(h))}),l(X,M),ue()}be(["click","keydown","input"]);var an=v('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></span>'),rn=v('<p class="text-xs text-[var(--muted)]"> </p>'),nn=v('<p class="text-xs text-[var(--muted)]"> </p>'),sn=v("<div> </div>"),on=v('<span class="absolute top-2 right-2 w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></span>'),ln=v("<button> </button>"),dn=v('<div class="bg-zinc-800/40 rounded-xl p-3 text-center"><span class="text-xs text-[var(--muted)]">Humidity</span> <p class="text-lg font-bold mt-1"> </p></div>'),vn=v('<div class="bg-zinc-800/40 rounded-xl p-3 text-center"><span class="text-xs text-[var(--muted)]">Temp</span> <p class="text-lg font-bold mt-1"> </p></div>'),cn=v('<div class="bg-zinc-800/40 rounded-xl p-3 text-center"><span class="text-xs text-[var(--muted)]">Filter</span> <p> </p></div>'),un=v('<div><span class="text-xs uppercase tracking-wide opacity-80">Air Quality Index</span> <p class="text-4xl font-bold mt-1"> </p> <p class="text-sm mt-1"> </p></div> <div><p class="text-sm text-[var(--muted)] mb-2">Mode</p> <div class="grid grid-cols-3 gap-2"></div></div> <div class="grid grid-cols-3 gap-3"><!> <!> <!></div>',1),mn=v('<button> <!></button> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs">Xiaomi Air Purifier</span></div></div>',1),pn=v('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),xn=v('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.414 1.415l.708-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate">Air Purifier</h4> <!></div> <!></div></div> <!>',1);function fn(X,o){ce(o,!0);let j=ve(o,"compact",3,!1),h=G(()=>rt.airPurifier),s=R(!1),T=R(null),F=R(null),q=R(!1),z=G(()=>{var c;return t(T)??((c=t(h))==null?void 0:c.power)??!1}),D=G(()=>{var c;return t(F)??((c=t(h))==null?void 0:c.mode)??"auto"});async function w(){const c=!t(z);i(T,c),i(q,!0);try{await aa({power:c}),rt.refreshAirPurifier()}catch(b){console.error(b),i(T,null)}i(q,!1),i(T,null)}async function E(c){const b=t(D);i(F,c,!0);try{await aa({mode:c}),rt.refreshAirPurifier()}catch(Z){console.error(Z),i(F,b,!0)}i(F,null)}function C(c){return c<=50?"text-green-400 bg-green-500/20":c<=100?"text-yellow-400 bg-yellow-500/20":c<=150?"text-orange-400 bg-orange-500/20":"text-red-400 bg-red-500/20"}function nt(c){return c<=50?"Good":c<=100?"Moderate":c<=150?"Unhealthy":"Very Unhealthy"}const I={auto:"Auto",silent:"Night",favorite:"Manual"};var A=xn(),$=ot(A);$.__click=()=>i(s,!0),$.__keydown=c=>c.key==="Enter"&&i(s,!0);var yt=a($),B=a(yt);B.__click=c=>{c.stopPropagation(),w()};let ct;var Mt=r(a(B),2);{var Bt=c=>{var b=an();l(c,b)};_(Mt,c=>{t(q)&&c(Bt)})}e(B);var Ot=r(B,2),J=r(a(Ot),2);{var U=c=>{var b=rn(),Z=a(b);e(b),g(()=>{var tt;return u(Z,`${(I[t(D)]||t(D))??""} ¬∑ ${((tt=t(h))==null?void 0:tt.aqi)??0??""} AQI`)}),l(c,b)},k=c=>{var b=nn(),Z=a(b,!0);e(b),g(()=>u(Z,t(h)?"Off":"Offline")),l(c,b)};_(J,c=>{t(z)?c(U):c(k,!1)})}e(Ot);var K=r(Ot,2);{var M=c=>{var b=sn(),Z=a(b,!0);e(b),g(tt=>{f(b,1,`px-2 py-1 rounded-md text-xs font-medium shrink-0 ${tt??""}`),u(Z,t(h).aqi)},[()=>C(t(h).aqi)]),l(c,b)};_(K,c=>{var b;j()&&((b=t(h))!=null&&b.power)&&c(M)})}e(yt),e($);var S=r($,2);ke(S,{get open(){return t(s)},onclose:()=>i(s,!1),title:"Air Purifier",children:(c,b)=>{var Z=pn(),tt=a(Z),xt=r(a(tt),2),Dt=a(xt,!0);e(xt),e(tt);var kt=r(tt,2);{var Xt=Ct=>{var m=mn(),P=ot(m);P.__click=w;var et=a(P),n=r(et);{var p=st=>{var Vt=on();l(st,Vt)};_(n,st=>{t(q)&&st(p)})}e(P);var y=r(P,2);{var L=st=>{var Vt=un(),At=ot(Vt),lt=r(a(At),2),at=a(lt,!0);e(lt);var d=r(lt,2),x=a(d,!0);e(d),e(At);var H=r(At,2),dt=r(a(H),2);qt(dt,20,()=>[{value:"auto",label:"Auto"},{value:"silent",label:"Night"},{value:"favorite",label:"Manual"}],se,(O,V)=>{var N=ln();N.__click=()=>E(V.value);var mt=a(N,!0);e(N),g(()=>{f(N,1,`py-3 text-sm rounded-lg transition-colors
                       ${t(D)===V.value?"bg-cyan-500/20 text-cyan-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),u(mt,V.label)}),l(O,N)}),e(dt),e(H);var ut=r(H,2),ft=a(ut);{var jt=O=>{var V=dn(),N=r(a(V),2),mt=a(N);e(N),e(V),g(()=>u(mt,`${t(h).humidity??""}%`)),l(O,V)};_(ft,O=>{t(h).humidity!==void 0&&O(jt)})}var vt=r(ft,2);{var St=O=>{var V=vn(),N=r(a(V),2),mt=a(N);e(N),e(V),g(()=>u(mt,`${t(h).temperature??""}¬∞C`)),l(O,V)};_(vt,O=>{t(h).temperature!==void 0&&O(St)})}var it=r(vt,2);{var gt=O=>{var V=cn(),N=r(a(V),2),mt=a(N);e(N),e(V),g(()=>{f(N,1,`text-lg font-bold mt-1 ${t(h).filter_life<20?"text-red-400":""}`),u(mt,`${t(h).filter_life??""}%`)}),l(O,V)};_(it,O=>{t(h).filter_life!==void 0&&O(gt)})}e(ut),g((O,V)=>{f(At,1,`rounded-xl p-4 text-center ${O??""}`),u(at,t(h).aqi),u(x,V)},[()=>C(t(h).aqi),()=>nt(t(h).aqi)]),l(st,Vt)};_(y,st=>{t(z)&&st(L)})}Le(2),g(()=>{f(P,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${t(z)?"bg-cyan-500/20 text-cyan-400":"bg-zinc-800 text-zinc-400"}
               hover:scale-[1.02]`),u(et,`${t(z)?"Turn Off":"Turn On"} `)}),l(Ct,m)};_(kt,Ct=>{t(h)&&Ct(Xt)})}e(Z),g(()=>{f(xt,1,`font-medium ${t(z)?"text-cyan-400":"text-zinc-500"}`),u(Dt,t(z)?"On":t(h)?"Off":"Offline")}),l(c,Z)},$$slots:{default:!0}}),g(()=>{f($,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),B.disabled=!t(h),ct=f(B,1,`w-9 h-9 rounded-lg flex items-center justify-center transition-all shrink-0 relative
             ${t(z)?"bg-cyan-500/20 text-cyan-400":"bg-zinc-800/60 text-zinc-500"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,ct,{"status-active":t(z)})}),l(X,A),ue()}be(["click","keydown"]);var _n=v('<div class="glass-card rounded-xl p-2.5"><div class="flex items-center gap-2.5"><div class="w-9 h-9 rounded-lg bg-zinc-800 animate-pulse"></div> <div class="flex-1 space-y-1.5"><div class="w-20 h-3.5 rounded bg-zinc-800 animate-pulse"></div> <div class="w-14 h-3 rounded bg-zinc-800 animate-pulse"></div></div></div></div>'),gn=v('<section><div class="w-20 h-5 rounded bg-zinc-800 animate-pulse mb-3"></div> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),bn=v('<div class="space-y-6"></div>'),hn=v('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-amber-400">üí°</span> Lights <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),yn=v('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-orange-400">üå°Ô∏è</span> Climate <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!> <!></div></section>'),wn=v('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-cyan-400">üì°</span> Sensors <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),zn=v('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-purple-400">üîä</span> Audio <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),kn=v('<!> <!> <!> <!> <section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-green-400">ü§ñ</span> Robot <span class="text-xs text-zinc-600">(1)</span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!></div></section>',1),Mn=v('<div class="pb-24 space-y-6"><!></div>');function Vn(X,o){ce(o,!0);let j=G(()=>rt.lamps.filter(w=>w.category==="lamp")),h=G(()=>rt.tuyaDevices.filter(w=>w.category==="wkf")),s=G(()=>rt.tuyaDevices.filter(w=>["sj","mcs","wsdcg"].includes(w.category))),T=G(()=>rt.lamps.length>0||rt.tuyaDevices.length>0||rt.yamahaDevices.length>0);var F=Mn();Ra("1uha8ag",w=>{ya(()=>{wa.title="Smart Home"})});var q=a(F);{var z=w=>{var E=bn();qt(E,20,()=>Array(3),se,(C,nt)=>{var I=gn(),A=r(a(I),2);qt(A,20,()=>Array(4),se,($,yt,B,ct)=>{var Mt=_n();l($,Mt)}),e(A),e(I),l(C,I)}),e(E),l(w,E)},D=w=>{var E=kn(),C=ot(E);{var nt=J=>{var U=hn(),k=a(U),K=r(a(k),2),M=a(K);e(K),e(k);var S=r(k,2);qt(S,21,()=>t(j),c=>c.id,(c,b)=>{Za(c,{get lamp(){return t(b)},compact:!0})}),e(S),e(U),g(()=>u(M,`(${t(j).length??""})`)),l(J,U)};_(C,J=>{t(j).length>0&&J(nt)})}var I=r(C,2);{var A=J=>{var U=yn(),k=a(U),K=r(a(k),2),M=a(K);e(K),e(k);var S=r(k,2),c=a(S);qt(c,17,()=>t(h),tt=>tt.id,(tt,xt)=>{Gr(tt,{get device(){return t(xt)},compact:!0})});var b=r(c,2);{var Z=tt=>{fn(tt,{compact:!0})};_(b,tt=>{rt.airPurifier&&tt(Z)})}e(S),e(U),g(()=>u(M,`(${t(h).length+(rt.airPurifier?1:0)})`)),l(J,U)};_(I,J=>{(t(h).length>0||rt.airPurifier)&&J(A)})}var $=r(I,2);{var yt=J=>{var U=wn(),k=a(U),K=r(a(k),2),M=a(K);e(K),e(k);var S=r(k,2);qt(S,21,()=>t(s),c=>c.id,(c,b)=>{Pr(c,{get device(){return t(b)},compact:!0})}),e(S),e(U),g(()=>u(M,`(${t(s).length??""})`)),l(J,U)};_($,J=>{t(s).length>0&&J(yt)})}var B=r($,2);{var ct=J=>{var U=zn(),k=a(U),K=r(a(k),2),M=a(K);e(K),e(k);var S=r(k,2);qt(S,21,()=>rt.yamahaDevices,c=>c.id,(c,b)=>{en(c,{get device(){return t(b)},compact:!0})}),e(S),e(U),g(()=>u(M,`(${rt.yamahaDevices.length??""})`)),l(J,U)};_(B,J=>{rt.yamahaDevices.length>0&&J(ct)})}var Mt=r(B,2),Bt=r(a(Mt),2),Ot=a(Bt);Mr(Ot,{get status(){return rt.roborock},compact:!0}),e(Bt),e(Mt),l(w,E)};_(q,w=>{rt.loading&&!t(T)?w(z):w(D,!1)})}e(F),l(X,F),ue()}export{Vn as component};
