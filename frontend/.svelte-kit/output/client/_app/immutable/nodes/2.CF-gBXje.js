import{d as Mt,c as Dt,e as $t,a as u,f,s as x,b as Lt}from"../chunks/BpQGbxjQ.js";import{x as Wt,W as Ct,aD as tt,a0 as St,X as a,Y as e,Z as r,$ as g,b5 as qt,a1 as It,b as t,_ as mt,s as w,a4 as Q,aN as At,c as Ft,a5 as Jt,a2 as Ut,a3 as Qt}from"../chunks/CeX5bisY.js";import{i as S}from"../chunks/J5d8E7TX.js";import{f as Ht,s as H,h as Nt,i as Xt,e as kt,j as Tt,k as Kt,l as Bt,m as Yt,g as Zt,a as te}from"../chunks/CFnnMLjb.js";import{h as ee}from"../chunks/Dbh3RtVr.js";import{s as h,r as Et,b as Gt}from"../chunks/D688N9uT.js";import{p as Ot}from"../chunks/DdI1FX7l.js";import{s as ae}from"../chunks/KroyEBrN.js";import{a as re}from"../chunks/CxA4e2Oe.js";function se(I,l,j,v){var n=I.__style;if(Wt||n!==l){var _=re(l,v);(!Wt||_!==I.getAttribute("style"))&&(_==null?I.removeAttribute("style"):I.style.cssText=_),I.__style=l}return v}const ie={"korytarz 1":"Hallway 1","korytarz 2":"Hallway 2",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",jadalnia:"Dining Room",gabinet:"Study",pralnia:"Laundry","Czujnik zalania kuchnia":"Water Sensor Kitchen","Czujnik zalania ≈Çazienka":"Water Sensor Bathroom","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Drzwi:"Door Sensor","Grzejnik salon":"Radiator Living Room","Grzejnik sypialnia":"Radiator Bedroom","Grzejnik kuchnia":"Radiator Kitchen","Grzejnik ≈Çazienka":"Radiator Bathroom","Grzejnik korytarz":"Radiator Hallway","Grzejnik pok√≥j dzieci":"Radiator Kids Room",Grzejnik:"Radiator"},ne={korytarz:"Hallway",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",pok√≥j:"Room",dzieci:"Kids","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Grzejnik:"Radiator",Drzwi:"Door",Lampa:"Light",du≈ºy:"Large",ma≈Çy:"Small",g≈Ç√≥wny:"Main",g√≥rny:"Upper",dolny:"Lower"};function Vt(I){if(!I)return I;const l=I.toLowerCase();for(const[n,_]of Object.entries(ie))if(l===n.toLowerCase())return _;let j=I;const v=Object.entries(ne).sort((n,_)=>_[0].length-n[0].length);for(const[n,_]of v){const V=new RegExp(n,"gi");j=j.replace(V,_)}return j}var le=f('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in svelte-alpl3u" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="glass-card rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl"><div class="flex items-center justify-between p-4 border-b border-[var(--glass-border)]"><h2 id="dialog-title" class="text-lg font-semibold"> </h2> <button aria-label="Close dialog" class="w-8 h-8 rounded-lg bg-zinc-800/60 text-zinc-400 hover:text-white hover:bg-zinc-700/60 transition-colors flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 overflow-y-auto max-h-[calc(80vh-64px)]"><!></div></div></div>');function Rt(I,l){Ct(l,!0);let j=Ot(l,"open",3,!1);function v(L){L.target===L.currentTarget&&l.onclose()}function n(L){L.key==="Escape"&&l.onclose()}var _=Dt();$t("keydown",qt,n);var V=tt(_);{var T=L=>{var C=le();C.__click=v,C.__keydown=n;var G=a(C),A=a(G),k=a(A),O=a(k,!0);e(k);var M=r(k,2);M.__click=function(...Y){var q;(q=l.onclose)==null||q.apply(this,Y)},e(A);var K=r(A,2),D=a(K);ae(D,()=>l.children),e(K),e(G),e(C),g(()=>x(O,l.title)),u(L,C)};S(V,L=>{j()&&L(T)})}u(I,_),St()}Mt(["click","keydown"]);var oe=f('<div class="w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"></div>'),de=Lt('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a.75.75 0 01.75.75v6.5a.75.75 0 01-1.5 0v-6.5A.75.75 0 0110 2z"></path><path d="M5.404 4.343a.75.75 0 10-1.06 1.06 6.5 6.5 0 109.192 0 .75.75 0 00-1.06-1.06 5 5 0 11-7.072 0z"></path></svg>'),ve=f('<p class="text-xs text-[var(--muted)]"> </p>'),ce=f('<p class="text-xs text-[var(--muted)]"> </p>'),ue=f('<div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Brightness</span> <span class="font-medium text-white"> </span></div> <input type="range" min="1" max="100" class="w-full"/></div> <div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Color Temperature</span> <span class="font-medium text-white"> </span></div> <input type="range" min="1700" max="6500" step="100" class="w-full"/> <div class="flex justify-between text-xs text-[var(--muted)] mt-1"><span>Warm</span> <span>Cool</span></div></div>',1),pe=f('<button> </button> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">IP Address</span> <span class="font-mono text-xs"> </span></div></div>',1),xe=f('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),fe=f('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <!></div></div></div> <!>',1);function me(I,l){Ct(l,!0);let j=Ot(l,"compact",3,!1),v=Q(()=>Vt(l.lamp.name)),n=Q(()=>H.lampStatuses.get(l.lamp.id)),_=mt(!1),V=mt(!1),T=mt(!1);It(()=>{t(V)||(w(V,!0),Ht(l.lamp.id).then(s=>H.updateLampStatus(l.lamp.id,s.status)).catch(()=>{}))});async function L(s){s.stopPropagation(),w(_,!0);try{await Nt(l.lamp.id,{toggle:!0});const d=await Ht(l.lamp.id);H.updateLampStatus(l.lamp.id,d.status)}catch(d){console.error(d)}w(_,!1)}async function C(s){try{await Nt(l.lamp.id,{brightness:s}),t(n)&&H.updateLampStatus(l.lamp.id,{...t(n),brightness:s})}catch(d){console.error(d)}}async function G(s){try{await Nt(l.lamp.id,{color_temp:s}),t(n)&&H.updateLampStatus(l.lamp.id,{...t(n),color_temp:s})}catch(d){console.error(d)}}var A=fe(),k=tt(A);k.__click=()=>w(T,!0),k.__keydown=s=>s.key==="Enter"&&w(T,!0);var O=a(k),M=a(O);M.__click=L;let K;var D=a(M);{var Y=s=>{var d=oe();u(s,d)},q=s=>{var d=de();u(s,d)};S(D,s=>{t(_)?s(Y):s(q,!1)})}e(M);var et=r(M,2),it=a(et),ot=a(it,!0);e(it);var b=r(it,2);{var m=s=>{var d=ve(),i=a(d);e(d),g(()=>x(i,`${t(n).brightness??""}% ¬∑ ${t(n).color_temp??""}K`)),u(s,d)},p=s=>{var d=ce(),i=a(d,!0);e(d),g(()=>x(i,t(n)?"Off":"Offline")),u(s,d)};S(b,s=>{var d;(d=t(n))!=null&&d.power?s(m):s(p,!1)})}e(et),e(O),e(k);var o=r(k,2);Rt(o,{get open(){return t(T)},onclose:()=>w(T,!1),get title(){return t(v)},children:(s,d)=>{var i=xe(),c=a(i),z=r(a(c),2),y=a(z,!0);e(z),e(c);var N=r(c,2);{var J=P=>{var W=pe(),$=tt(W);$.__click=L;var ct=a($,!0);e($);var X=r($,2);{var gt=vt=>{var at=ue(),rt=tt(at),ft=a(rt),_t=r(a(ft),2),yt=a(_t);e(_t),e(ft);var st=r(ft,2);Et(st),st.__input=bt=>C(parseInt(bt.currentTarget.value)),e(rt);var lt=r(rt,2),B=a(lt),R=r(a(B),2),E=a(R);e(R),e(B);var F=r(B,2);Et(F),F.__input=bt=>G(parseInt(bt.currentTarget.value)),At(2),e(lt),g(()=>{x(yt,`${t(n).brightness??""}%`),Gt(st,t(n).brightness),x(E,`${t(n).color_temp??""}K`),Gt(F,t(n).color_temp)}),u(vt,at)};S(X,vt=>{t(n).power&&vt(gt)})}var ut=r(X,2),dt=a(ut),Z=r(a(dt),2),pt=a(Z,!0);e(Z),e(dt);var U=r(dt,2),xt=r(a(U),2),nt=a(xt,!0);e(xt),e(U),e(ut),g(()=>{$.disabled=t(_),h($,1,`w-full py-4 rounded-xl text-lg font-medium transition-all
               ${t(n).power?"bg-amber-500/20 text-amber-400":"bg-zinc-800 text-zinc-400"}
               hover:scale-[1.02] disabled:opacity-50`),x(ct,t(n).power?"Turn Off":"Turn On"),x(pt,l.lamp.model),x(nt,l.lamp.ip)}),u(P,W)};S(N,P=>{t(n)&&P(J)})}e(i),g(()=>{var P,W;h(z,1,`font-medium ${(P=t(n))!=null&&P.power?"text-amber-400":"text-zinc-500"}`),x(y,(W=t(n))!=null&&W.power?"On":t(n)?"Off":"Offline")}),u(s,i)},$$slots:{default:!0}}),g(()=>{var s,d;h(k,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),M.disabled=t(_)||!t(n),K=h(M,1,`w-9 h-9 rounded-lg flex items-center justify-center transition-all shrink-0
             ${(s=t(n))!=null&&s.power?"bg-amber-500/20 text-amber-400":"bg-zinc-800/60 text-zinc-500"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,K,{"status-active":(d=t(n))==null?void 0:d.power}),x(ot,t(v))}),u(I,A),St()}Mt(["click","keydown","input"]);var ge=f("<p> </p>"),_e=f('<p class="text-xs text-[var(--muted)]">Offline</p>'),be=f('<div class="flex items-center gap-1 text-xs shrink-0"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 11.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zm4-3a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-4z"></path><path d="M8 4.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v8a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-8z"></path></svg> <span> </span></div>'),he=f(`<div class="grid grid-cols-2 gap-3"><div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Battery</span> <p> </p></div> <div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Fan Speed</span> <p class="text-3xl font-bold mt-1"> </p></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Controls</p> <div class="grid grid-cols-3 gap-2"><button class="py-4 rounded-xl bg-green-500/20 text-green-400 text-sm font-medium
                   hover:bg-green-500/30 disabled:opacity-50 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> Start</button> <button class="py-4 rounded-xl bg-yellow-500/20 text-yellow-400 text-sm font-medium
                   hover:bg-yellow-500/30 disabled:opacity-50 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Pause</button> <button class="py-4 rounded-xl bg-blue-500/20 text-blue-400 text-sm font-medium
                   hover:bg-blue-500/30 disabled:opacity-50 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg> Home</button></div></div> <div class="grid grid-cols-2 gap-2"><button class="py-3 rounded-xl bg-zinc-800/60 text-zinc-400 text-sm font-medium
                 hover:bg-zinc-700/60 disabled:opacity-50 transition-colors">Find Robot</button> <button class="py-3 rounded-xl bg-zinc-800/60 text-zinc-400 text-sm font-medium
                 hover:bg-zinc-700/60 disabled:opacity-50 transition-colors">Spot Clean</button></div> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs">Roborock S5 Max</span></div></div>`,1),ye=f('<div class="text-center py-8 text-[var(--muted)]">Start bridge to control robot</div>'),we=f('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),ze=f('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z" clip-rule="evenodd"></path></svg></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate">Roborock</h4> <!></div> <!></div></div> <!>',1);function ke(I,l){Ct(l,!0);let j=Ot(l,"compact",3,!1),v=mt(!1),n=mt(!1);const _={1:"Starting",2:"Charger disconnected",3:"Idle",4:"Remote control",5:"Cleaning",6:"Returning",7:"Manual mode",8:"Charging",9:"Charging problem",10:"Paused",11:"Spot cleaning",12:"Error",13:"Shutting down",14:"Updating",15:"Docking",16:"Going to target",17:"Zoned cleaning",18:"Segment cleaning",22:"Emptying dustbin",23:"Washing mop",26:"Going to wash mop"};function V(b){return _[b]||"Unknown"}async function T(b){w(v,!0);try{await Xt(b),await H.refreshRoborock()}catch(m){console.error(m)}w(v,!1)}function L(b){switch(b){case 5:case 11:case 17:case 18:return{color:"text-green-400",bg:"bg-green-500/20"};case 8:return{color:"text-blue-400",bg:"bg-blue-500/20"};case 3:return{color:"text-zinc-400",bg:"bg-zinc-800/60"};case 10:return{color:"text-yellow-400",bg:"bg-yellow-500/20"};case 6:case 15:case 16:case 26:return{color:"text-cyan-400",bg:"bg-cyan-500/20"};case 12:case 9:return{color:"text-red-400",bg:"bg-red-500/20"};default:return{color:"text-zinc-400",bg:"bg-zinc-800/60"}}}let C=Q(()=>l.status?L(l.status.state):{color:"text-zinc-500",bg:"bg-zinc-800/60"});var G=ze(),A=tt(G);A.__click=()=>w(n,!0),A.__keydown=b=>b.key==="Enter"&&w(n,!0);var k=a(A),O=a(k);let M;var K=r(O,2),D=r(a(K),2);{var Y=b=>{var m=ge(),p=a(m,!0);e(m),g(o=>{h(m,1,`text-xs ${t(C).color??""}`),x(p,o)},[()=>V(l.status.state)]),u(b,m)},q=b=>{var m=_e();u(b,m)};S(D,b=>{l.status?b(Y):b(q,!1)})}e(K);var et=r(K,2);{var it=b=>{var m=be(),p=a(m),o=r(p,2),s=a(o);e(o),e(m),g(()=>{h(p,0,`w-3.5 h-3.5 ${l.status.battery>20?"text-green-400":"text-red-400"}`),h(o,1,l.status.battery>20?"text-zinc-400":"text-red-400"),x(s,`${l.status.battery??""}%`)}),u(b,m)};S(et,b=>{j()&&l.status&&b(it)})}e(k),e(A);var ot=r(A,2);Rt(ot,{get open(){return t(n)},onclose:()=>w(n,!1),title:"Roborock",children:(b,m)=>{var p=we(),o=a(p),s=r(a(o),2),d=a(s,!0);e(s),e(o);var i=r(o,2);{var c=y=>{var N=he(),J=tt(N),P=a(J),W=r(a(P),2),$=a(W);e(W),e(P);var ct=r(P,2),X=r(a(ct),2),gt=a(X);e(X),e(ct),e(J);var ut=r(J,2),dt=r(a(ut),2),Z=a(dt);Z.__click=()=>T("start");var pt=r(Z,2);pt.__click=()=>T("pause");var U=r(pt,2);U.__click=()=>T("home"),e(dt),e(ut);var xt=r(ut,2),nt=a(xt);nt.__click=()=>T("find");var vt=r(nt,2);vt.__click=()=>T("spot"),e(xt),At(2),g(()=>{h(W,1,`text-3xl font-bold mt-1 ${l.status.battery>20?"":"text-red-400"}`),x($,`${l.status.battery??""}%`),x(gt,`${l.status.fanPower??""}%`),Z.disabled=t(v),pt.disabled=t(v),U.disabled=t(v),nt.disabled=t(v),vt.disabled=t(v)}),u(y,N)},z=y=>{var N=ye();u(y,N)};S(i,y=>{l.status?y(c):y(z,!1)})}e(p),g(y=>{h(s,1,`font-medium ${t(C).color??""}`),x(d,y)},[()=>l.status?V(l.status.state):"Offline"]),u(b,p)},$$slots:{default:!0}}),g(()=>{var b,m,p,o;h(A,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),M=h(O,1,`w-9 h-9 rounded-lg flex items-center justify-center shrink-0 ${t(C).bg??""} ${t(C).color??""}`,null,M,{"status-active":((b=l.status)==null?void 0:b.state)===5||((m=l.status)==null?void 0:m.state)===11||((p=l.status)==null?void 0:p.state)===17||((o=l.status)==null?void 0:o.state)===18})}),u(I,G),St()}Mt(["click","keydown"]);var je=f('<div class="grid grid-cols-2 gap-3"><div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Temperature</span> <p class="text-2xl font-bold mt-1 text-cyan-400"> </p></div> <div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Humidity</span> <p class="text-2xl font-bold mt-1 text-blue-400"> </p></div></div>'),Ce=f('<div class="bg-zinc-800/40 rounded-xl p-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Battery</span> <span> </span></div> <div class="mt-2 h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div>'),Se=f('<div class="space-y-4"><div><span class="text-4xl"> </span> <p> </p> <p class="text-sm text-[var(--muted)] mt-1"> </p></div> <!> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Type</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">Online</span> <span> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">Device ID</span> <span class="font-mono text-xs"> </span></div></div></div>'),Oe=f('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div> </div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <p> </p></div> <div></div></div></div> <!>',1);function Me(I,l){Ct(l,!0);let j=Ot(l,"compact",3,!1),v=Q(()=>Vt(l.device.name)),n=mt(!1),_=Q(()=>()=>{if(!l.device.last_status)return null;try{return JSON.parse(l.device.last_status)}catch{return null}});const V={sj:{label:"Water",icon:"üíß"},mcs:{label:"Door",icon:"üö™"},wsdcg:{label:"Climate",icon:"üå°Ô∏è"},wfcon:{label:"Gateway",icon:"üì°"},cz:{label:"Remote",icon:"üì∫"}};function T(p,o){if(!p)return o==="sj"?{text:"Monitoring",alert:!1,color:"text-green-400"}:{text:"No data",alert:!1,color:"text-zinc-500"};switch(o){case"sj":{const s=p[1],d=s==="alarm"||s==="1"||s===1,i=p[4];return d?{text:"Water detected!",alert:!0,color:"text-red-400"}:{text:`Dry${i?` ¬∑ ${i}%`:""}`,alert:!1,color:"text-green-400"}}case"mcs":{const s=p[101]===!0||p[1]===!0,d=p[103]||p[4];return{text:s?"Open":`Closed${d?` ¬∑ ${d}%`:""}`,alert:s,color:s?"text-amber-400":"text-green-400"}}case"wsdcg":{const s=p[103],d=p[102];return s!==void 0&&d!==void 0?{text:`${(s/100).toFixed(1)}¬∞C ¬∑ ${d}%`,alert:!1,color:"text-cyan-400"}:{text:"N/A",alert:!1,color:"text-zinc-500"}}default:return{text:l.device.online?"Online":"Offline",alert:!1,color:l.device.online?"text-green-400":"text-zinc-500"}}}let L=Q(()=>V[l.device.category]||{label:l.device.category,icon:"üì±"}),C=Q(()=>T(t(_)(),l.device.category));var G=Oe(),A=tt(G);A.__click=()=>w(n,!0),A.__keydown=p=>p.key==="Enter"&&w(n,!0);var k=a(A),O=a(k);let M;var K=a(O,!0);e(O);var D=r(O,2),Y=a(D),q=a(Y,!0);e(Y);var et=r(Y,2),it=a(et,!0);e(et),e(D);var ot=r(D,2);let b;e(k),e(A);var m=r(A,2);Rt(m,{get open(){return t(n)},onclose:()=>w(n,!1),get title(){return t(v)},children:(p,o)=>{var s=Se(),d=a(s),i=a(d),c=a(i,!0);e(i);var z=r(i,2),y=a(z,!0);e(z);var N=r(z,2),J=a(N);e(N),e(d);var P=r(d,2);{var W=at=>{const rt=Q(()=>t(_)());var ft=Dt(),_t=tt(ft);{var yt=st=>{var lt=je(),B=a(lt),R=r(a(B),2),E=a(R);e(R),e(B);var F=r(B,2),bt=r(a(F),2),wt=a(bt);e(bt),e(F),e(lt),g(zt=>{x(E,`${zt??""}¬∞C`),x(wt,`${t(rt)[102]??""}%`)},[()=>(t(rt)[103]/100).toFixed(1)]),u(st,lt)};S(_t,st=>{t(rt)&&st(yt)})}u(at,ft)};S(P,at=>{l.device.category==="wsdcg"&&at(W)})}var $=r(P,2);{var ct=at=>{const rt=Q(()=>t(_)());var ft=Dt(),_t=tt(ft);{var yt=st=>{const lt=Q(()=>t(rt)[4]||t(rt)[103]);var B=Dt(),R=tt(B);{var E=F=>{var bt=Ce(),wt=a(bt),zt=r(a(wt),2),jt=a(zt);e(zt),e(wt);var ht=r(wt,2),Pt=a(ht);e(ht),e(bt),g(()=>{h(zt,1,`font-bold ${t(lt)>20?"text-green-400":"text-red-400"}`),x(jt,`${t(lt)??""}%`),h(Pt,1,`h-full rounded-full transition-all ${t(lt)>20?"bg-green-500":"bg-red-500"}`),se(Pt,`width: ${t(lt)??""}%`)}),u(F,bt)};S(R,F=>{t(lt)!==void 0&&F(E)})}u(st,B)};S(_t,st=>{t(rt)&&st(yt)})}u(at,ft)};S($,at=>{(l.device.category==="sj"||l.device.category==="mcs")&&at(ct)})}var X=r($,2),gt=a(X),ut=r(a(gt),2),dt=a(ut,!0);e(ut),e(gt);var Z=r(gt,2),pt=r(a(Z),2),U=a(pt,!0);e(pt),e(Z);var xt=r(Z,2),nt=r(a(xt),2),vt=a(nt);e(nt),e(xt),e(X),e(s),g(at=>{h(d,1,`rounded-xl p-6 text-center ${t(C).alert?"bg-red-500/20":"bg-zinc-800/40"}`),x(c,t(L).icon),h(z,1,`text-2xl font-bold mt-2 ${t(C).color??""}`),x(y,t(C).text),x(J,`${t(L).label??""} Sensor`),x(dt,t(L).label),h(pt,1,l.device.online?"text-green-400":"text-red-400"),x(U,l.device.online?"Yes":"No"),x(vt,`${at??""}...`)},[()=>l.device.id.slice(0,12)]),u(p,s)},$$slots:{default:!0}}),g(()=>{h(A,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),M=h(O,1,`w-9 h-9 rounded-lg flex items-center justify-center text-base shrink-0
             ${t(C).alert?"bg-red-500/20":"bg-zinc-800/60"}`,null,M,{"status-active":t(C).alert}),x(K,t(L).icon),x(q,t(v)),h(et,1,`text-xs ${t(C).color??""}`),x(it,t(C).text),b=h(ot,1,`w-2 h-2 rounded-full shrink-0
             ${l.device.online?"bg-green-500":"bg-zinc-600"}`,null,b,{"status-dot":l.device.online})}),u(I,G),St()}Mt(["click","keydown"]);var Ae=Lt('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd"></path></svg>'),Pe=Lt('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M5.05 3.636a1 1 0 010 1.414 7 7 0 000 9.9 1 1 0 11-1.414 1.414 9 9 0 010-12.728 1 1 0 011.414 0zm9.9 0a1 1 0 011.414 0 9 9 0 010 12.728 1 1 0 11-1.414-1.414 7 7 0 000-9.9 1 1 0 010-1.414zM7.879 6.464a1 1 0 010 1.414 3 3 0 000 4.243 1 1 0 11-1.415 1.414 5 5 0 010-7.07 1 1 0 011.415 0zm4.242 0a1 1 0 011.415 0 5 5 0 010 7.072 1 1 0 01-1.415-1.415 3 3 0 000-4.242 1 1 0 010-1.415zM10 9a1 1 0 011 1v.01a1 1 0 11-2 0V10a1 1 0 011-1z"></path></svg>'),Re=f('<p class="text-xs text-[var(--muted)]"> </p>'),Te=f('<p class="text-xs text-[var(--muted)]">No data</p>'),Le=f("<button> </button>"),Be=f(`<div class="grid grid-cols-2 gap-3"><div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)] uppercase tracking-wide">Current</span> <p class="text-3xl font-bold mt-1"> </p></div> <div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)] uppercase tracking-wide">Target</span> <p class="text-3xl font-bold mt-1 text-orange-400"> </p></div></div> <div><p class="text-sm text-[var(--muted)] mb-3">Set Temperature</p> <div class="flex items-center justify-center gap-4"><button class="w-14 h-14 rounded-full bg-blue-500/20 text-blue-400 text-2xl font-medium
                   hover:bg-blue-500/30 disabled:opacity-50 transition-all">‚àí</button> <span class="text-3xl font-bold w-24 text-center"> </span> <button class="w-14 h-14 rounded-full bg-orange-500/20 text-orange-400 text-2xl font-medium
                   hover:bg-orange-500/30 disabled:opacity-50 transition-all">+</button></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Quick Set</p> <div class="grid grid-cols-4 gap-2"></div></div>`,1),De=f('<div class="text-center py-8 text-[var(--muted)]">No data available</div>'),Ne=f('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Valve</span> <span> </span></div> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Device ID</span> <span class="font-mono text-xs"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">Online</span> <span> </span></div></div></div>'),Ie=f('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><!></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <!></div></div></div> <!>',1);function Ve(I,l){Ct(l,!0);let j=Ot(l,"device",7),v=Ot(l,"compact",3,!1),n=Q(()=>Vt(j().name)),_=mt(!1),V=mt(!1),T=Q(()=>()=>{if(!j().last_status)return null;try{return JSON.parse(j().last_status)}catch{return null}}),L=Q(()=>{var i;return(i=t(T)())!=null&&i["5"]?t(T)()[5]/10:null}),C=Q(()=>{var i;return(i=t(T)())!=null&&i["4"]?t(T)()[4]/10:null}),G=Q(()=>{var i;return((i=t(T)())==null?void 0:i["3"])||"unknown"});async function A(i){w(_,!0);try{await fetch(`http://localhost:3001/api/devices/${j().id}/control`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dps:4,value:Math.round(i*10)})});const c=await fetch(`http://localhost:3001/api/devices/${j().id}/status`);if(c.ok){const z=await c.json();j().last_status=JSON.stringify(z.status)}}catch(c){console.error(c)}w(_,!1)}function k(i){if(t(C)!==null){const c=Math.max(5,Math.min(30,t(C)+i));A(c)}}var O=Ie(),M=tt(O);M.__click=()=>w(V,!0),M.__keydown=i=>i.key==="Enter"&&w(V,!0);var K=a(M),D=a(K);let Y;var q=a(D);{var et=i=>{var c=Ae();u(i,c)},it=i=>{var c=Pe();u(i,c)};S(q,i=>{t(G)==="opened"?i(et):i(it,!1)})}e(D);var ot=r(D,2),b=a(ot),m=a(b,!0);e(b);var p=r(b,2);{var o=i=>{var c=Re(),z=a(c);e(c),g(()=>x(z,`${t(L)??""}¬∞C ${t(G)==="opened"?"‚Üí":"¬∑"} ${t(C)??""}¬∞C`)),u(i,c)},s=i=>{var c=Te();u(i,c)};S(p,i=>{t(L)!==null?i(o):i(s,!1)})}e(ot),e(K),e(M);var d=r(M,2);Rt(d,{get open(){return t(V)},onclose:()=>w(V,!1),get title(){return t(n)},children:(i,c)=>{var z=Ne(),y=a(z),N=r(a(y),2),J=a(N,!0);e(N),e(y);var P=r(y,2);{var W=U=>{var xt=Be(),nt=tt(xt),vt=a(nt),at=r(a(vt),2),rt=a(at);e(at),e(vt);var ft=r(vt,2),_t=r(a(ft),2),yt=a(_t);e(_t),e(ft),e(nt);var st=r(nt,2),lt=r(a(st),2),B=a(lt);B.__click=()=>k(-.5);var R=r(B,2),E=a(R);e(R);var F=r(R,2);F.__click=()=>k(.5),e(lt),e(st);var bt=r(st,2),wt=r(a(bt),2);kt(wt,20,()=>[15,18,21,24],Tt,(zt,jt)=>{var ht=Le();ht.__click=()=>A(jt);var Pt=a(ht);e(ht),g(()=>{ht.disabled=t(_),h(ht,1,`py-2 text-sm rounded-lg transition-colors
                     ${t(C)===jt?"bg-orange-500/20 text-orange-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),x(Pt,`${jt??""}¬∞`)}),u(zt,ht)}),e(wt),e(bt),g(()=>{x(rt,`${t(L)??""}¬∞C`),x(yt,`${t(C)??""}¬∞C`),B.disabled=t(_)||t(C)<=5,x(E,`${t(C)??""}¬∞C`),F.disabled=t(_)||t(C)>=30}),u(U,xt)},$=U=>{var xt=De();u(U,xt)};S(P,U=>{t(L)!==null&&t(C)!==null?U(W):U($,!1)})}var ct=r(P,2),X=a(ct),gt=r(a(X),2),ut=a(gt);e(gt),e(X);var dt=r(X,2),Z=r(a(dt),2),pt=a(Z,!0);e(Z),e(dt),e(ct),e(z),g(U=>{h(N,1,`font-medium ${t(G)==="opened"?"text-orange-400":"text-blue-400"}`),x(J,t(G)==="opened"?"Heating":"Idle"),x(ut,`${U??""}...`),h(Z,1,j().online?"text-green-400":"text-red-400"),x(pt,j().online?"Yes":"No")},[()=>j().id.slice(0,12)]),u(i,z)},$$slots:{default:!0}}),g(()=>{h(M,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${v()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),Y=h(D,1,`w-9 h-9 rounded-lg flex items-center justify-center shrink-0
             ${t(G)==="opened"?"bg-orange-500/20 text-orange-400":"bg-blue-500/20 text-blue-400"}`,null,Y,{"status-active":t(G)==="opened"}),x(m,t(n))}),u(I,O),St()}Mt(["click","keydown"]);var Ee=f('<div class="w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"></div>'),Ge=Lt('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path></svg>'),We=f('<p class="text-xs text-[var(--muted)]"> </p>'),He=f('<p class="text-xs text-[var(--muted)]"> </p>'),Ke=f("<button> </button>"),Ye=f('<div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Volume</span> <span class="font-medium text-white"> </span></div> <div class="flex gap-2 items-center"><input type="range" min="0" max="100" class="flex-1"/> <button> </button></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Input</p> <div class="grid grid-cols-2 gap-2"></div></div>',1),$e=f('<button> </button> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">IP Address</span> <span class="font-mono text-xs"> </span></div></div>',1),qe=f('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),Fe=f('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <!></div></div></div> <!>',1);function Je(I,l){Ct(l,!0);let j=Ot(l,"compact",3,!1),v=Q(()=>Vt(l.device.name)),n=mt(null),_=mt(!1),V=mt(!1),T=mt(!1);It(()=>{if(!t(V)&&l.device.last_status)try{w(n,JSON.parse(l.device.last_status),!0)}catch{}}),It(()=>{t(V)||(w(V,!0),Kt(l.device.id).then(i=>w(n,i.status,!0)).catch(()=>{}))});async function L(){var i;w(_,!0);try{await Bt(l.device.id,{power:((i=t(n))==null?void 0:i.power)!=="on"});const c=await Kt(l.device.id);w(n,c.status,!0)}catch(c){console.error(c)}w(_,!1)}async function C(i){try{await Bt(l.device.id,{volume:i}),t(n)&&w(n,{...t(n),volume:i},!0)}catch(c){console.error(c)}}async function G(){var i;try{await Bt(l.device.id,{mute:!((i=t(n))!=null&&i.mute)}),t(n)&&w(n,{...t(n),mute:!t(n).mute},!0)}catch(c){console.error(c)}}async function A(i){try{await Bt(l.device.id,{input:i}),t(n)&&w(n,{...t(n),input:i},!0)}catch(c){console.error(c)}}const k=["tv","bluetooth"];var O=Fe(),M=tt(O);M.__click=()=>w(T,!0),M.__keydown=i=>i.key==="Enter"&&w(T,!0);var K=a(M),D=a(K);D.__click=i=>{i.stopPropagation(),L()};let Y;var q=a(D);{var et=i=>{var c=Ee();u(i,c)},it=i=>{var c=Ge();u(i,c)};S(q,i=>{t(_)?i(et):i(it,!1)})}e(D);var ot=r(D,2),b=a(ot),m=a(b,!0);e(b);var p=r(b,2);{var o=i=>{var c=We(),z=a(c);e(c),g(()=>x(z,`${t(n).mute?"Muted":`${t(n).volume}%`} ¬∑ ${t(n).input??""}`)),u(i,c)},s=i=>{var c=He(),z=a(c,!0);e(c),g(()=>x(z,t(n)?"Standby":"Offline")),u(i,c)};S(p,i=>{var c;((c=t(n))==null?void 0:c.power)==="on"?i(o):i(s,!1)})}e(ot),e(K),e(M);var d=r(M,2);Rt(d,{get open(){return t(T)},onclose:()=>w(T,!1),get title(){return t(v)},children:(i,c)=>{var z=qe(),y=a(z),N=r(a(y),2),J=a(N,!0);e(N),e(y);var P=r(y,2);{var W=$=>{var ct=$e(),X=tt(ct);X.__click=L;var gt=a(X,!0);e(X);var ut=r(X,2);{var dt=rt=>{var ft=Ye(),_t=tt(ft),yt=a(_t),st=r(a(yt),2),lt=a(st,!0);e(st),e(yt);var B=r(yt,2),R=a(B);Et(R),R.__input=zt=>C(parseInt(zt.currentTarget.value));var E=r(R,2);E.__click=G;var F=a(E,!0);e(E),e(B),e(_t);var bt=r(_t,2),wt=r(a(bt),2);kt(wt,21,()=>k,Tt,(zt,jt)=>{var ht=Ke();ht.__click=()=>A(t(jt));var Pt=a(ht,!0);e(ht),g(()=>{h(ht,1,`py-3 text-sm rounded-lg transition-colors uppercase
                       ${t(n).input===t(jt)?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),x(Pt,t(jt)==="bluetooth"?"Bluetooth":"TV")}),u(zt,ht)}),e(wt),e(bt),g(()=>{x(lt,t(n).mute?"Muted":`${t(n).volume}%`),Gt(R,t(n).volume),h(E,1,`w-10 h-10 rounded-lg transition-colors text-lg
                     ${t(n).mute?"bg-red-500/20 text-red-400":"bg-zinc-800/60 text-zinc-400"}
                     hover:bg-zinc-700/60`),x(F,t(n).mute?"üîá":"üîä")}),u(rt,ft)};S(ut,rt=>{t(n).power==="on"&&rt(dt)})}var Z=r(ut,2),pt=a(Z),U=r(a(pt),2),xt=a(U,!0);e(U),e(pt);var nt=r(pt,2),vt=r(a(nt),2),at=a(vt,!0);e(vt),e(nt),e(Z),g(()=>{X.disabled=t(_),h(X,1,`w-full py-4 rounded-xl text-lg font-medium transition-all
               ${t(n).power==="on"?"bg-purple-500/20 text-purple-400":"bg-zinc-800 text-zinc-400"}
               hover:scale-[1.02] disabled:opacity-50`),x(gt,t(n).power==="on"?"Turn Off":"Turn On"),x(xt,l.device.model||"Yamaha Soundbar"),x(at,l.device.host)}),u($,ct)};S(P,$=>{t(n)&&$(W)})}e(z),g(()=>{var $,ct;h(N,1,`font-medium ${(($=t(n))==null?void 0:$.power)==="on"?"text-purple-400":"text-zinc-500"}`),x(J,((ct=t(n))==null?void 0:ct.power)==="on"?"On":t(n)?"Standby":"Offline")}),u(i,z)},$$slots:{default:!0}}),g(()=>{var i,c;h(M,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),D.disabled=t(_)||!t(n),Y=h(D,1,`w-9 h-9 rounded-lg flex items-center justify-center transition-all shrink-0
             ${((i=t(n))==null?void 0:i.power)==="on"?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-500"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,Y,{"status-active":((c=t(n))==null?void 0:c.power)==="on"}),x(m,t(v))}),u(I,O),St()}Mt(["click","keydown","input"]);var Ue=f('<div class="w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"></div>'),Qe=Lt('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.414 1.415l.708-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z" clip-rule="evenodd"></path></svg>'),Xe=f('<p class="text-xs text-[var(--muted)]"> </p>'),Ze=f('<p class="text-xs text-[var(--muted)]"> </p>'),ta=f("<div> </div>"),ea=f("<button> </button>"),aa=f('<div class="bg-zinc-800/40 rounded-xl p-3 text-center"><span class="text-xs text-[var(--muted)]">Humidity</span> <p class="text-lg font-bold mt-1"> </p></div>'),ra=f('<div class="bg-zinc-800/40 rounded-xl p-3 text-center"><span class="text-xs text-[var(--muted)]">Temp</span> <p class="text-lg font-bold mt-1"> </p></div>'),sa=f('<div class="bg-zinc-800/40 rounded-xl p-3 text-center"><span class="text-xs text-[var(--muted)]">Filter</span> <p> </p></div>'),ia=f('<div><span class="text-xs uppercase tracking-wide opacity-80">Air Quality Index</span> <p class="text-4xl font-bold mt-1"> </p> <p class="text-sm mt-1"> </p></div> <div><p class="text-sm text-[var(--muted)] mb-2">Mode</p> <div class="grid grid-cols-3 gap-2"></div></div> <div class="grid grid-cols-3 gap-3"><!> <!> <!></div>',1),na=f('<button> </button> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs">Xiaomi Air Purifier</span></div></div>',1),la=f('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),oa=f('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate">Air Purifier</h4> <!></div> <!></div></div> <!>',1);function da(I,l){Ct(l,!0);let j=Ot(l,"compact",3,!1),v=Q(()=>H.airPurifier),n=mt(!1),_=mt(!1);async function V(){var o;w(n,!0);try{await Yt({power:!((o=t(v))!=null&&o.power)}),await H.refreshAirPurifier()}catch(s){console.error(s)}w(n,!1)}async function T(o){try{await Yt({mode:o}),await H.refreshAirPurifier()}catch(s){console.error(s)}}function L(o){return o<=50?"text-green-400 bg-green-500/20":o<=100?"text-yellow-400 bg-yellow-500/20":o<=150?"text-orange-400 bg-orange-500/20":"text-red-400 bg-red-500/20"}function C(o){return o<=50?"Good":o<=100?"Moderate":o<=150?"Unhealthy":"Very Unhealthy"}var G=oa(),A=tt(G);A.__click=()=>w(_,!0),A.__keydown=o=>o.key==="Enter"&&w(_,!0);var k=a(A),O=a(k);O.__click=o=>{o.stopPropagation(),V()};let M;var K=a(O);{var D=o=>{var s=Ue();u(o,s)},Y=o=>{var s=Qe();u(o,s)};S(K,o=>{t(n)?o(D):o(Y,!1)})}e(O);var q=r(O,2),et=r(a(q),2);{var it=o=>{var s=Xe(),d=a(s);e(s),g(()=>x(d,`${t(v).mode??""} ¬∑ ${t(v).aqi??""} AQI`)),u(o,s)},ot=o=>{var s=Ze(),d=a(s,!0);e(s),g(()=>x(d,t(v)?"Off":"Offline")),u(o,s)};S(et,o=>{var s;(s=t(v))!=null&&s.power?o(it):o(ot,!1)})}e(q);var b=r(q,2);{var m=o=>{var s=ta(),d=a(s,!0);e(s),g(i=>{h(s,1,`px-2 py-1 rounded-md text-xs font-medium shrink-0 ${i??""}`),x(d,t(v).aqi)},[()=>L(t(v).aqi)]),u(o,s)};S(b,o=>{var s;j()&&((s=t(v))!=null&&s.power)&&o(m)})}e(k),e(A);var p=r(A,2);Rt(p,{get open(){return t(_)},onclose:()=>w(_,!1),title:"Air Purifier",children:(o,s)=>{var d=la(),i=a(d),c=r(a(i),2),z=a(c,!0);e(c),e(i);var y=r(i,2);{var N=J=>{var P=na(),W=tt(P);W.__click=V;var $=a(W,!0);e(W);var ct=r(W,2);{var X=gt=>{var ut=ia(),dt=tt(ut),Z=r(a(dt),2),pt=a(Z,!0);e(Z);var U=r(Z,2),xt=a(U,!0);e(U),e(dt);var nt=r(dt,2),vt=r(a(nt),2);kt(vt,20,()=>["auto","silent","favorite"],Tt,(B,R)=>{var E=ea();E.__click=()=>T(R);var F=a(E,!0);e(E),g(()=>{h(E,1,`py-3 text-sm rounded-lg transition-colors capitalize
                       ${t(v).mode===R?"bg-cyan-500/20 text-cyan-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),x(F,R)}),u(B,E)}),e(vt),e(nt);var at=r(nt,2),rt=a(at);{var ft=B=>{var R=aa(),E=r(a(R),2),F=a(E);e(E),e(R),g(()=>x(F,`${t(v).humidity??""}%`)),u(B,R)};S(rt,B=>{t(v).humidity!==void 0&&B(ft)})}var _t=r(rt,2);{var yt=B=>{var R=ra(),E=r(a(R),2),F=a(E);e(E),e(R),g(()=>x(F,`${t(v).temperature??""}¬∞C`)),u(B,R)};S(_t,B=>{t(v).temperature!==void 0&&B(yt)})}var st=r(_t,2);{var lt=B=>{var R=sa(),E=r(a(R),2),F=a(E);e(E),e(R),g(()=>{h(E,1,`text-lg font-bold mt-1 ${t(v).filter_life<20?"text-red-400":""}`),x(F,`${t(v).filter_life??""}%`)}),u(B,R)};S(st,B=>{t(v).filter_life!==void 0&&B(lt)})}e(at),g((B,R)=>{h(dt,1,`rounded-xl p-4 text-center ${B??""}`),x(pt,t(v).aqi),x(xt,R)},[()=>L(t(v).aqi),()=>C(t(v).aqi)]),u(gt,ut)};S(ct,gt=>{t(v).power&&gt(X)})}At(2),g(()=>{W.disabled=t(n),h(W,1,`w-full py-4 rounded-xl text-lg font-medium transition-all
               ${t(v).power?"bg-cyan-500/20 text-cyan-400":"bg-zinc-800 text-zinc-400"}
               hover:scale-[1.02] disabled:opacity-50`),x($,t(v).power?"Turn Off":"Turn On")}),u(J,P)};S(y,J=>{t(v)&&J(N)})}e(d),g(()=>{var J,P;h(c,1,`font-medium ${(J=t(v))!=null&&J.power?"text-cyan-400":"text-zinc-500"}`),x(z,(P=t(v))!=null&&P.power?"On":t(v)?"Off":"Offline")}),u(o,d)},$$slots:{default:!0}}),g(()=>{var o,s;h(A,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),O.disabled=t(n)||!t(v),M=h(O,1,`w-9 h-9 rounded-lg flex items-center justify-center transition-all shrink-0
             ${(o=t(v))!=null&&o.power?"bg-cyan-500/20 text-cyan-400":"bg-zinc-800/60 text-zinc-500"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,M,{"status-active":(s=t(v))==null?void 0:s.power})}),u(I,G),St()}Mt(["click","keydown"]);var va=f(`<button class="flex flex-col items-center gap-1.5 p-2.5 rounded-xl transition-all
                   hover:bg-white/5 active:scale-95 disabled:opacity-50"><span> </span> <span class="text-xs text-[var(--muted)] capitalize"> </span></button>`),ca=f('<div class="quick-bar rounded-2xl px-3 py-3 mb-2 animate-fade-in"><div class="grid grid-cols-3 gap-2 min-w-[220px]"></div></div>'),ua=f(`<button class="flex flex-col items-center gap-0.5 px-4 py-2 rounded-xl transition-all
               hover:bg-white/5 active:scale-95 disabled:opacity-50"><span>‚òÄÔ∏è</span> <span class="text-[10px] text-[var(--muted)]">Day</span></button>`),pa=f(`<button class="flex flex-col items-center gap-0.5 px-4 py-2 rounded-xl transition-all
               hover:bg-white/5 active:scale-95 disabled:opacity-50"><span>üåÜ</span> <span class="text-[10px] text-[var(--muted)]">Evening</span></button>`),xa=f(`<button class="flex flex-col items-center gap-0.5 px-4 py-2 rounded-xl transition-all
               hover:bg-white/5 active:scale-95 disabled:opacity-50"><span>üåô</span> <span class="text-[10px] text-[var(--muted)]">Night</span></button>`),fa=f('<div class="w-px h-8 bg-[var(--glass-border)] mx-1"></div> <button><span class="text-xl"> </span> <span class="text-[10px] text-[var(--muted)]"> </span></button>',1),ma=f(`<div class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50"><!> <div class="quick-bar rounded-2xl px-2 py-2 flex items-center gap-0.5"><button class="flex flex-col items-center gap-0.5 px-4 py-2 rounded-xl transition-all
             hover:bg-white/5 active:scale-95 disabled:opacity-50"><span>‚ö°</span> <span class="text-[10px] text-[var(--muted)]">All Off</span></button> <!> <!> <!> <!></div></div>`);function ga(I,l){Ct(l,!0);let j=mt(Ft({})),v=mt(null),n=mt(!1);It(()=>{Zt().then(m=>w(j,m,!0)).catch(()=>{})});async function _(m){w(v,m,!0);try{await te(m),await H.refreshLamps()}catch(p){console.error(p)}w(v,null),w(n,!1)}async function V(){w(v,"off");try{const m=H.lamps.filter(p=>p.category==="lamp");await Promise.all(m.map(p=>Nt(p.id,{power:!1}))),await H.refreshLamps()}catch(m){console.error(m)}w(v,null)}const T={day:"‚òÄÔ∏è",morning:"üåÖ",evening:"üåÜ",night:"üåô",off:"‚ö´",bright:"üí°",dim:"üïØÔ∏è",warm:"üî•",cool:"‚ùÑÔ∏è",relax:"üõãÔ∏è",focus:"üéØ",movie:"üé¨"};function L(m){return T[m.toLowerCase()]||"üí°"}var C=ma(),G=a(C);{var A=m=>{var p=ca(),o=a(p);kt(o,21,()=>Object.entries(t(j)),([s,d])=>s,(s,d)=>{var i=Q(()=>Jt(t(d),2));let c=()=>t(i)[0],z=()=>t(i)[1];var y=va();y.__click=()=>_(c());var N=a(y),J=a(N,!0);e(N);var P=r(N,2),W=a(P,!0);e(P),e(y),g($=>{y.disabled=t(v)!==null,h(N,1,`text-xl ${t(v)===c()?"animate-pulse":""}`),x(J,$),x(W,z().name||c())},[()=>L(c())]),u(s,y)}),e(o),e(p),u(m,p)};S(G,m=>{t(n)&&Object.keys(t(j)).length>0&&m(A)})}var k=r(G,2),O=a(k);O.__click=V;var M=a(O);At(2),e(O);var K=r(O,2);{var D=m=>{var p=ua();p.__click=()=>_("day");var o=a(p);At(2),e(p),g(()=>{p.disabled=t(v)!==null,h(o,1,`text-xl ${t(v)==="day"?"animate-pulse":""}`)}),u(m,p)};S(K,m=>{t(j).day&&m(D)})}var Y=r(K,2);{var q=m=>{var p=pa();p.__click=()=>_("evening");var o=a(p);At(2),e(p),g(()=>{p.disabled=t(v)!==null,h(o,1,`text-xl ${t(v)==="evening"?"animate-pulse":""}`)}),u(m,p)};S(Y,m=>{t(j).evening&&m(q)})}var et=r(Y,2);{var it=m=>{var p=xa();p.__click=()=>_("night");var o=a(p);At(2),e(p),g(()=>{p.disabled=t(v)!==null,h(o,1,`text-xl ${t(v)==="night"?"animate-pulse":""}`)}),u(m,p)};S(et,m=>{t(j).night&&m(it)})}var ot=r(et,2);{var b=m=>{var p=fa(),o=r(tt(p),2);o.__click=()=>w(n,!t(n));var s=a(o),d=a(s,!0);e(s);var i=r(s,2),c=a(i,!0);e(i),e(o),g(()=>{h(o,1,`flex flex-col items-center gap-0.5 px-4 py-2 rounded-xl transition-all
               hover:bg-white/5 active:scale-95
               ${t(n)?"bg-white/5":""}`),x(d,t(n)?"‚úï":"‚ãØ"),x(c,t(n)?"Close":"More")}),u(m,p)};S(ot,m=>{Object.keys(t(j)).length>3&&m(b)})}e(k),e(C),g(()=>{O.disabled=t(v)!==null,h(M,1,`text-xl ${t(v)==="off"?"animate-pulse":""}`)}),u(I,C),St()}Mt(["click"]);var _a=f('<div class="glass-card rounded-xl p-2.5"><div class="flex items-center gap-2.5"><div class="w-9 h-9 rounded-lg bg-zinc-800 animate-pulse"></div> <div class="flex-1 space-y-1.5"><div class="w-20 h-3.5 rounded bg-zinc-800 animate-pulse"></div> <div class="w-14 h-3 rounded bg-zinc-800 animate-pulse"></div></div></div></div>'),ba=f('<section><div class="w-20 h-5 rounded bg-zinc-800 animate-pulse mb-3"></div> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ha=f('<div class="space-y-6"></div>'),ya=f('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-amber-400">üí°</span> Lights <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),wa=f('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-orange-400">üå°Ô∏è</span> Climate <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!> <!></div></section>'),za=f('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-cyan-400">üì°</span> Sensors <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ka=f('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-purple-400">üîä</span> Audio <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ja=f('<!> <!> <!> <!> <section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-green-400">ü§ñ</span> Robot <span class="text-xs text-zinc-600">(1)</span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!></div></section>',1),Ca=f('<div class="pb-24 space-y-6"><!></div> <!>',1);function Da(I,l){Ct(l,!0);let j=Q(()=>H.lamps.filter(k=>k.category==="lamp")),v=Q(()=>H.tuyaDevices.filter(k=>k.category==="wkf")),n=Q(()=>H.tuyaDevices.filter(k=>["sj","mcs","wsdcg"].includes(k.category))),_=Q(()=>H.lamps.length>0||H.tuyaDevices.length>0||H.yamahaDevices.length>0);var V=Ca();ee("1uha8ag",k=>{Ut(()=>{Qt.title="Smart Home"})});var T=tt(V),L=a(T);{var C=k=>{var O=ha();kt(O,20,()=>Array(3),Tt,(M,K)=>{var D=ba(),Y=r(a(D),2);kt(Y,20,()=>Array(4),Tt,(q,et,it,ot)=>{var b=_a();u(q,b)}),e(Y),e(D),u(M,D)}),e(O),u(k,O)},G=k=>{var O=ja(),M=tt(O);{var K=o=>{var s=ya(),d=a(s),i=r(a(d),2),c=a(i);e(i),e(d);var z=r(d,2);kt(z,21,()=>t(j),y=>y.id,(y,N)=>{me(y,{get lamp(){return t(N)},compact:!0})}),e(z),e(s),g(()=>x(c,`(${t(j).length??""})`)),u(o,s)};S(M,o=>{t(j).length>0&&o(K)})}var D=r(M,2);{var Y=o=>{var s=wa(),d=a(s),i=r(a(d),2),c=a(i);e(i),e(d);var z=r(d,2),y=a(z);kt(y,17,()=>t(v),P=>P.id,(P,W)=>{Ve(P,{get device(){return t(W)},compact:!0})});var N=r(y,2);{var J=P=>{da(P,{compact:!0})};S(N,P=>{H.airPurifier&&P(J)})}e(z),e(s),g(()=>x(c,`(${t(v).length+(H.airPurifier?1:0)})`)),u(o,s)};S(D,o=>{(t(v).length>0||H.airPurifier)&&o(Y)})}var q=r(D,2);{var et=o=>{var s=za(),d=a(s),i=r(a(d),2),c=a(i);e(i),e(d);var z=r(d,2);kt(z,21,()=>t(n),y=>y.id,(y,N)=>{Me(y,{get device(){return t(N)},compact:!0})}),e(z),e(s),g(()=>x(c,`(${t(n).length??""})`)),u(o,s)};S(q,o=>{t(n).length>0&&o(et)})}var it=r(q,2);{var ot=o=>{var s=ka(),d=a(s),i=r(a(d),2),c=a(i);e(i),e(d);var z=r(d,2);kt(z,21,()=>H.yamahaDevices,y=>y.id,(y,N)=>{Je(y,{get device(){return t(N)},compact:!0})}),e(z),e(s),g(()=>x(c,`(${H.yamahaDevices.length??""})`)),u(o,s)};S(it,o=>{H.yamahaDevices.length>0&&o(ot)})}var b=r(it,2),m=r(a(b),2),p=a(m);ke(p,{get status(){return H.roborock},compact:!0}),e(m),e(b),u(k,O)};S(L,k=>{H.loading&&!t(_)?k(C):k(G,!1)})}e(T);var A=r(T,2);ga(A,{}),u(I,V),St()}export{Da as component};
