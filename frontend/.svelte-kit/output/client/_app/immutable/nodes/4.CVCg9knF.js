import{d as _e,f as v,a as c,s as l}from"../chunks/DZ0_ip0j.js";import{p as xe,c as a,s,t as z,g as r,a as k,b as be,d as x,e as ge,$ as he,h as t}from"../chunks/DSyWC8IU.js";import{i as B}from"../chunks/vIkUB9pr.js";import{b as ye,c as we,s as i,r as Q,e as U,a as V,t as ke,d as Se,f as Ae}from"../chunks/B5VcDGCH.js";import{h as $e}from"../chunks/CFb_sizB.js";import{b as W}from"../chunks/BWvLxa9K.js";var Pe=v('<p class="text-content-secondary">No schedules yet</p>'),Ce=v('<div><div class="flex items-center gap-4"><span class="text-xl font-mono text-content-primary"> </span> <div><span class="font-medium text-content-primary"> </span> <span class="text-sm text-content-secondary ml-2"> </span></div></div> <div class="flex gap-2"><button> </button> <button class="text-sm px-3 py-1 rounded-lg bg-error/20 text-error hover:bg-error/30 font-medium transition-colors">Delete</button></div></div>'),Ne=v('<div class="space-y-2"></div>'),je=v('<button class="text-sm px-3 py-1 rounded-lg bg-surface-recessed text-content-secondary hover:bg-stroke-default transition-colors">Clear All</button>'),De=v('<p class="text-content-secondary">No pending actions (all lamps online)</p>'),Oe=v('<div class="bg-surface-elevated border border-stroke-default rounded-xl p-3 flex items-center justify-between"><div><span class="font-mono text-sm text-content-primary"> </span> <span class="text-sm text-content-secondary ml-2"> </span></div> <span class="text-xs text-content-tertiary"> </span></div>'),Me=v('<div class="space-y-2"></div>'),Te=v('<div class="space-y-8"><section class="bg-surface-elevated border border-stroke-default rounded-xl p-4"><h2 class="text-lg font-medium text-content-primary mb-4">Create Schedule</h2> <div class="flex flex-col sm:flex-row flex-wrap gap-3"><input type="text" placeholder="Schedule name" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 w-full sm:flex-1 sm:min-w-[150px] text-content-primary placeholder:text-content-tertiary"/> <div class="flex gap-3"><select class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 text-content-primary flex-1 sm:flex-initial"><option>Day Mode</option><option>Night Mode</option><option>All Off</option></select> <input type="time" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 text-content-primary"/></div> <button class="bg-accent hover:bg-accent/80 disabled:opacity-50 px-4 py-2 rounded-lg text-white font-medium w-full sm:w-auto">Add</button></div></section> <section><h2 class="text-lg font-medium text-content-primary mb-4"> </h2> <!></section> <section><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-medium text-content-primary"> </h2> <!></div> <!></section></div>');function Fe(X,Y){xe(Y,!0);let f=k(""),S=k("night"),A=k("19:00"),$=k(!1);async function Z(){if(r(f).trim()){x($,!0);try{await we(r(f).trim(),r(S),r(A)),x(f,""),await i.refreshSchedules()}catch(e){console.error(e)}x($,!1)}}async function ee(e){await Se(e),await i.refreshSchedules()}async function te(e){await ke(e),await i.refreshSchedules()}async function ae(){await Ae(),await i.refreshPending()}var P=Te();$e("19rgvlq",e=>{ge(()=>{he.title="Smart Home - Schedule"})});var C=a(P),E=s(a(C),2),N=a(E);Q(N);var j=s(N,2),h=a(j),D=a(h);D.value=D.__value="day";var O=s(D);O.value=O.__value="night";var F=s(O);F.value=F.__value="off",t(h);var G=s(h,2);Q(G),t(j);var I=s(j,2);I.__click=Z,t(E),t(C);var M=s(C,2),T=a(M),re=a(T);t(T);var se=s(T,2);{var ne=e=>{var n=Pe();c(e,n)},oe=e=>{var n=Ne();U(n,21,()=>i.schedules,p=>p.id,(p,o)=>{var d=Ce();let m;var u=a(d),b=a(u),y=a(b,!0);t(b);var w=s(b,2),_=a(w),R=a(_,!0);t(_);var K=s(_,2),ue=a(K);t(K),t(w),t(u);var L=s(u,2),g=a(L);g.__click=()=>te(r(o).id);var fe=a(g,!0);t(g);var me=s(g,2);me.__click=()=>ee(r(o).id),t(L),t(d),z(()=>{m=V(d,1,"bg-surface-elevated border border-stroke-default rounded-xl p-3 flex items-center justify-between",null,m,{"opacity-50":!r(o).enabled}),l(y,r(o).time),l(R,r(o).name),l(ue,`(${r(o).preset??""})`),V(g,1,`text-sm px-3 py-1 rounded-lg font-medium transition-colors
                       ${r(o).enabled?"bg-success/20 text-success":"bg-surface-recessed text-content-secondary"}`),l(fe,r(o).enabled?"On":"Off")}),c(p,d)}),t(n),c(e,n)};B(se,e=>{i.schedules.length===0?e(ne):e(oe,!1)})}t(M);var J=s(M,2),q=a(J),H=a(q),ie=a(H);t(H);var le=s(H,2);{var de=e=>{var n=je();n.__click=ae,c(e,n)};B(le,e=>{i.pendingActions.length>0&&e(de)})}t(q);var ce=s(q,2);{var ve=e=>{var n=De();c(e,n)},pe=e=>{var n=Me();U(n,21,()=>i.pendingActions,p=>p.id,(p,o)=>{var d=Oe(),m=a(d),u=a(m),b=a(u,!0);t(u);var y=s(u,2),w=a(y);t(y),t(m);var _=s(m,2),R=a(_);t(_),t(d),z(()=>{l(b,r(o).device_id),l(w,`â†’ ${r(o).preset??""}`),l(R,`Retry #${r(o).retry_count??""}`)}),c(p,d)}),t(n),c(e,n)};B(ce,e=>{i.pendingActions.length===0?e(ve):e(pe,!1)})}t(J),t(P),z(e=>{I.disabled=e,l(re,`Schedules (${i.schedules.length??""})`),l(ie,`Pending Actions (${i.pendingActions.length??""})`)},[()=>r($)||!r(f).trim()]),W(N,()=>r(f),e=>x(f,e)),ye(h,()=>r(S),e=>x(S,e)),W(G,()=>r(A),e=>x(A,e)),c(X,P),be()}_e(["click"]);export{Fe as component};
