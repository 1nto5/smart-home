import{d as bt,c as gt,e as aa,a as l,f as d,s as u,t as Jt,b as ra}from"../chunks/KsRpIQI_.js";import{h as Ut,a0 as dt,aD as ce,a6 as vt,a1 as a,a2 as t,a3 as r,a5 as g,b5 as ba,a7 as Ct,g as e,a4 as R,s as o,a9 as G,aN as ha,R as Qt,K as ya,a8 as wa}from"../chunks/CxzkeP2L.js";import{i as _}from"../chunks/JY_fI8Mb.js";import{f as Zt,s as ne,h as _t,e as $e,i as st,j as ka,k as Sa,l as Xt,m as Ma,n as Ta,o as Ca,p as za,r as ja,q as Pa,u as ea,v as lt,w as ta}from"../chunks/NTh6LLl8.js";import{h as Ra}from"../chunks/jdav0aRx.js";import{s as x,r as wt,b as Tt}from"../chunks/BRTiwp6z.js";import{p as ct,b as Ba}from"../chunks/FSvs7gAD.js";import{s as Oa}from"../chunks/Bcugs9fK.js";import{a as Da}from"../chunks/CxA4e2Oe.js";import{b as Aa}from"../chunks/DvcQTK2l.js";import{t as La}from"../chunks/Cc_vj6Fx.js";function Mt(ee,i,j,h){var n=ee.__style;if(Ut||n!==i){var C=Da(i,h);(!Ut||C!==ee.getAttribute("style"))&&(C==null?ee.removeAttribute("style"):ee.style.cssText=C),ee.__style=i}return h}const Va={"korytarz 1":"Hallway 1","korytarz 2":"Hallway 2",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",jadalnia:"Dining Room",gabinet:"Study",pralnia:"Laundry","Czujnik zalania kuchnia":"Water Sensor Kitchen","Czujnik zalania ≈Çazienka":"Water Sensor Bathroom","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Drzwi:"Door Sensor","Grzejnik salon":"Radiator Living Room","Grzejnik sypialnia":"Radiator Bedroom","Grzejnik kuchnia":"Radiator Kitchen","Grzejnik ≈Çazienka":"Radiator Bathroom","Grzejnik korytarz":"Radiator Hallway","Grzejnik pok√≥j dzieci":"Radiator Kids Room",Grzejnik:"Radiator"},Na={korytarz:"Hallway",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",pok√≥j:"Room",dzieci:"Kids","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Grzejnik:"Radiator",Drzwi:"Door",Lampa:"Light",du≈ºy:"Large",ma≈Çy:"Small",g≈Ç√≥wny:"Main",g√≥rny:"Upper",dolny:"Lower"};function zt(ee){if(!ee)return ee;const i=ee.toLowerCase();for(const[n,C]of Object.entries(Va))if(i===n.toLowerCase())return C;let j=ee;const h=Object.entries(Na).sort((n,C)=>C[0].length-n[0].length);for(const[n,C]of h){const $=new RegExp(n,"gi");j=j.replace($,C)}return j}function kt(ee,i){let j=null;return[(...C)=>{j&&clearTimeout(j),j=setTimeout(()=>{j=null,ee(...C)},i)},()=>{j&&(clearTimeout(j),j=null)}]}var Ea=d(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 dialog-overlay animate-fade-in svelte-alpl3u" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="dialog-content w-full max-w-md max-h-[80vh] overflow-hidden"><div class="flex items-center justify-between p-4 border-b border-stroke-default"><h2 id="dialog-title" class="text-lg font-semibold text-content-primary"> </h2> <button aria-label="Close dialog" class="w-10 h-10 rounded-xl bg-surface-recessed text-content-secondary hover:text-content-primary
                 hover:bg-stroke-default transition-colors flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 overflow-y-auto max-h-[calc(80vh-64px)]"><!></div></div></div>`);function St(ee,i){dt(i,!0);let j=ct(i,"open",3,!1);function h(k){k.target===k.currentTarget&&i.onclose()}function n(k){k.key==="Escape"&&i.onclose()}var C=gt();aa("keydown",ba,n);var $=ce(C);{var J=k=>{var O=Ea();O.__click=h,O.__keydown=n;var w=a(O),N=a(w),z=a(N),ie=a(z,!0);t(z);var E=r(z,2);E.__click=function(...ye){var B;(B=i.onclose)==null||B.apply(this,ye)},t(N);var D=r(N,2),K=a(D);Oa(K,()=>i.children),t(D),t(w),t(O),g(()=>u(ie,i.title)),l(k,O)};_($,k=>{j()&&k(J)})}l(ee,C),vt()}bt(["click","keydown"]);var Ia=d('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-lights-text rounded-full animate-pulse"></span>'),Wa=d('<p class="text-xs text-device-audio-text">Moonlight</p>'),$a=d('<p class="text-xs text-content-secondary"> </p>'),Fa=d('<p class="text-xs text-content-secondary"> </p>'),Ha=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-lights-text rounded-full animate-pulse"></span>'),Ga=d('<span class="absolute top-1 right-1 w-1.5 h-1.5 bg-device-lights-text rounded-full animate-pulse"></span>'),Ka=d("<button> <!></button>"),Ya=d('<div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Brightness</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="1" max="100" class="w-full"/></div> <div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Color Temperature</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="1700" max="6500" step="100" class="w-full"/> <div class="flex justify-between text-xs text-content-tertiary mt-1"><span>Warm</span> <span>Cool</span></div></div>',1),qa=d('<div class="py-4 text-center text-sm text-device-audio-text/80">Hardware night light mode active</div>'),Ja=d('<div><p class="text-sm text-content-secondary mb-2">Presets</p> <div class="grid grid-cols-3 gap-2"></div></div> <!>',1),Ua=d('<button> <!></button> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">IP Address</span> <span class="font-mono text-xs text-content-tertiary"> </span></div></div>',1),Qa=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span><!></span></div> <!></div>'),Za=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a.75.75 0 01.75.75v6.5a.75.75 0 01-1.5 0v-6.5A.75.75 0 0110 2z"></path><path d="M5.404 4.343a.75.75 0 10-1.06 1.06 6.5 6.5 0 109.192 0 .75.75 0 00-1.06-1.06 5 5 0 11-7.072 0z"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function Xa(ee,i){dt(i,!0);let j=ct(i,"compact",3,!1),h=G(()=>zt(i.lamp.name)),n=G(()=>ne.lampStatuses.get(i.lamp.id)),C=R(!1),$=R(!1),J=R(null),k=R(!1),O=R(null),w=R(null),N=R(null),z=G(()=>{var f;return e(J)??((f=e(n))==null?void 0:f.power)??!1}),ie=G(()=>{var f;return e(w)??((f=e(n))==null?void 0:f.brightness)??0}),E=G(()=>{var f;return e(N)??((f=e(n))==null?void 0:f.color_temp)??0});Ct(()=>{e(C)||(o(C,!0),Zt(i.lamp.id).then(f=>ne.updateLampStatus(i.lamp.id,f.status)).catch(()=>{}))});async function D(f){f.stopPropagation();const P=!e(z);o(J,P),o(k,!0);try{await _t(i.lamp.id,{toggle:!0}),K()}catch(re){console.error(re),o(J,null),o(k,!1)}}async function K(){try{const f=await Zt(i.lamp.id);ne.updateLampStatus(i.lamp.id,f.status),o(J,null)}catch(f){console.error(f)}o(k,!1),o(O,null)}const[ye]=kt(async f=>{try{await _t(i.lamp.id,{brightness:f}),e(n)&&ne.updateLampStatus(i.lamp.id,{...e(n),brightness:f})}catch(P){console.error(P)}o(w,null)},300),[B]=kt(async f=>{try{await _t(i.lamp.id,{color_temp:f}),e(n)&&ne.updateLampStatus(i.lamp.id,{...e(n),color_temp:f})}catch(P){console.error(P)}o(N,null)},300);function ue(f){o(w,f,!0),ye(f)}function Se(f){o(N,f,!0),B(f)}const Re=[{id:"day",label:"Day",brightness:100,colorTemp:5e3,moonlight:!1},{id:"night",label:"Night",brightness:30,colorTemp:2700,moonlight:!1},{id:"moonlight",label:"Moonlight",brightness:10,colorTemp:2700,moonlight:!0}];async function Be(f){var P,re;o(O,f.id,!0),f.moonlight?e(n)&&ne.updateLampStatus(i.lamp.id,{...e(n),power:!0,moonlight_mode:!0,brightness:f.brightness}):e(n)&&ne.updateLampStatus(i.lamp.id,{...e(n),power:!0,moonlight_mode:!1,brightness:f.brightness,color_temp:f.colorTemp});try{f.moonlight?await _t(i.lamp.id,{moonlight:!0,moonlight_brightness:f.brightness}):((P=e(n))!=null&&P.moonlight_mode?await _t(i.lamp.id,{moonlight:!1}):(re=e(n))!=null&&re.power||await _t(i.lamp.id,{power:!0}),await _t(i.lamp.id,{brightness:f.brightness,color_temp:f.colorTemp})),K()}catch(s){console.error(s),o(O,null),K()}}function U(f){var s,p,y,A;if(!e(z))return!1;if(f.moonlight)return((s=e(n))==null?void 0:s.moonlight_mode)??!1;if((p=e(n))!=null&&p.moonlight_mode)return!1;const P=Math.abs((((y=e(n))==null?void 0:y.brightness)??0)-f.brightness)<=5,re=Math.abs((((A=e(n))==null?void 0:A.color_temp)??0)-f.colorTemp)<=200;return P&&re}var Q=Za(),S=ce(Q);S.__click=()=>o($,!0),S.__keydown=f=>f.key==="Enter"&&o($,!0);var Y=a(S),M=a(Y);M.__click=D;let T;var v=r(a(M),2);{var b=f=>{var P=Ia();l(f,P)};_(v,f=>{e(k)&&f(b)})}t(M);var te=r(M,2),ae=a(te),me=a(ae,!0);t(ae);var Oe=r(ae,2);{var ke=f=>{var P=gt(),re=ce(P);{var s=y=>{var A=Wa();l(y,A)},p=y=>{var A=$a(),le=a(A);t(A),g(()=>u(le,`${e(ie)??""}% ¬∑ ${e(E)??""}K`)),l(y,A)};_(re,y=>{var A;(A=e(n))!=null&&A.moonlight_mode?y(s):y(p,!1)})}l(f,P)},Je=f=>{var P=Fa(),re=a(P,!0);t(P),g(()=>u(re,e(n)?"Off":"Offline")),l(f,P)};_(Oe,f=>{e(z)?f(ke):f(Je,!1)})}t(te),t(Y),t(S);var Te=r(S,2);St(Te,{get open(){return e($)},onclose:()=>o($,!1),get title(){return e(h)},children:(f,P)=>{var re=Qa(),s=a(re),p=r(a(s),2),y=a(p);{var A=de=>{var se=Jt();g(()=>{var c;return u(se,(c=e(n))!=null&&c.moonlight_mode?"Moonlight":"On")}),l(de,se)},le=de=>{var se=Jt();g(()=>u(se,e(n)?"Off":"Offline")),l(de,se)};_(y,de=>{e(z)?de(A):de(le,!1)})}t(p),t(s);var Le=r(s,2);{var De=de=>{var se=Ua(),c=ce(se);c.__click=D;var m=a(c),F=r(m);{var ve=X=>{var L=Ha();l(X,L)};_(F,X=>{e(k)&&X(ve)})}t(c);var fe=r(c,2);{var _e=X=>{var L=Ja(),I=ce(L),q=r(a(I),2);$e(q,21,()=>Re,st,(ze,be)=>{var he=Ka();he.__click=()=>Be(e(be));var Ae=a(he),Fe=r(Ae);{var et=Me=>{var Ue=Ga();l(Me,Ue)};_(Fe,Me=>{e(O)===e(be).id&&Me(et)})}t(he),g(Me=>{x(he,1,`py-2.5 text-sm rounded-lg transition-all relative
                       ${Me??""}`),u(Ae,`${e(be).label??""} `)},[()=>U(e(be))||e(O)===e(be).id?e(be).moonlight?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"]),l(ze,he)}),t(q),t(I);var ge=r(I,2);{var Ee=ze=>{var be=Ya(),he=ce(be),Ae=a(he),Fe=r(a(Ae),2),et=a(Fe);t(Fe),t(Ae);var Me=r(Ae,2);wt(Me),Me.__input=Pe=>ue(parseInt(Pe.currentTarget.value)),t(he);var Ue=r(he,2),je=a(Ue),Ie=r(a(je),2),He=a(Ie);t(Ie),t(je);var Ge=r(je,2);wt(Ge),Ge.__input=Pe=>Se(parseInt(Pe.currentTarget.value)),ha(2),t(Ue),g(()=>{u(et,`${e(ie)??""}%`),Tt(Me,e(ie)),u(He,`${e(E)??""}K`),Tt(Ge,e(E))}),l(ze,be)},Xe=ze=>{var be=qa();l(ze,be)};_(ge,ze=>{e(n).moonlight_mode?ze(Xe,!1):ze(Ee)})}l(X,L)};_(fe,X=>{e(z)&&X(_e)})}var Ce=r(fe,2),Z=a(Ce),we=r(a(Z),2),oe=a(we,!0);t(we),t(Z),t(Ce),g(()=>{x(c,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(z)?e(n).moonlight_mode?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),u(m,`${e(z)?"Turn Off":"Turn On"} `),u(oe,i.lamp.ip)}),l(de,se)};_(Le,de=>{e(n)&&de(De)})}t(re),g(()=>{var de;return x(p,1,`font-medium ${e(z)?(de=e(n))!=null&&de.moonlight_mode?"text-device-audio-text":"text-device-lights-text":"text-content-tertiary"}`)}),l(f,re)},$$slots:{default:!0}}),g(()=>{var f;x(S,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),M.disabled=!e(n),T=x(M,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(z)?(f=e(n))!=null&&f.moonlight_mode?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,T,{"status-active":e(z)}),u(me,e(h))}),l(ee,Q),vt()}bt(["click","keydown","input"]);var er=d("<p> </p>"),tr=d('<p class="text-xs text-content-secondary">Offline</p>'),ar=d('<div class="flex items-center gap-1 text-xs shrink-0"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 11.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zm4-3a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-4z"></path><path d="M8 4.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v8a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-8z"></path></svg> <span> </span></div>'),rr=d('<span class="absolute top-1 right-1 w-2 h-2 bg-success rounded-full animate-pulse"></span>'),sr=d('<span class="absolute top-1 right-1 w-2 h-2 bg-warning rounded-full animate-pulse"></span>'),nr=d('<span class="absolute top-1 right-1 w-2 h-2 bg-info rounded-full animate-pulse"></span>'),or=d('<span class="absolute top-2 right-2 w-2 h-2 bg-content-secondary rounded-full animate-pulse"></span>'),ir=d('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-device-audio-text rounded-full animate-pulse"></span>'),lr=d('<button><div class="text-base mb-0.5"> </div> <!></button>'),cr=d('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-device-sensors-text rounded-full animate-pulse"></span>'),dr=d('<button><div class="text-base mb-0.5"> </div> <!></button>'),vr=d(`<div><p class="text-sm text-content-secondary mb-2">Actions</p> <div class="grid grid-cols-3 gap-2"><button class="py-4 rounded-xl bg-success/20 text-success text-sm font-medium relative
                     hover:bg-success/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> Start <!></button> <button class="py-4 rounded-xl bg-warning/20 text-warning text-sm font-medium relative
                     hover:bg-warning/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Pause <!></button> <button class="py-4 rounded-xl bg-info/20 text-info text-sm font-medium relative
                     hover:bg-info/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg> Home <!></button></div></div> <div><button class="w-full py-3 rounded-xl bg-surface-recessed text-content-secondary text-sm font-medium relative
                   hover:bg-stroke-default transition-colors">Find Robot <!></button></div> <div><p class="text-sm text-content-secondary mb-2">Suction Power</p> <div class="grid grid-cols-4 gap-1"></div></div> <div><p class="text-sm text-content-secondary mb-2">Mop Intensity</p> <div class="grid grid-cols-4 gap-1"></div></div>`,1),ur=d("<button> </button>"),fr=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-sensors-text rounded-full animate-pulse"></span>'),pr=d(`<button class="w-full mt-3 py-3 rounded-xl badge-sensors text-sm font-medium relative
                       hover:opacity-90 transition-colors"> <!></button>`),mr=d('<div class="grid grid-cols-2 gap-2"></div> <!>',1),xr=d('<p class="text-content-tertiary text-sm">Loading rooms...</p>'),_r=d('<div><p class="text-sm text-content-secondary mb-2">Select rooms to clean</p> <!></div>'),gr=d('<div><p class="text-sm text-content-secondary mb-3">Consumables</p> <div class="space-y-3"><div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Main Brush</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Side Brush</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Filter</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Sensors</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div></div></div>'),br=d('<p class="text-content-tertiary text-sm">Loading consumables...</p>'),hr=d('<div><div class="flex justify-between items-center mb-2"><span class="text-sm text-content-secondary">Volume</span> <span class="text-sm font-medium text-content-primary"> </span></div> <input type="range" min="0" max="100" step="10" class="w-full"/></div> <!>',1),yr=d('<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Battery</span> <p> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Fan Speed</span> <p class="text-2xl font-bold mt-1 text-content-primary"> </p></div></div> <div class="flex gap-1 bg-surface-recessed rounded-lg p-1"><button>Controls</button> <button>Rooms</button> <button>Settings</button></div> <!>',1),wr=d('<div class="text-center py-8 text-content-secondary">Start bridge to control robot</div>'),kr=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),Sr=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z" clip-rule="evenodd"></path></svg></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate">Roborock</h4> <!></div> <!></div></div> <!>',1);function Mr(ee,i){dt(i,!0);let j=ct(i,"compact",3,!1),h=R(!1),n=R(null),C=R(null),$=R(null),J=R(!1),k=R(null),O=R(null),w=R(null),N=G(()=>{var c;return e(O)??((c=i.status)==null?void 0:c.fanPower)??102}),z=G(()=>{var c;return e(w)??((c=i.status)==null?void 0:c.waterBoxMode)??200}),ie=R(Qt([])),E=R(Qt(new Set)),D=R(30),K=R(null),ye=G(()=>e(K)??e(D)),B=R(null),ue=R("controls");const Se={1:"Starting",2:"Charger disconnected",3:"Idle",4:"Remote control",5:"Cleaning",6:"Returning",7:"Manual mode",8:"Charging",9:"Charging problem",10:"Paused",11:"Spot cleaning",12:"Error",13:"Shutting down",14:"Updating",15:"Docking",16:"Going to target",17:"Zoned cleaning",18:"Segment cleaning",22:"Emptying dustbin",23:"Washing mop",26:"Going to wash mop"},Re=[{mode:101,name:"Quiet",icon:"üîá"},{mode:102,name:"Balanced",icon:"‚öñÔ∏è"},{mode:103,name:"Turbo",icon:"üí®"},{mode:104,name:"Max",icon:"üî•"}],Be=[{mode:200,name:"Off",icon:"‚ùå"},{mode:201,name:"Low",icon:"üíß"},{mode:202,name:"Med",icon:"üíßüíß"},{mode:203,name:"High",icon:"üíßüíßüíß"}];function U(c){return Se[c]||"Unknown"}function Q(c){const m=Re.find(F=>F.mode===c);return m?m.name:`${c}%`}async function S(){try{const[c,m,F]=await Promise.all([ka(),Sa(),Xt()]);o(ie,c.rooms,!0),o(D,m.volume,!0),o(B,F,!0)}catch(c){console.error("Failed to load extended data:",c)}}async function Y(c){o(n,c,!0);try{await Ma(c),ne.refreshRoborock()}catch(m){console.error(m)}o(n,null)}async function M(c){o(O,c,!0),o(C,c,!0);try{await Ta(c),ne.refreshRoborock()}catch(m){console.error(m),o(O,null)}o(C,null)}async function T(c){o(w,c,!0),o($,c,!0);try{await Ca(c),ne.refreshRoborock()}catch(m){console.error(m),o(w,null)}o($,null)}const[v]=kt(async c=>{try{await Pa(c),o(D,c,!0)}catch(m){console.error(m)}o(K,null)},300);function b(c){o(K,c,!0),v(c)}function te(c){const m=new Set(e(E));m.has(c)?m.delete(c):m.add(c),o(E,m,!0)}async function ae(){if(e(E).size!==0){o(J,!0);try{await za([...e(E)]),o(E,new Set,!0),ne.refreshRoborock()}catch(c){console.error(c)}o(J,!1)}}function me(c,m){const F=c/3600;return Math.max(0,Math.min(100,F/m*100))}function Oe(c){return c<50?"bg-success":c<80?"bg-warning":"bg-error"}async function ke(c){o(k,c,!0);try{await ja(c);const m=await Xt();o(B,m,!0)}catch(m){console.error(m)}o(k,null)}function Je(c){switch(c){case 5:case 11:case 17:case 18:return{color:"text-success",bg:"bg-success/20"};case 8:return{color:"text-info",bg:"bg-info/20"};case 3:return{color:"text-content-tertiary",bg:"bg-surface-recessed"};case 10:return{color:"text-warning",bg:"bg-warning/20"};case 6:case 15:case 16:case 26:return{color:"text-device-sensors-text",bg:"bg-device-sensors-bg"};case 12:case 9:return{color:"text-error",bg:"bg-error/20"};default:return{color:"text-content-tertiary",bg:"bg-surface-recessed"}}}let Te=G(()=>i.status?Je(i.status.state):{color:"text-content-tertiary",bg:"bg-surface-recessed"});Ct(()=>{e(h)&&S()});var f=Sr(),P=ce(f);P.__click=()=>o(h,!0),P.__keydown=c=>c.key==="Enter"&&o(h,!0);var re=a(P),s=a(re);let p;var y=r(s,2),A=r(a(y),2);{var le=c=>{var m=er(),F=a(m,!0);t(m),g(ve=>{x(m,1,`text-xs ${e(Te).color??""}`),u(F,ve)},[()=>U(i.status.state)]),l(c,m)},Le=c=>{var m=tr();l(c,m)};_(A,c=>{i.status?c(le):c(Le,!1)})}t(y);var De=r(y,2);{var de=c=>{var m=ar(),F=a(m),ve=r(F,2),fe=a(ve);t(ve),t(m),g(()=>{x(F,0,`w-3.5 h-3.5 ${i.status.battery>20?"text-success":"text-error"}`),x(ve,1,i.status.battery>20?"text-content-secondary":"text-error"),u(fe,`${i.status.battery??""}%`)}),l(c,m)};_(De,c=>{j()&&i.status&&c(de)})}t(re),t(P);var se=r(P,2);St(se,{get open(){return e(h)},onclose:()=>o(h,!1),title:"Roborock",children:(c,m)=>{var F=kr(),ve=a(F),fe=r(a(ve),2),_e=a(fe,!0);t(fe),t(ve);var Ce=r(ve,2);{var Z=oe=>{var X=yr(),L=ce(X),I=a(L),q=r(a(I),2),ge=a(q);t(q),t(I);var Ee=r(I,2),Xe=r(a(Ee),2),ze=a(Xe,!0);t(Xe),t(Ee),t(L);var be=r(L,2),he=a(be);he.__click=()=>o(ue,"controls");var Ae=r(he,2);Ae.__click=()=>o(ue,"rooms");var Fe=r(Ae,2);Fe.__click=()=>o(ue,"settings"),t(be);var et=r(be,2);{var Me=je=>{var Ie=vr(),He=ce(Ie),Ge=r(a(He),2),Pe=a(Ge);Pe.__click=()=>Y("start");var H=r(a(Pe),2);{var V=pe=>{var xe=rr();l(pe,xe)};_(H,pe=>{e(n)==="start"&&pe(V)})}t(Pe);var W=r(Pe,2);W.__click=()=>Y("pause");var Qe=r(a(W),2);{var ut=pe=>{var xe=sr();l(pe,xe)};_(Qe,pe=>{e(n)==="pause"&&pe(ut)})}t(W);var Ke=r(W,2);Ke.__click=()=>Y("home");var tt=r(a(Ke),2);{var nt=pe=>{var xe=nr();l(pe,xe)};_(tt,pe=>{e(n)==="home"&&pe(nt)})}t(Ke),t(Ge),t(He);var ot=r(He,2),ft=a(ot);ft.__click=()=>Y("find");var Ze=r(a(ft));{var Ye=pe=>{var xe=or();l(pe,xe)};_(Ze,pe=>{e(n)==="find"&&pe(Ye)})}t(ft),t(ot);var We=r(ot,2),it=r(a(We),2);$e(it,21,()=>Re,st,(pe,xe)=>{var Ne=lr();Ne.__click=()=>M(e(xe).mode);var at=a(Ne),pt=a(at,!0);t(at);var mt=r(at),ht=r(mt);{var yt=rt=>{var xt=ir();l(rt,xt)};_(ht,rt=>{e(C)===e(xe).mode&&rt(yt)})}t(Ne),g(()=>{x(Ne,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${e(N)===e(xe).mode?"badge-audio ring-1 ring-device-audio-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(pt,e(xe).icon),u(mt,` ${e(xe).name??""} `)}),l(pe,Ne)}),t(it),t(We);var Ve=r(We,2),qe=r(a(Ve),2);$e(qe,21,()=>Be,st,(pe,xe)=>{var Ne=dr();Ne.__click=()=>T(e(xe).mode);var at=a(Ne),pt=a(at,!0);t(at);var mt=r(at),ht=r(mt);{var yt=rt=>{var xt=cr();l(rt,xt)};_(ht,rt=>{e($)===e(xe).mode&&rt(yt)})}t(Ne),g(()=>{x(Ne,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${e(z)===e(xe).mode?"badge-sensors ring-1 ring-device-sensors-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(pt,e(xe).icon),u(mt,` ${e(xe).name??""} `)}),l(pe,Ne)}),t(qe),t(Ve),l(je,Ie)},Ue=je=>{var Ie=gt(),He=ce(Ie);{var Ge=H=>{var V=_r(),W=r(a(V),2);{var Qe=Ke=>{var tt=mr(),nt=ce(tt);$e(nt,21,()=>e(ie),st,(Ze,Ye)=>{var We=ur();We.__click=()=>te(e(Ye).segmentId);var it=a(We,!0);t(We),g(Ve=>{x(We,1,`py-3 px-3 rounded-xl text-sm font-medium transition-colors text-left
                         ${Ve??""}`),u(it,e(Ye).name)},[()=>e(E).has(e(Ye).segmentId)?"badge-sensors ring-1 ring-device-sensors-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"]),l(Ze,We)}),t(nt);var ot=r(nt,2);{var ft=Ze=>{var Ye=pr();Ye.__click=ae;var We=a(Ye),it=r(We);{var Ve=qe=>{var pe=fr();l(qe,pe)};_(it,qe=>{e(J)&&qe(Ve)})}t(Ye),g(()=>u(We,`Clean ${e(E).size??""} room${e(E).size>1?"s":""} `)),l(Ze,Ye)};_(ot,Ze=>{e(E).size>0&&Ze(ft)})}l(Ke,tt)},ut=Ke=>{var tt=xr();l(Ke,tt)};_(W,Ke=>{e(ie).length>0?Ke(Qe):Ke(ut,!1)})}t(V),l(H,V)},Pe=H=>{var V=gt(),W=ce(V);{var Qe=ut=>{var Ke=hr(),tt=ce(Ke),nt=a(tt),ot=r(a(nt),2),ft=a(ot);t(ot),t(nt);var Ze=r(nt,2);wt(Ze),Ze.__input=Ve=>b(parseInt(Ve.currentTarget.value)),t(tt);var Ye=r(tt,2);{var We=Ve=>{var qe=gr(),pe=r(a(qe),2),xe=a(pe),Ne=a(xe),at=r(a(Ne),2),pt=a(at),mt=a(pt);t(pt);var ht=r(pt,2);ht.__click=()=>ke("main_brush_work_time"),t(at),t(Ne);var yt=r(Ne,2),rt=a(yt);t(yt),t(xe);var xt=r(xe,2),jt=a(xt),Lt=r(a(jt),2),Pt=a(Lt),sa=a(Pt);t(Pt);var Vt=r(Pt,2);Vt.__click=()=>ke("side_brush_work_time"),t(Lt),t(jt);var Nt=r(jt,2),Et=a(Nt);t(Nt),t(xt);var Rt=r(xt,2),Bt=a(Rt),It=r(a(Bt),2),Ot=a(It),na=a(Ot);t(Ot);var Wt=r(Ot,2);Wt.__click=()=>ke("filter_work_time"),t(It),t(Bt);var $t=r(Bt,2),Ft=a($t);t($t),t(Rt);var Ht=r(Rt,2),Dt=a(Ht),Gt=r(a(Dt),2),At=a(Gt),oa=a(At);t(At);var Kt=r(At,2);Kt.__click=()=>ke("sensor_dirty_time"),t(Gt),t(Dt);var Yt=r(Dt,2),qt=a(Yt);t(Yt),t(Ht),t(pe),t(qe),g((ia,la,ca,da,va,ua,fa,pa,ma,xa,_a,ga)=>{u(mt,`${ia??""}h`),x(ht,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary relative ${e(k)==="main_brush_work_time"?"opacity-50":""}`),x(rt,1,`h-full ${la??""} transition-all`),Mt(rt,`width: ${ca??""}%`),u(sa,`${da??""}h`),x(Vt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="side_brush_work_time"?"opacity-50":""}`),x(Et,1,`h-full ${va??""} transition-all`),Mt(Et,`width: ${ua??""}%`),u(na,`${fa??""}h`),x(Wt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="filter_work_time"?"opacity-50":""}`),x(Ft,1,`h-full ${pa??""} transition-all`),Mt(Ft,`width: ${ma??""}%`),u(oa,`${xa??""}h`),x(Kt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="sensor_dirty_time"?"opacity-50":""}`),x(qt,1,`h-full ${_a??""} transition-all`),Mt(qt,`width: ${ga??""}%`)},[()=>Math.round(e(B).mainBrushWorkTime/3600),()=>Oe(me(e(B).mainBrushWorkTime,300)),()=>me(e(B).mainBrushWorkTime,300),()=>Math.round(e(B).sideBrushWorkTime/3600),()=>Oe(me(e(B).sideBrushWorkTime,200)),()=>me(e(B).sideBrushWorkTime,200),()=>Math.round(e(B).filterWorkTime/3600),()=>Oe(me(e(B).filterWorkTime,150)),()=>me(e(B).filterWorkTime,150),()=>Math.round(e(B).sensorDirtyTime/3600),()=>Oe(me(e(B).sensorDirtyTime,30)),()=>me(e(B).sensorDirtyTime,30)]),l(Ve,qe)},it=Ve=>{var qe=br();l(Ve,qe)};_(Ye,Ve=>{e(B)?Ve(We):Ve(it,!1)})}g(()=>{u(ft,`${e(ye)??""}%`),Tt(Ze,e(ye))}),l(ut,Ke)};_(W,ut=>{e(ue)==="settings"&&ut(Qe)},!0)}l(H,V)};_(He,H=>{e(ue)==="rooms"?H(Ge):H(Pe,!1)},!0)}l(je,Ie)};_(et,je=>{e(ue)==="controls"?je(Me):je(Ue,!1)})}g(je=>{x(q,1,`text-3xl font-bold mt-1 ${i.status.battery>20?"text-content-primary":"text-error"}`),u(ge,`${i.status.battery??""}%`),u(ze,je),x(he,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(ue)==="controls"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`),x(Ae,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(ue)==="rooms"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`),x(Fe,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(ue)==="settings"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`)},[()=>Q(i.status.fanPower)]),l(oe,X)},we=oe=>{var X=wr();l(oe,X)};_(Ce,oe=>{i.status?oe(Z):oe(we,!1)})}t(F),g(oe=>{x(fe,1,`font-medium ${e(Te).color??""}`),u(_e,oe)},[()=>i.status?U(i.status.state):"Offline"]),l(c,F)},$$slots:{default:!0}}),g(()=>{var c,m,F,ve;x(P,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),p=x(s,1,`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${e(Te).bg??""} ${e(Te).color??""}`,null,p,{"status-active":((c=i.status)==null?void 0:c.state)===5||((m=i.status)==null?void 0:m.state)===11||((F=i.status)==null?void 0:F.state)===17||((ve=i.status)==null?void 0:ve.state)===18})}),l(ee,f),vt()}bt(["click","keydown","input"]);var Tr=d('<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Temperature</span> <p class="text-2xl font-bold mt-1 text-device-sensors-text"> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Humidity</span> <p class="text-2xl font-bold mt-1 text-info"> </p></div></div>'),Cr=d('<div class="bg-surface-recessed rounded-xl p-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Battery</span> <span> </span></div> <div class="mt-2 h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div>'),zr=d('<div class="space-y-4"><div><span class="text-4xl"> </span> <p> </p> <p class="text-sm text-content-secondary mt-1"> </p></div> <!> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Type</span> <span class="font-medium text-content-primary"> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Online</span> <span> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Device ID</span> <span class="font-mono text-xs text-content-tertiary"> </span></div></div></div>'),jr=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div> </div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <p> </p></div> <div></div></div></div> <!>',1);function Pr(ee,i){dt(i,!0);let j=ct(i,"compact",3,!1),h=G(()=>zt(i.device.name)),n=R(!1),C=G(()=>()=>{if(!i.device.last_status)return null;try{return JSON.parse(i.device.last_status)}catch{return null}});const $={sj:{label:"Water",icon:"üíß"},mcs:{label:"Door",icon:"üö™"},wsdcg:{label:"Climate",icon:"üå°Ô∏è"},wfcon:{label:"Gateway",icon:"üì°"},cz:{label:"Remote",icon:"üì∫"}},J=15;function k(S,Y){if(!S)return Y==="sj"||Y==="mcs"?{text:"Monitoring",alert:!1,color:"text-content-tertiary",lowBattery:!1}:{text:"No data",alert:!1,color:"text-content-tertiary",lowBattery:!1};switch(Y){case"sj":{const M=S[1],T=M==="alarm"||M==="1"||M===1,v=S[4],b=v!==void 0&&v<=J;return T?{text:"Water detected!",alert:!0,color:"text-error",lowBattery:b,batteryPercent:v}:{text:b?`Dry ¬∑ ${v}%`:"Dry",alert:!1,color:"text-success",lowBattery:b,batteryPercent:v}}case"mcs":{const M=S[101]===!0||S[1]===!0,T=S[103]||S[4],v=T!==void 0&&T<=J;return{text:v?`${M?"Open":"Closed"} ¬∑ ${T}%`:M?"Open":"Closed",alert:M,color:M?"text-warning":"text-success",lowBattery:v,batteryPercent:T}}case"wsdcg":{const M=S[103],T=S[102];return M!==void 0&&T!==void 0?{text:`${(M/100).toFixed(1)}¬∞C ¬∑ ${T}%`,alert:!1,color:"text-device-sensors-text",lowBattery:!1}:{text:"N/A",alert:!1,color:"text-content-tertiary",lowBattery:!1}}default:return{text:i.device.online?"Online":"Offline",alert:!1,color:i.device.online?"text-success":"text-content-tertiary",lowBattery:!1}}}let O=G(()=>$[i.device.category]||{label:i.device.category,icon:"üì±"}),w=G(()=>k(e(C)(),i.device.category));var N=jr(),z=ce(N);z.__click=()=>o(n,!0),z.__keydown=S=>S.key==="Enter"&&o(n,!0);var ie=a(z),E=a(ie);let D;var K=a(E,!0);t(E);var ye=r(E,2),B=a(ye),ue=a(B,!0);t(B);var Se=r(B,2),Re=a(Se,!0);t(Se),t(ye);var Be=r(ye,2);let U;t(ie),t(z);var Q=r(z,2);St(Q,{get open(){return e(n)},onclose:()=>o(n,!1),get title(){return e(h)},children:(S,Y)=>{var M=zr(),T=a(M),v=a(T),b=a(v,!0);t(v);var te=r(v,2),ae=a(te,!0);t(te);var me=r(te,2),Oe=a(me);t(me),t(T);var ke=r(T,2);{var Je=se=>{const c=G(()=>e(C)());var m=gt(),F=ce(m);{var ve=fe=>{var _e=Tr(),Ce=a(_e),Z=r(a(Ce),2),we=a(Z);t(Z),t(Ce);var oe=r(Ce,2),X=r(a(oe),2),L=a(X);t(X),t(oe),t(_e),g(I=>{u(we,`${I??""}¬∞C`),u(L,`${e(c)[102]??""}%`)},[()=>(e(c)[103]/100).toFixed(1)]),l(fe,_e)};_(F,fe=>{e(c)&&fe(ve)})}l(se,m)};_(ke,se=>{i.device.category==="wsdcg"&&se(Je)})}var Te=r(ke,2);{var f=se=>{const c=G(()=>e(C)());var m=gt(),F=ce(m);{var ve=fe=>{const _e=G(()=>e(c)[4]||e(c)[103]);var Ce=gt(),Z=ce(Ce);{var we=oe=>{var X=Cr(),L=a(X),I=r(a(L),2),q=a(I);t(I),t(L);var ge=r(L,2),Ee=a(ge);t(ge),t(X),g(()=>{x(I,1,`font-bold ${e(_e)>20?"text-success":"text-error"}`),u(q,`${e(_e)??""}%`),x(Ee,1,`h-full rounded-full transition-all ${e(_e)>20?"bg-success":"bg-error"}`),Mt(Ee,`width: ${e(_e)??""}%`)}),l(oe,X)};_(Z,oe=>{e(_e)!==void 0&&oe(we)})}l(fe,Ce)};_(F,fe=>{e(c)&&fe(ve)})}l(se,m)};_(Te,se=>{(i.device.category==="sj"||i.device.category==="mcs")&&se(f)})}var P=r(Te,2),re=a(P),s=r(a(re),2),p=a(s,!0);t(s),t(re);var y=r(re,2),A=r(a(y),2),le=a(A,!0);t(A),t(y);var Le=r(y,2),De=r(a(Le),2),de=a(De);t(De),t(Le),t(P),t(M),g(se=>{x(T,1,`rounded-xl p-6 text-center ${e(w).alert?"bg-error/20":"bg-surface-recessed"}`),u(b,e(O).icon),x(te,1,`text-2xl font-bold mt-2 ${e(w).color??""}`),u(ae,e(w).text),u(Oe,`${e(O).label??""} Sensor`),u(p,e(O).label),x(A,1,i.device.online?"text-success":"text-error"),u(le,i.device.online?"Yes":"No"),u(de,`${se??""}...`)},[()=>i.device.id.slice(0,12)]),l(S,M)},$$slots:{default:!0}}),g(()=>{x(z,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer
         ${e(w).lowBattery?"border-warning/50 bg-warning/10":""}`),D=x(E,1,`w-10 h-10 rounded-xl flex items-center justify-center text-base shrink-0
             ${e(w).alert?"bg-error/20":e(w).lowBattery?"bg-warning/20":"badge-sensors"}`,null,D,{"status-active":e(w).alert}),u(K,e(O).icon),u(ue,e(h)),x(Se,1,`text-xs ${(e(w).lowBattery?"text-warning":e(w).color)??""}`),u(Re,e(w).text),U=x(Be,1,`w-2 h-2 rounded-full shrink-0
             ${i.device.online?"bg-success":"bg-content-tertiary"}`,null,U,{"status-dot":i.device.online})}),l(ee,N),vt()}bt(["click","keydown"]);var Rr=ra('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd"></path></svg>'),Br=ra('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M5.05 3.636a1 1 0 010 1.414 7 7 0 000 9.9 1 1 0 11-1.414 1.414 9 9 0 010-12.728 1 1 0 011.414 0zm9.9 0a1 1 0 011.414 0 9 9 0 010 12.728 1 1 0 11-1.414-1.414 7 7 0 000-9.9 1 1 0 010-1.414zM7.879 6.464a1 1 0 010 1.414 3 3 0 000 4.243 1 1 0 11-1.415 1.414 5 5 0 010-7.07 1 1 0 011.415 0zm4.242 0a1 1 0 011.415 0 5 5 0 010 7.072 1 1 0 01-1.415-1.415 3 3 0 000-4.242 1 1 0 010-1.415zM10 9a1 1 0 011 1v.01a1 1 0 11-2 0V10a1 1 0 011-1z"></path></svg>'),Or=d('<p class="text-xs text-content-secondary"> </p>'),Dr=d('<p class="text-xs text-content-secondary">No data</p>'),Ar=d('<input type="number" min="5" max="30" step="0.5" class="text-3xl font-bold w-24 text-center bg-transparent border-b-2 border-device-climate-heat-text outline-none text-content-primary [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/>'),Lr=d('<button class="text-3xl font-bold w-24 text-center text-content-primary hover:text-device-climate-heat-text transition-colors cursor-text" title="Click to edit"> </button>'),Vr=d('<span class="absolute -top-1 -right-1 w-2 h-2 bg-device-climate-heat-text rounded-full animate-pulse"></span>'),Nr=d('<span class="absolute -top-1 -right-1 w-2 h-2 bg-error rounded-full"></span>'),Er=d("<button> </button>"),Ir=d(`<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary uppercase tracking-wide">Current</span> <p class="text-3xl font-bold mt-1 text-content-primary"> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary uppercase tracking-wide">Target</span> <p class="text-3xl font-bold mt-1 text-device-climate-heat-text"> </p></div></div> <div><p class="text-sm text-content-secondary mb-3">Set Temperature</p> <div class="flex items-center justify-center gap-4"><button class="w-14 h-14 rounded-full badge-climate-cool text-2xl font-medium
                   hover:opacity-80 disabled:opacity-50 transition-all">‚àí</button> <div class="relative"><!> <!> <!></div> <button class="w-14 h-14 rounded-full badge-climate-heat text-2xl font-medium
                   hover:opacity-80 disabled:opacity-50 transition-all">+</button></div></div> <div><p class="text-sm text-content-secondary mb-2">Quick Set</p> <div class="grid grid-cols-4 gap-2"></div></div>`,1),Wr=d('<div class="text-center py-8 text-content-secondary">No data available</div>'),$r=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Valve</span> <span> </span></div> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Device ID</span> <span class="font-mono text-xs text-content-tertiary"> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Online</span> <span> </span></div></div></div>'),Fr=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><!></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function Hr(ee,i){dt(i,!0);let j=ct(i,"device",7),h=ct(i,"compact",3,!1),n=G(()=>zt(j().name)),C=R(!1),$=R(null),J=R(!1),k=R(!1),O=R(!1),w=R(""),N=R(null),z=G(()=>()=>{if(!j().last_status)return null;try{return JSON.parse(j().last_status)}catch{return null}}),ie=G(()=>{var s;return(s=e(z)())!=null&&s["5"]?e(z)()[5]/10:null}),E=G(()=>{var s;return(s=e(z)())!=null&&s["4"]?e(z)()[4]/10:null}),D=G(()=>e($)??e(E)),K=G(()=>{var s;return((s=e(z)())==null?void 0:s["3"])||"unknown"});const[ye,B]=kt(s=>{ue(s)},500);async function ue(s){o(J,!0),o(k,!1);const p=e(E);try{await fetch(`/api/devices/${j().id}/control`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dps:4,value:Math.round(s*10)})}),Se()}catch(y){console.error(y),o(k,!0),o($,p,!0),setTimeout(()=>o(k,!1),3e3)}}async function Se(){try{const s=await fetch(`/api/devices/${j().id}/status`);if(s.ok){const p=await s.json();j().last_status=JSON.stringify(p.status),o($,null)}}catch(s){console.error(s)}o(J,!1)}function Re(s){if(e(D)===null)return;const p=Math.max(5,Math.min(30,e(D)+s));o($,p,!0),ye(p)}function Be(s){o($,s,!0),B(),ue(s)}function U(){e(D)!==null&&(o(w,e(D).toString(),!0),o(O,!0),La().then(()=>{var s;return(s=e(N))==null?void 0:s.select()}))}function Q(){const s=parseFloat(e(w));if(!isNaN(s)&&s>=5&&s<=30){const p=Math.round(s*2)/2;Be(p)}o(O,!1)}function S(){o(O,!1)}var Y=Fr(),M=ce(Y);M.__click=()=>o(C,!0),M.__keydown=s=>s.key==="Enter"&&o(C,!0);var T=a(M),v=a(T);let b;var te=a(v);{var ae=s=>{var p=Rr();l(s,p)},me=s=>{var p=Br();l(s,p)};_(te,s=>{e(K)==="opened"?s(ae):s(me,!1)})}t(v);var Oe=r(v,2),ke=a(Oe),Je=a(ke,!0);t(ke);var Te=r(ke,2);{var f=s=>{var p=Or(),y=a(p);t(p),g(()=>u(y,`${e(ie)??""}¬∞C ${e(K)==="opened"?"‚Üí":"¬∑"} ${e(D)??""}¬∞C`)),l(s,p)},P=s=>{var p=Dr();l(s,p)};_(Te,s=>{e(ie)!==null?s(f):s(P,!1)})}t(Oe),t(T),t(M);var re=r(M,2);St(re,{get open(){return e(C)},onclose:()=>o(C,!1),get title(){return e(n)},children:(s,p)=>{var y=$r(),A=a(y),le=r(a(A),2),Le=a(le,!0);t(le),t(A);var De=r(A,2);{var de=Z=>{var we=Ir(),oe=ce(we),X=a(oe),L=r(a(X),2),I=a(L);t(L),t(X);var q=r(X,2),ge=r(a(q),2),Ee=a(ge);t(ge),t(q),t(oe);var Xe=r(oe,2),ze=r(a(Xe),2),be=a(ze);be.__click=()=>Re(-.5);var he=r(be,2),Ae=a(he);{var Fe=H=>{var V=Ar();wt(V),V.__keydown=W=>{W.key==="Enter"&&Q(),W.key==="Escape"&&S()},Ba(V,W=>o(N,W),()=>e(N)),aa("blur",V,Q),Aa(V,()=>e(w),W=>o(w,W)),l(H,V)},et=H=>{var V=Lr();V.__click=U;var W=a(V);t(V),g(()=>u(W,`${e(D)??""}¬∞C`)),l(H,V)};_(Ae,H=>{e(O)?H(Fe):H(et,!1)})}var Me=r(Ae,2);{var Ue=H=>{var V=Vr();l(H,V)};_(Me,H=>{e(J)&&H(Ue)})}var je=r(Me,2);{var Ie=H=>{var V=Nr();l(H,V)};_(je,H=>{e(k)&&H(Ie)})}t(he);var He=r(he,2);He.__click=()=>Re(.5),t(ze),t(Xe);var Ge=r(Xe,2),Pe=r(a(Ge),2);$e(Pe,20,()=>[15,18,21,24],st,(H,V)=>{var W=Er();W.__click=()=>Be(V);var Qe=a(W);t(W),g(()=>{x(W,1,`py-2 text-sm rounded-lg transition-colors
                     ${e(D)===V?"badge-climate-heat":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Qe,`${V??""}¬∞`)}),l(H,W)}),t(Pe),t(Ge),g(()=>{u(I,`${e(ie)??""}¬∞C`),u(Ee,`${e(D)??""}¬∞C`),be.disabled=e(D)!==null&&e(D)<=5,He.disabled=e(D)!==null&&e(D)>=30}),l(Z,we)},se=Z=>{var we=Wr();l(Z,we)};_(De,Z=>{e(ie)!==null&&e(D)!==null?Z(de):Z(se,!1)})}var c=r(De,2),m=a(c),F=r(a(m),2),ve=a(F);t(F),t(m);var fe=r(m,2),_e=r(a(fe),2),Ce=a(_e,!0);t(_e),t(fe),t(c),t(y),g(Z=>{x(le,1,`font-medium ${e(K)==="opened"?"text-device-climate-heat-text":"text-device-climate-cool-text"}`),u(Le,e(K)==="opened"?"Heating":"Idle"),u(ve,`${Z??""}...`),x(_e,1,j().online?"text-success":"text-error"),u(Ce,j().online?"Yes":"No")},[()=>j().id.slice(0,12)]),l(s,y)},$$slots:{default:!0}}),g(()=>{x(M,1,`card transition-card hover:scale-[1.02] ${h()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b=x(v,1,`w-10 h-10 rounded-xl flex items-center justify-center shrink-0
             ${e(K)==="opened"?"badge-climate-heat":"badge-climate-cool"}`,null,b,{"status-active":e(K)==="opened"}),u(Je,e(n))}),l(ee,Y),vt()}bt(["click","keydown"]);var Gr=d('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-audio-text rounded-full animate-pulse"></span>'),Kr=d('<p class="text-xs text-content-secondary"> </p>'),Yr=d('<p class="text-xs text-content-secondary"> </p>'),qr=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-audio-text rounded-full animate-pulse"></span>'),Jr=d("<button> </button>"),Ur=d("<button> </button>"),Qr=d('<div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Volume</span> <span class="font-medium text-content-primary"> </span></div> <div class="flex gap-2 items-center"><input type="range" min="0" max="100" class="flex-1"/> <button> </button></div></div> <div><p class="text-sm text-content-secondary mb-2">Input</p> <div class="grid grid-cols-2 gap-2"></div></div> <div><p class="text-sm text-content-secondary mb-2">Sound Program</p> <div class="grid grid-cols-3 gap-2"></div></div> <div><p class="text-sm text-content-secondary mb-2">Audio</p> <div class="grid grid-cols-2 gap-2"><button>Clear Voice</button> <button>Bass Ext.</button></div></div> <div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Subwoofer</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="-6" max="6" step="1" class="w-full"/></div>',1),Zr=d("<button> <!></button> <!>",1),Xr=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),es=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function ts(ee,i){dt(i,!0);let j=ct(i,"compact",3,!1),h=G(()=>zt(i.device.name)),n=R(null),C=R(!1),$=R(!1),J=R(null),k=R(!1),O=R(null),w=R(null),N=G(()=>{var s;return e(J)??((s=e(n))==null?void 0:s.power)??"standby"}),z=G(()=>{var s;return e(O)??((s=e(n))==null?void 0:s.volume)??0}),ie=G(()=>{var s;return e(w)??((s=e(n))==null?void 0:s.subwoofer_volume)??0});Ct(()=>{if(!e(C)&&i.device.last_status)try{o(n,JSON.parse(i.device.last_status),!0)}catch{}}),Ct(()=>{e(C)||(o(C,!0),ea(i.device.id).then(s=>o(n,s.status,!0)).catch(()=>{}))});async function E(){const s=e(N)==="on"?"standby":"on";o(J,s,!0),o(k,!0);try{await lt(i.device.id,{power:s==="on"}),D()}catch(p){console.error(p),o(J,null),o(k,!1)}}async function D(){try{const s=await ea(i.device.id);o(n,s.status,!0),o(J,null)}catch(s){console.error(s)}o(k,!1)}const[K]=kt(async s=>{try{await lt(i.device.id,{volume:s}),e(n)&&o(n,{...e(n),volume:s},!0)}catch(p){console.error(p)}o(O,null)},300),[ye]=kt(async s=>{try{await lt(i.device.id,{subwoofer_volume:s}),e(n)&&o(n,{...e(n),subwoofer_volume:s},!0)}catch(p){console.error(p)}o(w,null)},300);function B(s){o(O,s,!0),K(s)}function ue(s){o(w,s,!0),ye(s)}async function Se(){var p;const s=!((p=e(n))!=null&&p.mute);e(n)&&o(n,{...e(n),mute:s},!0);try{await lt(i.device.id,{mute:s})}catch(y){console.error(y),e(n)&&o(n,{...e(n),mute:!s},!0)}}async function Re(s){var y;const p=(y=e(n))==null?void 0:y.input;e(n)&&o(n,{...e(n),input:s},!0);try{await lt(i.device.id,{input:s})}catch(A){console.error(A),e(n)&&p&&o(n,{...e(n),input:p},!0)}}async function Be(s){var y;const p=(y=e(n))==null?void 0:y.sound_program;e(n)&&o(n,{...e(n),sound_program:s},!0);try{await lt(i.device.id,{sound_program:s})}catch(A){console.error(A),e(n)&&p&&o(n,{...e(n),sound_program:p},!0)}}async function U(){var p;const s=!((p=e(n))!=null&&p.clear_voice);e(n)&&o(n,{...e(n),clear_voice:s},!0);try{await lt(i.device.id,{clear_voice:s})}catch(y){console.error(y),e(n)&&o(n,{...e(n),clear_voice:!s},!0)}}async function Q(){var p;const s=!((p=e(n))!=null&&p.bass_extension);e(n)&&o(n,{...e(n),bass_extension:s},!0);try{await lt(i.device.id,{bass_extension:s})}catch(y){console.error(y),e(n)&&o(n,{...e(n),bass_extension:!s},!0)}}const S=["tv","bluetooth"],Y=[{id:"movie",label:"Movie"},{id:"music",label:"Music"},{id:"sports",label:"Sports"},{id:"game",label:"Game"},{id:"tv_program",label:"TV"},{id:"stereo",label:"Stereo"}];var M=es(),T=ce(M);T.__click=()=>o($,!0),T.__keydown=s=>s.key==="Enter"&&o($,!0);var v=a(T),b=a(v);b.__click=s=>{s.stopPropagation(),E()};let te;var ae=r(a(b),2);{var me=s=>{var p=Gr();l(s,p)};_(ae,s=>{e(k)&&s(me)})}t(b);var Oe=r(b,2),ke=a(Oe),Je=a(ke,!0);t(ke);var Te=r(ke,2);{var f=s=>{var p=Kr(),y=a(p);t(p),g(()=>{var A,le;return u(y,`${(A=e(n))!=null&&A.mute?"Muted":`${e(z)}%`} ¬∑ ${((le=e(n))==null?void 0:le.input)??""}`)}),l(s,p)},P=s=>{var p=Yr(),y=a(p,!0);t(p),g(()=>u(y,e(n)?"Standby":"Offline")),l(s,p)};_(Te,s=>{e(N)==="on"?s(f):s(P,!1)})}t(Oe),t(v),t(T);var re=r(T,2);St(re,{get open(){return e($)},onclose:()=>o($,!1),get title(){return e(h)},children:(s,p)=>{var y=Xr(),A=a(y),le=r(a(A),2),Le=a(le,!0);t(le),t(A);var De=r(A,2);{var de=se=>{var c=Zr(),m=ce(c);m.__click=E;var F=a(m),ve=r(F);{var fe=Z=>{var we=qr();l(Z,we)};_(ve,Z=>{e(k)&&Z(fe)})}t(m);var _e=r(m,2);{var Ce=Z=>{var we=Qr(),oe=ce(we),X=a(oe),L=r(a(X),2),I=a(L,!0);t(L),t(X);var q=r(X,2),ge=a(q);wt(ge),ge.__input=H=>B(parseInt(H.currentTarget.value));var Ee=r(ge,2);Ee.__click=Se;var Xe=a(Ee,!0);t(Ee),t(q),t(oe);var ze=r(oe,2),be=r(a(ze),2);$e(be,21,()=>S,st,(H,V)=>{var W=Jr();W.__click=()=>Re(e(V));var Qe=a(W,!0);t(W),g(()=>{x(W,1,`py-3 text-sm rounded-lg transition-colors uppercase
                       ${e(n).input===e(V)?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Qe,e(V)==="bluetooth"?"BT":"TV")}),l(H,W)}),t(be),t(ze);var he=r(ze,2),Ae=r(a(he),2);$e(Ae,21,()=>Y,st,(H,V)=>{var W=Ur();W.__click=()=>Be(e(V).id);var Qe=a(W,!0);t(W),g(()=>{x(W,1,`py-2.5 text-sm rounded-lg transition-colors
                       ${e(n).sound_program===e(V).id?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Qe,e(V).label)}),l(H,W)}),t(Ae),t(he);var Fe=r(he,2),et=r(a(Fe),2),Me=a(et);Me.__click=U;var Ue=r(Me,2);Ue.__click=Q,t(et),t(Fe);var je=r(Fe,2),Ie=a(je),He=r(a(Ie),2),Ge=a(He);t(He),t(Ie);var Pe=r(Ie,2);wt(Pe),Pe.__input=H=>ue(parseInt(H.currentTarget.value)),t(je),g(()=>{u(I,e(n).mute?"Muted":`${e(z)}%`),Tt(ge,e(z)),x(Ee,1,`w-10 h-10 rounded-lg transition-colors text-lg
                     ${e(n).mute?"bg-error/20 text-error":"bg-surface-recessed text-content-secondary"}
                     hover:bg-stroke-default`),u(Xe,e(n).mute?"üîá":"üîä"),x(Me,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(n).clear_voice?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),x(Ue,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(n).bass_extension?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Ge,`${e(ie)>0?"+":""}${e(ie)??""}`),Tt(Pe,e(ie))}),l(Z,we)};_(_e,Z=>{e(N)==="on"&&Z(Ce)})}g(()=>{x(m,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(N)==="on"?"badge-audio":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),u(F,`${e(N)==="on"?"Turn Off":"Turn On"} `)}),l(se,c)};_(De,se=>{e(n)&&se(de)})}t(y),g(()=>{x(le,1,`font-medium ${e(N)==="on"?"text-device-audio-text":"text-content-tertiary"}`),u(Le,e(N)==="on"?"On":e(n)?"Standby":"Offline")}),l(s,y)},$$slots:{default:!0}}),g(()=>{x(T,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b.disabled=!e(n),te=x(b,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(N)==="on"?"badge-audio":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,te,{"status-active":e(N)==="on"}),u(Je,e(h))}),l(ee,M),vt()}bt(["click","keydown","input"]);var as=d('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-air-text rounded-full animate-pulse"></span>'),rs=d('<p class="text-xs text-content-secondary"> </p>'),ss=d('<p class="text-xs text-content-secondary"> </p>'),ns=d("<div> </div>"),os=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-air-text rounded-full animate-pulse"></span>'),is=d("<button> </button>"),ls=d('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Humidity</span> <p class="text-lg font-bold mt-1 text-content-primary"> </p></div>'),cs=d('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Temp</span> <p class="text-lg font-bold mt-1 text-content-primary"> </p></div>'),ds=d('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Filter</span> <p> </p></div>'),vs=d('<div><span class="text-xs uppercase tracking-wide opacity-80">Air Quality Index</span> <p class="text-4xl font-bold mt-1"> </p> <p class="text-sm mt-1"> </p></div> <div><p class="text-sm text-content-secondary mb-2">Mode</p> <div class="grid grid-cols-3 gap-2"></div></div> <div class="grid grid-cols-3 gap-3"><!> <!> <!></div>',1),us=d("<button> <!></button> <!>",1),fs=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),ps=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.414 1.415l.708-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate">Air Purifier</h4> <!></div> <!></div></div> <!>',1);function ms(ee,i){dt(i,!0);let j=ct(i,"compact",3,!1),h=G(()=>ne.airPurifier),n=R(!1),C=R(null),$=R(null),J=R(!1),k=G(()=>{var v;return e(C)??((v=e(h))==null?void 0:v.power)??!1}),O=G(()=>{var v;return e($)??((v=e(h))==null?void 0:v.mode)??"auto"});async function w(){const v=!e(k);o(C,v),o(J,!0);try{await ta({power:v}),ne.refreshAirPurifier()}catch(b){console.error(b),o(C,null)}o(J,!1),o(C,null)}async function N(v){const b=e(O);o($,v,!0);try{await ta({mode:v}),ne.refreshAirPurifier()}catch(te){console.error(te),o($,b,!0)}o($,null)}function z(v){return v<=50?"text-success bg-success/20":v<=100?"text-warning bg-warning/20":v<=150?"text-device-climate-heat-text bg-device-climate-heat-bg":"text-error bg-error/20"}function ie(v){return v<=50?"Good":v<=100?"Moderate":v<=150?"Unhealthy":"Very Unhealthy"}const E={auto:"Auto",silent:"Night",favorite:"Manual"};var D=ps(),K=ce(D);K.__click=()=>o(n,!0),K.__keydown=v=>v.key==="Enter"&&o(n,!0);var ye=a(K),B=a(ye);B.__click=v=>{v.stopPropagation(),w()};let ue;var Se=r(a(B),2);{var Re=v=>{var b=as();l(v,b)};_(Se,v=>{e(J)&&v(Re)})}t(B);var Be=r(B,2),U=r(a(Be),2);{var Q=v=>{var b=rs(),te=a(b);t(b),g(()=>{var ae;return u(te,`${(E[e(O)]||e(O))??""} ¬∑ ${((ae=e(h))==null?void 0:ae.aqi)??0??""} AQI`)}),l(v,b)},S=v=>{var b=ss(),te=a(b,!0);t(b),g(()=>u(te,e(h)?"Off":"Offline")),l(v,b)};_(U,v=>{e(k)?v(Q):v(S,!1)})}t(Be);var Y=r(Be,2);{var M=v=>{var b=ns(),te=a(b,!0);t(b),g(ae=>{x(b,1,`px-2 py-1 rounded-md text-xs font-medium shrink-0 ${ae??""}`),u(te,e(h).aqi)},[()=>z(e(h).aqi)]),l(v,b)};_(Y,v=>{var b;j()&&((b=e(h))!=null&&b.power)&&v(M)})}t(ye),t(K);var T=r(K,2);St(T,{get open(){return e(n)},onclose:()=>o(n,!1),title:"Air Purifier",children:(v,b)=>{var te=fs(),ae=a(te),me=r(a(ae),2),Oe=a(me,!0);t(me),t(ae);var ke=r(ae,2);{var Je=Te=>{var f=us(),P=ce(f);P.__click=w;var re=a(P),s=r(re);{var p=le=>{var Le=os();l(le,Le)};_(s,le=>{e(J)&&le(p)})}t(P);var y=r(P,2);{var A=le=>{var Le=vs(),De=ce(Le),de=r(a(De),2),se=a(de,!0);t(de);var c=r(de,2),m=a(c,!0);t(c),t(De);var F=r(De,2),ve=r(a(F),2);$e(ve,20,()=>[{value:"auto",label:"Auto"},{value:"silent",label:"Night"},{value:"favorite",label:"Manual"}],st,(L,I)=>{var q=is();q.__click=()=>N(I.value);var ge=a(q,!0);t(q),g(()=>{x(q,1,`py-3 text-sm rounded-lg transition-colors
                       ${e(O)===I.value?"badge-air":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(ge,I.label)}),l(L,q)}),t(ve),t(F);var fe=r(F,2),_e=a(fe);{var Ce=L=>{var I=ls(),q=r(a(I),2),ge=a(q);t(q),t(I),g(()=>u(ge,`${e(h).humidity??""}%`)),l(L,I)};_(_e,L=>{e(h).humidity!==void 0&&L(Ce)})}var Z=r(_e,2);{var we=L=>{var I=cs(),q=r(a(I),2),ge=a(q);t(q),t(I),g(()=>u(ge,`${e(h).temperature??""}¬∞C`)),l(L,I)};_(Z,L=>{e(h).temperature!==void 0&&L(we)})}var oe=r(Z,2);{var X=L=>{var I=ds(),q=r(a(I),2),ge=a(q);t(q),t(I),g(()=>{x(q,1,`text-lg font-bold mt-1 ${e(h).filter_life<20?"text-error":"text-content-primary"}`),u(ge,`${e(h).filter_life??""}%`)}),l(L,I)};_(oe,L=>{e(h).filter_life!==void 0&&L(X)})}t(fe),g((L,I)=>{x(De,1,`rounded-xl p-4 text-center ${L??""}`),u(se,e(h).aqi),u(m,I)},[()=>z(e(h).aqi),()=>ie(e(h).aqi)]),l(le,Le)};_(y,le=>{e(k)&&le(A)})}g(()=>{x(P,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(k)?"badge-air":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),u(re,`${e(k)?"Turn Off":"Turn On"} `)}),l(Te,f)};_(ke,Te=>{e(h)&&Te(Je)})}t(te),g(()=>{x(me,1,`font-medium ${e(k)?"text-device-air-text":"text-content-tertiary"}`),u(Oe,e(k)?"On":e(h)?"Off":"Offline")}),l(v,te)},$$slots:{default:!0}}),g(()=>{x(K,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),B.disabled=!e(h),ue=x(B,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(k)?"badge-air":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,ue,{"status-active":e(k)})}),l(ee,D),vt()}bt(["click","keydown"]);var xs=d('<div class="card rounded-xl p-2.5"><div class="flex items-center gap-2.5"><div class="w-9 h-9 rounded-lg bg-surface-recessed animate-pulse"></div> <div class="flex-1 space-y-1.5"><div class="w-20 h-3.5 rounded bg-surface-recessed animate-pulse"></div> <div class="w-14 h-3 rounded bg-surface-recessed animate-pulse"></div></div></div></div>'),_s=d('<section><div class="w-20 h-5 rounded bg-surface-recessed animate-pulse mb-3"></div> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),gs=d('<div class="space-y-6"></div>'),bs=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-lights-text">üí°</span> Lights <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),hs=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-climate-heat-text">üå°Ô∏è</span> Climate <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!> <!></div></section>'),ys=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-sensors-text">üì°</span> Sensors <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ws=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-audio-text">üîä</span> Audio <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ks=d('<!> <!> <!> <!> <section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-robot-text">ü§ñ</span> Robot <span class="text-xs text-content-tertiary">(1)</span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!></div></section>',1),Ss=d('<div class="pb-24 space-y-6"><!></div>');function Ls(ee,i){dt(i,!0);let j=G(()=>ne.lamps.filter(w=>w.category==="lamp")),h=G(()=>ne.tuyaDevices.filter(w=>w.category==="wkf")),n=G(()=>ne.tuyaDevices.filter(w=>["sj","mcs","wsdcg"].includes(w.category))),C=G(()=>ne.lamps.length>0||ne.tuyaDevices.length>0||ne.yamahaDevices.length>0);var $=Ss();Ra("1uha8ag",w=>{ya(()=>{wa.title="Smart Home"})});var J=a($);{var k=w=>{var N=gs();$e(N,20,()=>Array(3),st,(z,ie)=>{var E=_s(),D=r(a(E),2);$e(D,20,()=>Array(4),st,(K,ye,B,ue)=>{var Se=xs();l(K,Se)}),t(D),t(E),l(z,E)}),t(N),l(w,N)},O=w=>{var N=ks(),z=ce(N);{var ie=U=>{var Q=bs(),S=a(Q),Y=r(a(S),2),M=a(Y);t(Y),t(S);var T=r(S,2);$e(T,21,()=>e(j),v=>v.id,(v,b)=>{Xa(v,{get lamp(){return e(b)},compact:!0})}),t(T),t(Q),g(()=>u(M,`(${e(j).length??""})`)),l(U,Q)};_(z,U=>{e(j).length>0&&U(ie)})}var E=r(z,2);{var D=U=>{var Q=hs(),S=a(Q),Y=r(a(S),2),M=a(Y);t(Y),t(S);var T=r(S,2),v=a(T);$e(v,17,()=>e(h),ae=>ae.id,(ae,me)=>{Hr(ae,{get device(){return e(me)},compact:!0})});var b=r(v,2);{var te=ae=>{ms(ae,{compact:!0})};_(b,ae=>{ne.airPurifier&&ae(te)})}t(T),t(Q),g(()=>u(M,`(${e(h).length+(ne.airPurifier?1:0)})`)),l(U,Q)};_(E,U=>{(e(h).length>0||ne.airPurifier)&&U(D)})}var K=r(E,2);{var ye=U=>{var Q=ys(),S=a(Q),Y=r(a(S),2),M=a(Y);t(Y),t(S);var T=r(S,2);$e(T,21,()=>e(n),v=>v.id,(v,b)=>{Pr(v,{get device(){return e(b)},compact:!0})}),t(T),t(Q),g(()=>u(M,`(${e(n).length??""})`)),l(U,Q)};_(K,U=>{e(n).length>0&&U(ye)})}var B=r(K,2);{var ue=U=>{var Q=ws(),S=a(Q),Y=r(a(S),2),M=a(Y);t(Y),t(S);var T=r(S,2);$e(T,21,()=>ne.yamahaDevices,v=>v.id,(v,b)=>{ts(v,{get device(){return e(b)},compact:!0})}),t(T),t(Q),g(()=>u(M,`(${ne.yamahaDevices.length??""})`)),l(U,Q)};_(B,U=>{ne.yamahaDevices.length>0&&U(ue)})}var Se=r(B,2),Re=r(a(Se),2),Be=a(Re);Mr(Be,{get status(){return ne.roborock},compact:!0}),t(Re),t(Se),l(w,N)};_(J,w=>{ne.loading&&!e(C)?w(k):w(O,!1)})}t($),l(ee,$),vt()}export{Ls as component};
