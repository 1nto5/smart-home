import{d as $e,c as Ze,e as oa,a as n,f as u,s as l,t as Wt,b as it}from"../chunks/BdGXCaaf.js";import{B as It,$ as Je,aD as Z,a5 as Ue,a0 as a,a1 as t,a2 as r,a4 as h,b5 as la,a6 as st,b as e,a3 as ce,s as x,a9 as re,aN as ht,c as Et,a7 as da,a8 as va}from"../chunks/CKtoZ9Il.js";import{i as j}from"../chunks/CbCO2Vro.js";import{f as bt,s as Q,h as Xe,e as Ne,i as Ke,j as ca,k as ua,l as Ht,m as ma,n as xa,o as pa,p as ga,q as _a,r as fa,u as Gt,v as Ye,w as Ft}from"../chunks/vHFBLGnf.js";import{h as ba}from"../chunks/D6iQrA29.js";import{s as y,r as rt,b as nt}from"../chunks/C2tPD3ws.js";import{p as qe}from"../chunks/ChVwLISL.js";import{s as ha}from"../chunks/b25NGLIX.js";import{a as ya}from"../chunks/CxA4e2Oe.js";import{b as wa}from"../chunks/CMJw4TJe.js";function at(X,s,N,d){var i=X.__style;if(It||i!==s){var w=ya(s,d);(!It||w!==X.getAttribute("style"))&&(w==null?X.removeAttribute("style"):X.style.cssText=w),X.__style=s}return d}const za={"korytarz 1":"Hallway 1","korytarz 2":"Hallway 2",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",jadalnia:"Dining Room",gabinet:"Study",pralnia:"Laundry","Czujnik zalania kuchnia":"Water Sensor Kitchen","Czujnik zalania ≈Çazienka":"Water Sensor Bathroom","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Drzwi:"Door Sensor","Grzejnik salon":"Radiator Living Room","Grzejnik sypialnia":"Radiator Bedroom","Grzejnik kuchnia":"Radiator Kitchen","Grzejnik ≈Çazienka":"Radiator Bathroom","Grzejnik korytarz":"Radiator Hallway","Grzejnik pok√≥j dzieci":"Radiator Kids Room",Grzejnik:"Radiator"},ka={korytarz:"Hallway",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",pok√≥j:"Room",dzieci:"Kids","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Grzejnik:"Radiator",Drzwi:"Door",Lampa:"Light",du≈ºy:"Large",ma≈Çy:"Small",g≈Ç√≥wny:"Main",g√≥rny:"Upper",dolny:"Lower"};function ot(X){if(!X)return X;const s=X.toLowerCase();for(const[i,w]of Object.entries(za))if(s===i.toLowerCase())return w;let N=X;const d=Object.entries(ka).sort((i,w)=>w[0].length-i[0].length);for(const[i,w]of d){const O=new RegExp(i,"gi");N=N.replace(O,w)}return N}var Sa=u('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in svelte-alpl3u" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="glass-card rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl"><div class="flex items-center justify-between p-4 border-b border-[var(--glass-border)]"><h2 id="dialog-title" class="text-lg font-semibold"> </h2> <button aria-label="Close dialog" class="w-8 h-8 rounded-lg bg-zinc-800/60 text-zinc-400 hover:text-white hover:bg-zinc-700/60 transition-colors flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 overflow-y-auto max-h-[calc(80vh-64px)]"><!></div></div></div>');function et(X,s){Je(s,!0);let N=qe(s,"open",3,!1);function d(k){k.target===k.currentTarget&&s.onclose()}function i(k){k.key==="Escape"&&s.onclose()}var w=Ze();oa("keydown",la,i);var O=Z(w);{var I=k=>{var C=Sa();C.__click=d,C.__keydown=i;var S=a(C),Y=a(S),A=a(Y),be=a(A,!0);t(A);var D=r(A,2);D.__click=function(...ke){var pe;(pe=s.onclose)==null||pe.apply(this,ke)},t(Y);var ue=r(Y,2),ie=a(ue);ha(ie,()=>s.children),t(ue),t(S),t(C),h(()=>l(be,s.title)),n(k,C)};j(O,k=>{N()&&k(I)})}n(X,w),Ue()}$e(["click","keydown"]);var Ma=u('<div class="w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"></div>'),ja=it('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a.75.75 0 01.75.75v6.5a.75.75 0 01-1.5 0v-6.5A.75.75 0 0110 2z"></path><path d="M5.404 4.343a.75.75 0 10-1.06 1.06 6.5 6.5 0 109.192 0 .75.75 0 00-1.06-1.06 5 5 0 11-7.072 0z"></path></svg>'),Ca=u('<p class="text-xs text-indigo-400">Moonlight</p>'),Ta=u('<p class="text-xs text-[var(--muted)]"> </p>'),Ra=u('<p class="text-xs text-[var(--muted)]"> </p>'),Ba=u("<button> </button>"),Oa=u('<div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Brightness</span> <span class="font-medium text-white"> </span></div> <input type="range" min="1" max="100" class="w-full"/></div> <div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Color Temperature</span> <span class="font-medium text-white"> </span></div> <input type="range" min="1700" max="6500" step="100" class="w-full"/> <div class="flex justify-between text-xs text-[var(--muted)] mt-1"><span>Warm</span> <span>Cool</span></div></div>',1),Pa=u('<div class="py-4 text-center text-sm text-indigo-400/80">Hardware night light mode active</div>'),Aa=u('<div><p class="text-sm text-[var(--muted)] mb-2">Presets</p> <div class="grid grid-cols-3 gap-2"></div></div> <!>',1),Da=u('<button> </button> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">IP Address</span> <span class="font-mono text-xs"> </span></div></div>',1),La=u('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span><!></span></div> <!></div>'),Va=u('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <!></div></div></div> <!>',1);function Na(X,s){Je(s,!0);let N=qe(s,"compact",3,!1),d=re(()=>ot(s.lamp.name)),i=re(()=>Q.lampStatuses.get(s.lamp.id)),w=ce(!1),O=ce(!1),I=ce(!1),k=ce(null),C=ce(null),S=re(()=>{var f;return e(k)??((f=e(i))==null?void 0:f.brightness)??0}),Y=re(()=>{var f;return e(C)??((f=e(i))==null?void 0:f.color_temp)??0});st(()=>{e(O)||(x(O,!0),bt(s.lamp.id).then(f=>Q.updateLampStatus(s.lamp.id,f.status)).catch(()=>{}))});async function A(f){f.stopPropagation(),x(w,!0);try{await Xe(s.lamp.id,{toggle:!0});const z=await bt(s.lamp.id);Q.updateLampStatus(s.lamp.id,z.status)}catch(z){console.error(z)}x(w,!1)}async function be(f){x(k,null);try{await Xe(s.lamp.id,{brightness:f}),e(i)&&Q.updateLampStatus(s.lamp.id,{...e(i),brightness:f})}catch(z){console.error(z)}}async function D(f){x(C,null);try{await Xe(s.lamp.id,{color_temp:f}),e(i)&&Q.updateLampStatus(s.lamp.id,{...e(i),color_temp:f})}catch(z){console.error(z)}}const ue=[{id:"day",label:"Day",brightness:100,colorTemp:5e3,moonlight:!1},{id:"night",label:"Night",brightness:30,colorTemp:2700,moonlight:!1},{id:"moonlight",label:"Moonlight",brightness:10,colorTemp:2700,moonlight:!0}];async function ie(f){var z,K;x(w,!0);try{f.moonlight?await Xe(s.lamp.id,{moonlight:!0,moonlight_brightness:f.brightness}):((z=e(i))!=null&&z.moonlight_mode?await Xe(s.lamp.id,{moonlight:!1}):(K=e(i))!=null&&K.power||await Xe(s.lamp.id,{power:!0}),await Xe(s.lamp.id,{brightness:f.brightness,color_temp:f.colorTemp}));const q=await bt(s.lamp.id);Q.updateLampStatus(s.lamp.id,q.status)}catch(q){console.error(q)}x(w,!1)}function ke(f){var q,c,g;if(!((q=e(i))!=null&&q.power))return!1;if(f.moonlight)return((c=e(i))==null?void 0:c.moonlight_mode)??!1;if((g=e(i))!=null&&g.moonlight_mode)return!1;const z=Math.abs(e(i).brightness-f.brightness)<=5,K=Math.abs(e(i).color_temp-f.colorTemp)<=200;return z&&K}var pe=Va(),ge=Z(pe);ge.__click=()=>x(I,!0),ge.__keydown=f=>f.key==="Enter"&&x(I,!0);var Se=a(ge),he=a(Se);he.__click=A;let se;var T=a(he);{var E=f=>{var z=Ma();n(f,z)},M=f=>{var z=ja();n(f,z)};j(T,f=>{e(w)?f(E):f(M,!1)})}t(he);var m=r(he,2),p=a(m),o=a(p,!0);t(p);var _=r(p,2);{var L=f=>{var z=Ze(),K=Z(z);{var q=g=>{var v=Ca();n(g,v)},c=g=>{var v=Ta(),b=a(v);t(v),h(()=>l(b,`${e(i).brightness??""}% ¬∑ ${e(i).color_temp??""}K`)),n(g,v)};j(K,g=>{e(i).moonlight_mode?g(q):g(c,!1)})}n(f,z)},_e=f=>{var z=Ra(),K=a(z,!0);t(z),h(()=>l(K,e(i)?"Off":"Offline")),n(f,z)};j(_,f=>{var z;(z=e(i))!=null&&z.power?f(L):f(_e,!1)})}t(m),t(Se),t(ge);var le=r(ge,2);et(le,{get open(){return e(I)},onclose:()=>x(I,!1),get title(){return e(d)},children:(f,z)=>{var K=La(),q=a(K),c=r(a(q),2),g=a(c);{var v=H=>{var V=Wt();h(()=>l(V,e(i).moonlight_mode?"Moonlight":"On")),n(H,V)},b=H=>{var V=Wt();h(()=>l(V,e(i)?"Off":"Offline")),n(H,V)};j(g,H=>{var V;(V=e(i))!=null&&V.power?H(v):H(b,!1)})}t(c),t(q);var W=r(q,2);{var J=H=>{var V=Da(),$=Z(V);$.__click=A;var Ce=a($,!0);t($);var me=r($,2);{var ye=R=>{var B=Aa(),P=Z(B),U=r(a(P),2);Ne(U,21,()=>ue,Ke,(oe,te)=>{var ve=Ba();ve.__click=()=>ie(e(te));var Le=a(ve,!0);t(ve),h(We=>{ve.disabled=e(w),y(ve,1,`py-2.5 text-sm rounded-lg transition-all
                       ${We??""}
                       disabled:opacity-50`),l(Le,e(te).label)},[()=>ke(e(te))?e(te).moonlight?"bg-indigo-500/20 text-indigo-400":"bg-amber-500/20 text-amber-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"]),n(oe,ve)}),t(U),t(P);var Oe=r(P,2);{var De=oe=>{var te=Oa(),ve=Z(te),Le=a(ve),We=r(a(Le),2),Ge=a(We);t(We),t(Le);var je=r(Le,2);rt(je),je.__input=xe=>x(k,parseInt(xe.currentTarget.value),!0),je.__change=xe=>be(parseInt(xe.currentTarget.value)),t(ve);var Pe=r(ve,2),Ae=a(Pe),Ee=r(a(Ae),2),Ve=a(Ee);t(Ee),t(Ae);var fe=r(Ae,2);rt(fe),fe.__input=xe=>x(C,parseInt(xe.currentTarget.value),!0),fe.__change=xe=>D(parseInt(xe.currentTarget.value)),ht(2),t(Pe),h(()=>{l(Ge,`${e(S)??""}%`),nt(je,e(S)),l(Ve,`${e(Y)??""}K`),nt(fe,e(Y))}),n(oe,te)},Me=oe=>{var te=Pa();n(oe,te)};j(Oe,oe=>{e(i).moonlight_mode?oe(Me,!1):oe(De)})}n(R,B)};j(me,R=>{e(i).power&&R(ye)})}var ee=r(me,2),de=a(ee),we=r(a(de),2),Te=a(we,!0);t(we),t(de);var Re=r(de,2),ze=r(a(Re),2),ne=a(ze,!0);t(ze),t(Re),t(ee),h(()=>{$.disabled=e(w),y($,1,`w-full py-4 rounded-xl text-lg font-medium transition-all
               ${e(i).power?e(i).moonlight_mode?"bg-indigo-500/20 text-indigo-400":"bg-amber-500/20 text-amber-400":"bg-zinc-800 text-zinc-400"}
               hover:scale-[1.02] disabled:opacity-50`),l(Ce,e(i).power?"Turn Off":"Turn On"),l(Te,s.lamp.model),l(ne,s.lamp.ip)}),n(H,V)};j(W,H=>{e(i)&&H(J)})}t(K),h(()=>{var H,V;return y(c,1,`font-medium ${(H=e(i))!=null&&H.power?(V=e(i))!=null&&V.moonlight_mode?"text-indigo-400":"text-amber-400":"text-zinc-500"}`)}),n(f,K)},$$slots:{default:!0}}),h(()=>{var f,z,K;y(ge,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${N()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),he.disabled=e(w)||!e(i),se=y(he,1,`w-9 h-9 rounded-lg flex items-center justify-center transition-all shrink-0
             ${(f=e(i))!=null&&f.power?(z=e(i))!=null&&z.moonlight_mode?"bg-indigo-500/20 text-indigo-400":"bg-amber-500/20 text-amber-400":"bg-zinc-800/60 text-zinc-500"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,se,{"status-active":(K=e(i))==null?void 0:K.power}),l(o,e(d))}),n(X,pe),Ue()}$e(["click","keydown","input","change"]);var Wa=u("<p> </p>"),Ia=u('<p class="text-xs text-[var(--muted)]">Offline</p>'),Ea=u('<div class="flex items-center gap-1 text-xs shrink-0"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 11.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zm4-3a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-4z"></path><path d="M8 4.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v8a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-8z"></path></svg> <span> </span></div>'),Ha=u('<button><div class="text-base mb-0.5"> </div> </button>'),Ga=u('<button><div class="text-base mb-0.5"> </div> </button>'),Fa=u(`<div><p class="text-sm text-[var(--muted)] mb-2">Actions</p> <div class="grid grid-cols-3 gap-2"><button class="py-4 rounded-xl bg-green-500/20 text-green-400 text-sm font-medium
                     hover:bg-green-500/30 disabled:opacity-50 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> Start</button> <button class="py-4 rounded-xl bg-yellow-500/20 text-yellow-400 text-sm font-medium
                     hover:bg-yellow-500/30 disabled:opacity-50 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Pause</button> <button class="py-4 rounded-xl bg-blue-500/20 text-blue-400 text-sm font-medium
                     hover:bg-blue-500/30 disabled:opacity-50 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg> Home</button></div></div> <div><button class="w-full py-3 rounded-xl bg-zinc-800/60 text-zinc-400 text-sm font-medium
                   hover:bg-zinc-700/60 disabled:opacity-50 transition-colors">Find Robot</button></div> <div><p class="text-sm text-[var(--muted)] mb-2">Suction Power</p> <div class="grid grid-cols-4 gap-1"></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Mop Intensity</p> <div class="grid grid-cols-4 gap-1"></div></div>`,1),Ka=u("<button> </button>"),Ya=u(`<button class="w-full mt-3 py-3 rounded-xl bg-cyan-500/20 text-cyan-400 text-sm font-medium
                       hover:bg-cyan-500/30 disabled:opacity-50 transition-colors"> </button>`),qa=u('<div class="grid grid-cols-2 gap-2"></div> <!>',1),Ja=u('<p class="text-zinc-500 text-sm">Loading rooms...</p>'),Ua=u('<div><p class="text-sm text-[var(--muted)] mb-2">Select rooms to clean</p> <!></div>'),Qa=u('<div><p class="text-sm text-[var(--muted)] mb-3">Consumables</p> <div class="space-y-3"><div><div class="flex justify-between text-xs mb-1"><span class="text-zinc-400">Main Brush</span> <div class="flex items-center gap-2"><span class="text-zinc-500"> </span> <button class="text-[10px] px-1.5 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-400 disabled:opacity-50">Reset</button></div></div> <div class="h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-zinc-400">Side Brush</span> <div class="flex items-center gap-2"><span class="text-zinc-500"> </span> <button class="text-[10px] px-1.5 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-400 disabled:opacity-50">Reset</button></div></div> <div class="h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-zinc-400">Filter</span> <div class="flex items-center gap-2"><span class="text-zinc-500"> </span> <button class="text-[10px] px-1.5 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-400 disabled:opacity-50">Reset</button></div></div> <div class="h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-zinc-400">Sensors</span> <div class="flex items-center gap-2"><span class="text-zinc-500"> </span> <button class="text-[10px] px-1.5 py-0.5 rounded bg-zinc-700 hover:bg-zinc-600 text-zinc-400 disabled:opacity-50">Reset</button></div></div> <div class="h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div></div></div>'),Xa=u('<p class="text-zinc-500 text-sm">Loading consumables...</p>'),Za=u(`<div><div class="flex justify-between items-center mb-2"><span class="text-sm text-[var(--muted)]">Volume</span> <span class="text-sm font-medium"> </span></div> <input type="range" min="0" max="100" step="10" class="w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer
                   [&amp;::-webkit-slider-thumb]:appearance-none [&amp;::-webkit-slider-thumb]:w-4 [&amp;::-webkit-slider-thumb]:h-4
                   [&amp;::-webkit-slider-thumb]:bg-white [&amp;::-webkit-slider-thumb]:rounded-full [&amp;::-webkit-slider-thumb]:cursor-pointer"/></div> <!>`,1),$a=u('<div class="grid grid-cols-2 gap-3"><div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Battery</span> <p> </p></div> <div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Fan Speed</span> <p class="text-2xl font-bold mt-1"> </p></div></div> <div class="flex gap-1 bg-zinc-800/40 rounded-lg p-1"><button>Controls</button> <button>Rooms</button> <button>Settings</button></div> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs">Roborock S8</span></div></div>',1),er=u('<div class="text-center py-8 text-[var(--muted)]">Start bridge to control robot</div>'),tr=u('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),ar=u('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z" clip-rule="evenodd"></path></svg></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate">Roborock</h4> <!></div> <!></div></div> <!>',1);function rr(X,s){Je(s,!0);let N=qe(s,"compact",3,!1),d=ce(!1),i=ce(!1),w=ce(Et([])),O=ce(Et(new Set)),I=ce(30),k=ce(null),C=ce("controls");const S={1:"Starting",2:"Charger disconnected",3:"Idle",4:"Remote control",5:"Cleaning",6:"Returning",7:"Manual mode",8:"Charging",9:"Charging problem",10:"Paused",11:"Spot cleaning",12:"Error",13:"Shutting down",14:"Updating",15:"Docking",16:"Going to target",17:"Zoned cleaning",18:"Segment cleaning",22:"Emptying dustbin",23:"Washing mop",26:"Going to wash mop"},Y=[{mode:101,name:"Quiet",icon:"üîá"},{mode:102,name:"Balanced",icon:"‚öñÔ∏è"},{mode:103,name:"Turbo",icon:"üí®"},{mode:104,name:"Max",icon:"üî•"}],A=[{mode:200,name:"Off",icon:"‚ùå"},{mode:201,name:"Low",icon:"üíß"},{mode:202,name:"Med",icon:"üíßüíß"},{mode:203,name:"High",icon:"üíßüíßüíß"}];function be(v){return S[v]||"Unknown"}function D(v){const b=Y.find(W=>W.mode===v);return b?b.name:`${v}%`}async function ue(){try{const[v,b,W]=await Promise.all([ca(),ua(),Ht()]);x(w,v.rooms,!0),x(I,b.volume,!0),x(k,W,!0)}catch(v){console.error("Failed to load extended data:",v)}}async function ie(v){x(d,!0);try{await ma(v),await Q.refreshRoborock()}catch(b){console.error(b)}x(d,!1)}async function ke(v){x(d,!0);try{await xa(v),await Q.refreshRoborock()}catch(b){console.error(b)}x(d,!1)}async function pe(v){x(d,!0);try{await pa(v),await Q.refreshRoborock()}catch(b){console.error(b)}x(d,!1)}async function ge(v){x(I,v,!0);try{await ga(v)}catch(b){console.error(b)}}function Se(v){const b=new Set(e(O));b.has(v)?b.delete(v):b.add(v),x(O,b,!0)}async function he(){if(e(O).size!==0){x(d,!0);try{await _a([...e(O)]),x(O,new Set,!0),await Q.refreshRoborock()}catch(v){console.error(v)}x(d,!1)}}function se(v,b){const W=v/3600;return Math.max(0,Math.min(100,W/b*100))}function T(v){return v<50?"bg-green-500":v<80?"bg-yellow-500":"bg-red-500"}async function E(v){x(d,!0);try{await fa(v);const b=await Ht();x(k,b,!0)}catch(b){console.error(b)}x(d,!1)}function M(v){switch(v){case 5:case 11:case 17:case 18:return{color:"text-green-400",bg:"bg-green-500/20"};case 8:return{color:"text-blue-400",bg:"bg-blue-500/20"};case 3:return{color:"text-zinc-400",bg:"bg-zinc-800/60"};case 10:return{color:"text-yellow-400",bg:"bg-yellow-500/20"};case 6:case 15:case 16:case 26:return{color:"text-cyan-400",bg:"bg-cyan-500/20"};case 12:case 9:return{color:"text-red-400",bg:"bg-red-500/20"};default:return{color:"text-zinc-400",bg:"bg-zinc-800/60"}}}let m=re(()=>s.status?M(s.status.state):{color:"text-zinc-500",bg:"bg-zinc-800/60"});st(()=>{e(i)&&ue()});var p=ar(),o=Z(p);o.__click=()=>x(i,!0),o.__keydown=v=>v.key==="Enter"&&x(i,!0);var _=a(o),L=a(_);let _e;var le=r(L,2),f=r(a(le),2);{var z=v=>{var b=Wa(),W=a(b,!0);t(b),h(J=>{y(b,1,`text-xs ${e(m).color??""}`),l(W,J)},[()=>be(s.status.state)]),n(v,b)},K=v=>{var b=Ia();n(v,b)};j(f,v=>{s.status?v(z):v(K,!1)})}t(le);var q=r(le,2);{var c=v=>{var b=Ea(),W=a(b),J=r(W,2),H=a(J);t(J),t(b),h(()=>{y(W,0,`w-3.5 h-3.5 ${s.status.battery>20?"text-green-400":"text-red-400"}`),y(J,1,s.status.battery>20?"text-zinc-400":"text-red-400"),l(H,`${s.status.battery??""}%`)}),n(v,b)};j(q,v=>{N()&&s.status&&v(c)})}t(_),t(o);var g=r(o,2);et(g,{get open(){return e(i)},onclose:()=>x(i,!1),title:"Roborock",children:(v,b)=>{var W=tr(),J=a(W),H=r(a(J),2),V=a(H,!0);t(H),t(J);var $=r(J,2);{var Ce=ye=>{var ee=$a(),de=Z(ee),we=a(de),Te=r(a(we),2),Re=a(Te);t(Te),t(we);var ze=r(we,2),ne=r(a(ze),2),R=a(ne,!0);t(ne),t(ze),t(de);var B=r(de,2),P=a(B);P.__click=()=>x(C,"controls");var U=r(P,2);U.__click=()=>x(C,"rooms");var Oe=r(U,2);Oe.__click=()=>x(C,"settings"),t(B);var De=r(B,2);{var Me=te=>{var ve=Fa(),Le=Z(ve),We=r(a(Le),2),Ge=a(We);Ge.__click=()=>ie("start");var je=r(Ge,2);je.__click=()=>ie("pause");var Pe=r(je,2);Pe.__click=()=>ie("home"),t(We),t(Le);var Ae=r(Le,2),Ee=a(Ae);Ee.__click=()=>ie("find"),t(Ae);var Ve=r(Ae,2),fe=r(a(Ve),2);Ne(fe,21,()=>Y,Ke,(Ie,ae)=>{var G=Ha();G.__click=()=>ke(e(ae).mode);var F=a(G),Be=a(F,!0);t(F);var Qe=r(F);t(G),h(()=>{G.disabled=e(d),y(G,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors
                       ${s.status.fanPower===e(ae).mode?"bg-purple-500/30 text-purple-400 ring-1 ring-purple-500/50":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}
                       disabled:opacity-50`),l(Be,e(ae).icon),l(Qe,` ${e(ae).name??""}`)}),n(Ie,G)}),t(fe),t(Ve);var xe=r(Ve,2),He=r(a(xe),2);Ne(He,21,()=>A,Ke,(Ie,ae)=>{var G=Ga();G.__click=()=>pe(e(ae).mode);var F=a(G),Be=a(F,!0);t(F);var Qe=r(F);t(G),h(()=>{G.disabled=e(d),y(G,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors
                       ${s.status.waterBoxMode===e(ae).mode?"bg-cyan-500/30 text-cyan-400 ring-1 ring-cyan-500/50":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}
                       disabled:opacity-50`),l(Be,e(ae).icon),l(Qe,` ${e(ae).name??""}`)}),n(Ie,G)}),t(He),t(xe),h(()=>{Ge.disabled=e(d),je.disabled=e(d),Pe.disabled=e(d),Ee.disabled=e(d)}),n(te,ve)},oe=te=>{var ve=Ze(),Le=Z(ve);{var We=je=>{var Pe=Ua(),Ae=r(a(Pe),2);{var Ee=fe=>{var xe=qa(),He=Z(xe);Ne(He,21,()=>e(w),Ke,(G,F)=>{var Be=Ka();Be.__click=()=>Se(e(F).segmentId);var Qe=a(Be,!0);t(Be),h(Fe=>{y(Be,1,`py-3 px-3 rounded-xl text-sm font-medium transition-colors text-left
                         ${Fe??""}`),l(Qe,e(F).name)},[()=>e(O).has(e(F).segmentId)?"bg-cyan-500/30 text-cyan-400 ring-1 ring-cyan-500/50":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"]),n(G,Be)}),t(He);var Ie=r(He,2);{var ae=G=>{var F=Ya();F.__click=he;var Be=a(F);t(F),h(()=>{F.disabled=e(d),l(Be,`Clean ${e(O).size??""} room${e(O).size>1?"s":""}`)}),n(G,F)};j(Ie,G=>{e(O).size>0&&G(ae)})}n(fe,xe)},Ve=fe=>{var xe=Ja();n(fe,xe)};j(Ae,fe=>{e(w).length>0?fe(Ee):fe(Ve,!1)})}t(Pe),n(je,Pe)},Ge=je=>{var Pe=Ze(),Ae=Z(Pe);{var Ee=Ve=>{var fe=Za(),xe=Z(fe),He=a(xe),Ie=r(a(He),2),ae=a(Ie);t(Ie),t(He);var G=r(He,2);rt(G),G.__change=()=>ge(e(I)),t(xe);var F=r(xe,2);{var Be=Fe=>{var tt=Qa(),yt=r(a(tt),2),lt=a(yt),dt=a(lt),wt=r(a(dt),2),vt=a(wt),Kt=a(vt);t(vt);var zt=r(vt,2);zt.__click=()=>E("main_brush_work_time"),t(wt),t(dt);var kt=r(dt,2),St=a(kt);t(kt),t(lt);var ct=r(lt,2),ut=a(ct),Mt=r(a(ut),2),mt=a(Mt),Yt=a(mt);t(mt);var jt=r(mt,2);jt.__click=()=>E("side_brush_work_time"),t(Mt),t(ut);var Ct=r(ut,2),Tt=a(Ct);t(Ct),t(ct);var xt=r(ct,2),pt=a(xt),Rt=r(a(pt),2),gt=a(Rt),qt=a(gt);t(gt);var Bt=r(gt,2);Bt.__click=()=>E("filter_work_time"),t(Rt),t(pt);var Ot=r(pt,2),Pt=a(Ot);t(Ot),t(xt);var At=r(xt,2),_t=a(At),Dt=r(a(_t),2),ft=a(Dt),Jt=a(ft);t(ft);var Lt=r(ft,2);Lt.__click=()=>E("sensor_dirty_time"),t(Dt),t(_t);var Vt=r(_t,2),Nt=a(Vt);t(Vt),t(At),t(yt),t(tt),h((Ut,Qt,Xt,Zt,$t,ea,ta,aa,ra,ia,sa,na)=>{l(Kt,`${Ut??""}h`),zt.disabled=e(d),y(St,1,`h-full ${Qt??""} transition-all`),at(St,`width: ${Xt??""}%`),l(Yt,`${Zt??""}h`),jt.disabled=e(d),y(Tt,1,`h-full ${$t??""} transition-all`),at(Tt,`width: ${ea??""}%`),l(qt,`${ta??""}h`),Bt.disabled=e(d),y(Pt,1,`h-full ${aa??""} transition-all`),at(Pt,`width: ${ra??""}%`),l(Jt,`${ia??""}h`),Lt.disabled=e(d),y(Nt,1,`h-full ${sa??""} transition-all`),at(Nt,`width: ${na??""}%`)},[()=>Math.round(e(k).mainBrushWorkTime/3600),()=>T(se(e(k).mainBrushWorkTime,300)),()=>se(e(k).mainBrushWorkTime,300),()=>Math.round(e(k).sideBrushWorkTime/3600),()=>T(se(e(k).sideBrushWorkTime,200)),()=>se(e(k).sideBrushWorkTime,200),()=>Math.round(e(k).filterWorkTime/3600),()=>T(se(e(k).filterWorkTime,150)),()=>se(e(k).filterWorkTime,150),()=>Math.round(e(k).sensorDirtyTime/3600),()=>T(se(e(k).sensorDirtyTime,30)),()=>se(e(k).sensorDirtyTime,30)]),n(Fe,tt)},Qe=Fe=>{var tt=Xa();n(Fe,tt)};j(F,Fe=>{e(k)?Fe(Be):Fe(Qe,!1)})}h(()=>l(ae,`${e(I)??""}%`)),wa(G,()=>e(I),Fe=>x(I,Fe)),n(Ve,fe)};j(Ae,Ve=>{e(C)==="settings"&&Ve(Ee)},!0)}n(je,Pe)};j(Le,je=>{e(C)==="rooms"?je(We):je(Ge,!1)},!0)}n(te,ve)};j(De,te=>{e(C)==="controls"?te(Me):te(oe,!1)})}ht(2),h(te=>{y(Te,1,`text-3xl font-bold mt-1 ${s.status.battery>20?"":"text-red-400"}`),l(Re,`${s.status.battery??""}%`),l(R,te),y(P,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(C)==="controls"?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white"}`),y(U,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(C)==="rooms"?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white"}`),y(Oe,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(C)==="settings"?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white"}`)},[()=>D(s.status.fanPower)]),n(ye,ee)},me=ye=>{var ee=er();n(ye,ee)};j($,ye=>{s.status?ye(Ce):ye(me,!1)})}t(W),h(ye=>{y(H,1,`font-medium ${e(m).color??""}`),l(V,ye)},[()=>s.status?be(s.status.state):"Offline"]),n(v,W)},$$slots:{default:!0}}),h(()=>{var v,b,W,J;y(o,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${N()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),_e=y(L,1,`w-9 h-9 rounded-lg flex items-center justify-center shrink-0 ${e(m).bg??""} ${e(m).color??""}`,null,_e,{"status-active":((v=s.status)==null?void 0:v.state)===5||((b=s.status)==null?void 0:b.state)===11||((W=s.status)==null?void 0:W.state)===17||((J=s.status)==null?void 0:J.state)===18})}),n(X,p),Ue()}$e(["click","keydown","change"]);var ir=u('<div class="grid grid-cols-2 gap-3"><div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Temperature</span> <p class="text-2xl font-bold mt-1 text-cyan-400"> </p></div> <div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)]">Humidity</span> <p class="text-2xl font-bold mt-1 text-blue-400"> </p></div></div>'),sr=u('<div class="bg-zinc-800/40 rounded-xl p-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Battery</span> <span> </span></div> <div class="mt-2 h-2 bg-zinc-700 rounded-full overflow-hidden"><div></div></div></div>'),nr=u('<div class="space-y-4"><div><span class="text-4xl"> </span> <p> </p> <p class="text-sm text-[var(--muted)] mt-1"> </p></div> <!> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Type</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">Online</span> <span> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">Device ID</span> <span class="font-mono text-xs"> </span></div></div></div>'),or=u('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div> </div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <p> </p></div> <div></div></div></div> <!>',1);function lr(X,s){Je(s,!0);let N=qe(s,"compact",3,!1),d=re(()=>ot(s.device.name)),i=ce(!1),w=re(()=>()=>{if(!s.device.last_status)return null;try{return JSON.parse(s.device.last_status)}catch{return null}});const O={sj:{label:"Water",icon:"üíß"},mcs:{label:"Door",icon:"üö™"},wsdcg:{label:"Climate",icon:"üå°Ô∏è"},wfcon:{label:"Gateway",icon:"üì°"},cz:{label:"Remote",icon:"üì∫"}},I=15;function k(M,m){if(!M)return m==="sj"||m==="mcs"?{text:"Monitoring",alert:!1,color:"text-zinc-500",lowBattery:!1}:{text:"No data",alert:!1,color:"text-zinc-500",lowBattery:!1};switch(m){case"sj":{const p=M[1],o=p==="alarm"||p==="1"||p===1,_=M[4],L=_!==void 0&&_<=I;return o?{text:"Water detected!",alert:!0,color:"text-red-400",lowBattery:L,batteryPercent:_}:{text:L?`Dry ¬∑ ${_}%`:"Dry",alert:!1,color:"text-green-400",lowBattery:L,batteryPercent:_}}case"mcs":{const p=M[101]===!0||M[1]===!0,o=M[103]||M[4],_=o!==void 0&&o<=I;return{text:_?`${p?"Open":"Closed"} ¬∑ ${o}%`:p?"Open":"Closed",alert:p,color:p?"text-amber-400":"text-green-400",lowBattery:_,batteryPercent:o}}case"wsdcg":{const p=M[103],o=M[102];return p!==void 0&&o!==void 0?{text:`${(p/100).toFixed(1)}¬∞C ¬∑ ${o}%`,alert:!1,color:"text-cyan-400",lowBattery:!1}:{text:"N/A",alert:!1,color:"text-zinc-500",lowBattery:!1}}default:return{text:s.device.online?"Online":"Offline",alert:!1,color:s.device.online?"text-green-400":"text-zinc-500",lowBattery:!1}}}let C=re(()=>O[s.device.category]||{label:s.device.category,icon:"üì±"}),S=re(()=>k(e(w)(),s.device.category));var Y=or(),A=Z(Y);A.__click=()=>x(i,!0),A.__keydown=M=>M.key==="Enter"&&x(i,!0);var be=a(A),D=a(be);let ue;var ie=a(D,!0);t(D);var ke=r(D,2),pe=a(ke),ge=a(pe,!0);t(pe);var Se=r(pe,2),he=a(Se,!0);t(Se),t(ke);var se=r(ke,2);let T;t(be),t(A);var E=r(A,2);et(E,{get open(){return e(i)},onclose:()=>x(i,!1),get title(){return e(d)},children:(M,m)=>{var p=nr(),o=a(p),_=a(o),L=a(_,!0);t(_);var _e=r(_,2),le=a(_e,!0);t(_e);var f=r(_e,2),z=a(f);t(f),t(o);var K=r(o,2);{var q=ee=>{const de=re(()=>e(w)());var we=Ze(),Te=Z(we);{var Re=ze=>{var ne=ir(),R=a(ne),B=r(a(R),2),P=a(B);t(B),t(R);var U=r(R,2),Oe=r(a(U),2),De=a(Oe);t(Oe),t(U),t(ne),h(Me=>{l(P,`${Me??""}¬∞C`),l(De,`${e(de)[102]??""}%`)},[()=>(e(de)[103]/100).toFixed(1)]),n(ze,ne)};j(Te,ze=>{e(de)&&ze(Re)})}n(ee,we)};j(K,ee=>{s.device.category==="wsdcg"&&ee(q)})}var c=r(K,2);{var g=ee=>{const de=re(()=>e(w)());var we=Ze(),Te=Z(we);{var Re=ze=>{const ne=re(()=>e(de)[4]||e(de)[103]);var R=Ze(),B=Z(R);{var P=U=>{var Oe=sr(),De=a(Oe),Me=r(a(De),2),oe=a(Me);t(Me),t(De);var te=r(De,2),ve=a(te);t(te),t(Oe),h(()=>{y(Me,1,`font-bold ${e(ne)>20?"text-green-400":"text-red-400"}`),l(oe,`${e(ne)??""}%`),y(ve,1,`h-full rounded-full transition-all ${e(ne)>20?"bg-green-500":"bg-red-500"}`),at(ve,`width: ${e(ne)??""}%`)}),n(U,Oe)};j(B,U=>{e(ne)!==void 0&&U(P)})}n(ze,R)};j(Te,ze=>{e(de)&&ze(Re)})}n(ee,we)};j(c,ee=>{(s.device.category==="sj"||s.device.category==="mcs")&&ee(g)})}var v=r(c,2),b=a(v),W=r(a(b),2),J=a(W,!0);t(W),t(b);var H=r(b,2),V=r(a(H),2),$=a(V,!0);t(V),t(H);var Ce=r(H,2),me=r(a(Ce),2),ye=a(me);t(me),t(Ce),t(v),t(p),h(ee=>{y(o,1,`rounded-xl p-6 text-center ${e(S).alert?"bg-red-500/20":"bg-zinc-800/40"}`),l(L,e(C).icon),y(_e,1,`text-2xl font-bold mt-2 ${e(S).color??""}`),l(le,e(S).text),l(z,`${e(C).label??""} Sensor`),l(J,e(C).label),y(V,1,s.device.online?"text-green-400":"text-red-400"),l($,s.device.online?"Yes":"No"),l(ye,`${ee??""}...`)},[()=>s.device.id.slice(0,12)]),n(M,p)},$$slots:{default:!0}}),h(()=>{y(A,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${N()?"p-2.5":"p-3"} w-full text-left cursor-pointer
         ${e(S).lowBattery?"border-amber-500/50 bg-amber-500/10":""}`),ue=y(D,1,`w-9 h-9 rounded-lg flex items-center justify-center text-base shrink-0
             ${e(S).alert?"bg-red-500/20":e(S).lowBattery?"bg-amber-500/20":"bg-zinc-800/60"}`,null,ue,{"status-active":e(S).alert}),l(ie,e(C).icon),l(ge,e(d)),y(Se,1,`text-xs ${(e(S).lowBattery?"text-amber-400":e(S).color)??""}`),l(he,e(S).text),T=y(se,1,`w-2 h-2 rounded-full shrink-0
             ${s.device.online?"bg-green-500":"bg-zinc-600"}`,null,T,{"status-dot":s.device.online})}),n(X,Y),Ue()}$e(["click","keydown"]);var dr=it('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd"></path></svg>'),vr=it('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M5.05 3.636a1 1 0 010 1.414 7 7 0 000 9.9 1 1 0 11-1.414 1.414 9 9 0 010-12.728 1 1 0 011.414 0zm9.9 0a1 1 0 011.414 0 9 9 0 010 12.728 1 1 0 11-1.414-1.414 7 7 0 000-9.9 1 1 0 010-1.414zM7.879 6.464a1 1 0 010 1.414 3 3 0 000 4.243 1 1 0 11-1.415 1.414 5 5 0 010-7.07 1 1 0 011.415 0zm4.242 0a1 1 0 011.415 0 5 5 0 010 7.072 1 1 0 01-1.415-1.415 3 3 0 000-4.242 1 1 0 010-1.415zM10 9a1 1 0 011 1v.01a1 1 0 11-2 0V10a1 1 0 011-1z"></path></svg>'),cr=u('<p class="text-xs text-[var(--muted)]"> </p>'),ur=u('<p class="text-xs text-[var(--muted)]">No data</p>'),mr=u("<button> </button>"),xr=u(`<div class="grid grid-cols-2 gap-3"><div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)] uppercase tracking-wide">Current</span> <p class="text-3xl font-bold mt-1"> </p></div> <div class="bg-zinc-800/40 rounded-xl p-4 text-center"><span class="text-xs text-[var(--muted)] uppercase tracking-wide">Target</span> <p class="text-3xl font-bold mt-1 text-orange-400"> </p></div></div> <div><p class="text-sm text-[var(--muted)] mb-3">Set Temperature</p> <div class="flex items-center justify-center gap-4"><button class="w-14 h-14 rounded-full bg-blue-500/20 text-blue-400 text-2xl font-medium
                   hover:bg-blue-500/30 disabled:opacity-50 transition-all">‚àí</button> <span class="text-3xl font-bold w-24 text-center"> </span> <button class="w-14 h-14 rounded-full bg-orange-500/20 text-orange-400 text-2xl font-medium
                   hover:bg-orange-500/30 disabled:opacity-50 transition-all">+</button></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Quick Set</p> <div class="grid grid-cols-4 gap-2"></div></div>`,1),pr=u('<div class="text-center py-8 text-[var(--muted)]">No data available</div>'),gr=u('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Valve</span> <span> </span></div> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Device ID</span> <span class="font-mono text-xs"> </span></div> <div class="flex justify-between"><span class="text-[var(--muted)]">Online</span> <span> </span></div></div></div>'),_r=u('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><!></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <!></div></div></div> <!>',1);function fr(X,s){Je(s,!0);let N=qe(s,"device",7),d=qe(s,"compact",3,!1),i=re(()=>ot(N().name)),w=ce(!1),O=ce(!1),I=re(()=>()=>{if(!N().last_status)return null;try{return JSON.parse(N().last_status)}catch{return null}}),k=re(()=>{var o;return(o=e(I)())!=null&&o["5"]?e(I)()[5]/10:null}),C=re(()=>{var o;return(o=e(I)())!=null&&o["4"]?e(I)()[4]/10:null}),S=re(()=>{var o;return((o=e(I)())==null?void 0:o["3"])||"unknown"});async function Y(o){x(w,!0);try{await fetch(`/api/devices/${N().id}/control`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dps:4,value:Math.round(o*10)})});const _=await fetch(`/api/devices/${N().id}/status`);if(_.ok){const L=await _.json();N().last_status=JSON.stringify(L.status)}}catch(_){console.error(_)}x(w,!1)}function A(o){if(e(C)!==null){const _=Math.max(5,Math.min(30,e(C)+o));Y(_)}}var be=_r(),D=Z(be);D.__click=()=>x(O,!0),D.__keydown=o=>o.key==="Enter"&&x(O,!0);var ue=a(D),ie=a(ue);let ke;var pe=a(ie);{var ge=o=>{var _=dr();n(o,_)},Se=o=>{var _=vr();n(o,_)};j(pe,o=>{e(S)==="opened"?o(ge):o(Se,!1)})}t(ie);var he=r(ie,2),se=a(he),T=a(se,!0);t(se);var E=r(se,2);{var M=o=>{var _=cr(),L=a(_);t(_),h(()=>l(L,`${e(k)??""}¬∞C ${e(S)==="opened"?"‚Üí":"¬∑"} ${e(C)??""}¬∞C`)),n(o,_)},m=o=>{var _=ur();n(o,_)};j(E,o=>{e(k)!==null?o(M):o(m,!1)})}t(he),t(ue),t(D);var p=r(D,2);et(p,{get open(){return e(O)},onclose:()=>x(O,!1),get title(){return e(i)},children:(o,_)=>{var L=gr(),_e=a(L),le=r(a(_e),2),f=a(le,!0);t(le),t(_e);var z=r(_e,2);{var K=V=>{var $=xr(),Ce=Z($),me=a(Ce),ye=r(a(me),2),ee=a(ye);t(ye),t(me);var de=r(me,2),we=r(a(de),2),Te=a(we);t(we),t(de),t(Ce);var Re=r(Ce,2),ze=r(a(Re),2),ne=a(ze);ne.__click=()=>A(-.5);var R=r(ne,2),B=a(R);t(R);var P=r(R,2);P.__click=()=>A(.5),t(ze),t(Re);var U=r(Re,2),Oe=r(a(U),2);Ne(Oe,20,()=>[15,18,21,24],Ke,(De,Me)=>{var oe=mr();oe.__click=()=>Y(Me);var te=a(oe);t(oe),h(()=>{oe.disabled=e(w),y(oe,1,`py-2 text-sm rounded-lg transition-colors
                     ${e(C)===Me?"bg-orange-500/20 text-orange-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),l(te,`${Me??""}¬∞`)}),n(De,oe)}),t(Oe),t(U),h(()=>{l(ee,`${e(k)??""}¬∞C`),l(Te,`${e(C)??""}¬∞C`),ne.disabled=e(w)||e(C)<=5,l(B,`${e(C)??""}¬∞C`),P.disabled=e(w)||e(C)>=30}),n(V,$)},q=V=>{var $=pr();n(V,$)};j(z,V=>{e(k)!==null&&e(C)!==null?V(K):V(q,!1)})}var c=r(z,2),g=a(c),v=r(a(g),2),b=a(v);t(v),t(g);var W=r(g,2),J=r(a(W),2),H=a(J,!0);t(J),t(W),t(c),t(L),h(V=>{y(le,1,`font-medium ${e(S)==="opened"?"text-orange-400":"text-blue-400"}`),l(f,e(S)==="opened"?"Heating":"Idle"),l(b,`${V??""}...`),y(J,1,N().online?"text-green-400":"text-red-400"),l(H,N().online?"Yes":"No")},[()=>N().id.slice(0,12)]),n(o,L)},$$slots:{default:!0}}),h(()=>{y(D,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${d()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),ke=y(ie,1,`w-9 h-9 rounded-lg flex items-center justify-center shrink-0
             ${e(S)==="opened"?"bg-orange-500/20 text-orange-400":"bg-blue-500/20 text-blue-400"}`,null,ke,{"status-active":e(S)==="opened"}),l(T,e(i))}),n(X,be),Ue()}$e(["click","keydown"]);var br=u('<div class="w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"></div>'),hr=it('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path></svg>'),yr=u('<p class="text-xs text-[var(--muted)]"> </p>'),wr=u('<p class="text-xs text-[var(--muted)]"> </p>'),zr=u("<button> </button>"),kr=u("<button> </button>"),Sr=u('<div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Volume</span> <span class="font-medium text-white"> </span></div> <div class="flex gap-2 items-center"><input type="range" min="0" max="100" class="flex-1"/> <button> </button></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Input</p> <div class="grid grid-cols-2 gap-2"></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Sound Program</p> <div class="grid grid-cols-3 gap-2"></div></div> <div><p class="text-sm text-[var(--muted)] mb-2">Audio</p> <div class="grid grid-cols-2 gap-2"><button>Clear Voice</button> <button>Bass Ext.</button></div></div> <div><div class="flex justify-between text-sm text-[var(--muted)] mb-2"><span>Subwoofer</span> <span class="font-medium text-white"> </span></div> <input type="range" min="-6" max="6" step="1" class="w-full"/></div>',1),Mr=u('<button> </button> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs"> </span></div></div>',1),jr=u('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),Cr=u('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate"> </h4> <!></div></div></div> <!>',1);function Tr(X,s){Je(s,!0);let N=qe(s,"compact",3,!1),d=re(()=>ot(s.device.name)),i=ce(null),w=ce(!1),O=ce(!1),I=ce(!1),k=ce(null),C=ce(null),S=re(()=>{var c;return e(k)??((c=e(i))==null?void 0:c.volume)??0}),Y=re(()=>{var c;return e(C)??((c=e(i))==null?void 0:c.subwoofer_volume)??0});st(()=>{if(!e(O)&&s.device.last_status)try{x(i,JSON.parse(s.device.last_status),!0)}catch{}}),st(()=>{e(O)||(x(O,!0),Gt(s.device.id).then(c=>x(i,c.status,!0)).catch(()=>{}))});async function A(){var c;x(w,!0);try{await Ye(s.device.id,{power:((c=e(i))==null?void 0:c.power)!=="on"});const g=await Gt(s.device.id);x(i,g.status,!0)}catch(g){console.error(g)}x(w,!1)}async function be(c){x(k,null);try{await Ye(s.device.id,{volume:c}),e(i)&&x(i,{...e(i),volume:c},!0)}catch(g){console.error(g)}}async function D(){var c;try{await Ye(s.device.id,{mute:!((c=e(i))!=null&&c.mute)}),e(i)&&x(i,{...e(i),mute:!e(i).mute},!0)}catch(g){console.error(g)}}async function ue(c){try{await Ye(s.device.id,{input:c}),e(i)&&x(i,{...e(i),input:c},!0)}catch(g){console.error(g)}}async function ie(c){try{await Ye(s.device.id,{sound_program:c}),e(i)&&x(i,{...e(i),sound_program:c},!0)}catch(g){console.error(g)}}async function ke(){var c;try{const g=!((c=e(i))!=null&&c.clear_voice);await Ye(s.device.id,{clear_voice:g}),e(i)&&x(i,{...e(i),clear_voice:g},!0)}catch(g){console.error(g)}}async function pe(){var c;try{const g=!((c=e(i))!=null&&c.bass_extension);await Ye(s.device.id,{bass_extension:g}),e(i)&&x(i,{...e(i),bass_extension:g},!0)}catch(g){console.error(g)}}async function ge(c){x(C,null);try{await Ye(s.device.id,{subwoofer_volume:c}),e(i)&&x(i,{...e(i),subwoofer_volume:c},!0)}catch(g){console.error(g)}}const Se=["tv","bluetooth"],he=[{id:"movie",label:"Movie"},{id:"music",label:"Music"},{id:"sports",label:"Sports"},{id:"game",label:"Game"},{id:"tv_program",label:"TV"},{id:"stereo",label:"Stereo"}];var se=Cr(),T=Z(se);T.__click=()=>x(I,!0),T.__keydown=c=>c.key==="Enter"&&x(I,!0);var E=a(T),M=a(E);M.__click=c=>{c.stopPropagation(),A()};let m;var p=a(M);{var o=c=>{var g=br();n(c,g)},_=c=>{var g=hr();n(c,g)};j(p,c=>{e(w)?c(o):c(_,!1)})}t(M);var L=r(M,2),_e=a(L),le=a(_e,!0);t(_e);var f=r(_e,2);{var z=c=>{var g=yr(),v=a(g);t(g),h(()=>l(v,`${e(i).mute?"Muted":`${e(i).volume}%`} ¬∑ ${e(i).input??""}`)),n(c,g)},K=c=>{var g=wr(),v=a(g,!0);t(g),h(()=>l(v,e(i)?"Standby":"Offline")),n(c,g)};j(f,c=>{var g;((g=e(i))==null?void 0:g.power)==="on"?c(z):c(K,!1)})}t(L),t(E),t(T);var q=r(T,2);et(q,{get open(){return e(I)},onclose:()=>x(I,!1),get title(){return e(d)},children:(c,g)=>{var v=jr(),b=a(v),W=r(a(b),2),J=a(W,!0);t(W),t(b);var H=r(b,2);{var V=$=>{var Ce=Mr(),me=Z(Ce);me.__click=A;var ye=a(me,!0);t(me);var ee=r(me,2);{var de=ne=>{var R=Sr(),B=Z(R),P=a(B),U=r(a(P),2),Oe=a(U,!0);t(U),t(P);var De=r(P,2),Me=a(De);rt(Me),Me.__input=ae=>x(k,parseInt(ae.currentTarget.value),!0),Me.__change=ae=>be(parseInt(ae.currentTarget.value));var oe=r(Me,2);oe.__click=D;var te=a(oe,!0);t(oe),t(De),t(B);var ve=r(B,2),Le=r(a(ve),2);Ne(Le,21,()=>Se,Ke,(ae,G)=>{var F=zr();F.__click=()=>ue(e(G));var Be=a(F,!0);t(F),h(()=>{y(F,1,`py-3 text-sm rounded-lg transition-colors uppercase
                       ${e(i).input===e(G)?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),l(Be,e(G)==="bluetooth"?"BT":"TV")}),n(ae,F)}),t(Le),t(ve);var We=r(ve,2),Ge=r(a(We),2);Ne(Ge,21,()=>he,Ke,(ae,G)=>{var F=kr();F.__click=()=>ie(e(G).id);var Be=a(F,!0);t(F),h(()=>{y(F,1,`py-2.5 text-sm rounded-lg transition-colors
                       ${e(i).sound_program===e(G).id?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),l(Be,e(G).label)}),n(ae,F)}),t(Ge),t(We);var je=r(We,2),Pe=r(a(je),2),Ae=a(Pe);Ae.__click=ke;var Ee=r(Ae,2);Ee.__click=pe,t(Pe),t(je);var Ve=r(je,2),fe=a(Ve),xe=r(a(fe),2),He=a(xe);t(xe),t(fe);var Ie=r(fe,2);rt(Ie),Ie.__input=ae=>x(C,parseInt(ae.currentTarget.value),!0),Ie.__change=ae=>ge(parseInt(ae.currentTarget.value)),t(Ve),h(()=>{l(Oe,e(i).mute?"Muted":`${e(S)}%`),nt(Me,e(S)),y(oe,1,`w-10 h-10 rounded-lg transition-colors text-lg
                     ${e(i).mute?"bg-red-500/20 text-red-400":"bg-zinc-800/60 text-zinc-400"}
                     hover:bg-zinc-700/60`),l(te,e(i).mute?"üîá":"üîä"),y(Ae,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(i).clear_voice?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),y(Ee,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(i).bass_extension?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),l(He,`${e(Y)>0?"+":""}${e(Y)??""}`),nt(Ie,e(Y))}),n(ne,R)};j(ee,ne=>{e(i).power==="on"&&ne(de)})}var we=r(ee,2),Te=a(we),Re=r(a(Te),2),ze=a(Re,!0);t(Re),t(Te),t(we),h(()=>{me.disabled=e(w),y(me,1,`w-full py-4 rounded-xl text-lg font-medium transition-all
               ${e(i).power==="on"?"bg-purple-500/20 text-purple-400":"bg-zinc-800 text-zinc-400"}
               hover:scale-[1.02] disabled:opacity-50`),l(ye,e(i).power==="on"?"Turn Off":"Turn On"),l(ze,s.device.model||"Yamaha Soundbar")}),n($,Ce)};j(H,$=>{e(i)&&$(V)})}t(v),h(()=>{var $,Ce;y(W,1,`font-medium ${(($=e(i))==null?void 0:$.power)==="on"?"text-purple-400":"text-zinc-500"}`),l(J,((Ce=e(i))==null?void 0:Ce.power)==="on"?"On":e(i)?"Standby":"Offline")}),n(c,v)},$$slots:{default:!0}}),h(()=>{var c,g;y(T,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${N()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),M.disabled=e(w)||!e(i),m=y(M,1,`w-9 h-9 rounded-lg flex items-center justify-center transition-all shrink-0
             ${((c=e(i))==null?void 0:c.power)==="on"?"bg-purple-500/20 text-purple-400":"bg-zinc-800/60 text-zinc-500"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,m,{"status-active":((g=e(i))==null?void 0:g.power)==="on"}),l(le,e(d))}),n(X,se),Ue()}$e(["click","keydown","input","change"]);var Rr=u('<div class="w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"></div>'),Br=it('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.414 1.415l.708-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z" clip-rule="evenodd"></path></svg>'),Or=u('<p class="text-xs text-[var(--muted)]"> </p>'),Pr=u('<p class="text-xs text-[var(--muted)]"> </p>'),Ar=u("<div> </div>"),Dr=u("<button> </button>"),Lr=u('<div class="bg-zinc-800/40 rounded-xl p-3 text-center"><span class="text-xs text-[var(--muted)]">Humidity</span> <p class="text-lg font-bold mt-1"> </p></div>'),Vr=u('<div class="bg-zinc-800/40 rounded-xl p-3 text-center"><span class="text-xs text-[var(--muted)]">Temp</span> <p class="text-lg font-bold mt-1"> </p></div>'),Nr=u('<div class="bg-zinc-800/40 rounded-xl p-3 text-center"><span class="text-xs text-[var(--muted)]">Filter</span> <p> </p></div>'),Wr=u('<div><span class="text-xs uppercase tracking-wide opacity-80">Air Quality Index</span> <p class="text-4xl font-bold mt-1"> </p> <p class="text-sm mt-1"> </p></div> <div><p class="text-sm text-[var(--muted)] mb-2">Mode</p> <div class="grid grid-cols-3 gap-2"></div></div> <div class="grid grid-cols-3 gap-3"><!> <!> <!></div>',1),Ir=u('<button> </button> <!> <div class="pt-4 border-t border-[var(--glass-border)] space-y-2 text-sm"><div class="flex justify-between"><span class="text-[var(--muted)]">Model</span> <span class="font-mono text-xs">Xiaomi Air Purifier</span></div></div>',1),Er=u('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-[var(--muted)]">Status</span> <span> </span></div> <!></div>'),Hr=u('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm truncate">Air Purifier</h4> <!></div> <!></div></div> <!>',1);function Gr(X,s){Je(s,!0);let N=qe(s,"compact",3,!1),d=re(()=>Q.airPurifier),i=ce(!1),w=ce(!1);async function O(){var m;x(i,!0);try{await Ft({power:!((m=e(d))!=null&&m.power)}),await Q.refreshAirPurifier()}catch(p){console.error(p)}x(i,!1)}async function I(m){try{await Ft({mode:m}),await Q.refreshAirPurifier()}catch(p){console.error(p)}}function k(m){return m<=50?"text-green-400 bg-green-500/20":m<=100?"text-yellow-400 bg-yellow-500/20":m<=150?"text-orange-400 bg-orange-500/20":"text-red-400 bg-red-500/20"}function C(m){return m<=50?"Good":m<=100?"Moderate":m<=150?"Unhealthy":"Very Unhealthy"}const S={auto:"Auto",silent:"Night",favorite:"Manual"};var Y=Hr(),A=Z(Y);A.__click=()=>x(w,!0),A.__keydown=m=>m.key==="Enter"&&x(w,!0);var be=a(A),D=a(be);D.__click=m=>{m.stopPropagation(),O()};let ue;var ie=a(D);{var ke=m=>{var p=Rr();n(m,p)},pe=m=>{var p=Br();n(m,p)};j(ie,m=>{e(i)?m(ke):m(pe,!1)})}t(D);var ge=r(D,2),Se=r(a(ge),2);{var he=m=>{var p=Or(),o=a(p);t(p),h(()=>l(o,`${(S[e(d).mode]||e(d).mode)??""} ¬∑ ${e(d).aqi??""} AQI`)),n(m,p)},se=m=>{var p=Pr(),o=a(p,!0);t(p),h(()=>l(o,e(d)?"Off":"Offline")),n(m,p)};j(Se,m=>{var p;(p=e(d))!=null&&p.power?m(he):m(se,!1)})}t(ge);var T=r(ge,2);{var E=m=>{var p=Ar(),o=a(p,!0);t(p),h(_=>{y(p,1,`px-2 py-1 rounded-md text-xs font-medium shrink-0 ${_??""}`),l(o,e(d).aqi)},[()=>k(e(d).aqi)]),n(m,p)};j(T,m=>{var p;N()&&((p=e(d))!=null&&p.power)&&m(E)})}t(be),t(A);var M=r(A,2);et(M,{get open(){return e(w)},onclose:()=>x(w,!1),title:"Air Purifier",children:(m,p)=>{var o=Er(),_=a(o),L=r(a(_),2),_e=a(L,!0);t(L),t(_);var le=r(_,2);{var f=z=>{var K=Ir(),q=Z(K);q.__click=O;var c=a(q,!0);t(q);var g=r(q,2);{var v=b=>{var W=Wr(),J=Z(W),H=r(a(J),2),V=a(H,!0);t(H);var $=r(H,2),Ce=a($,!0);t($),t(J);var me=r(J,2),ye=r(a(me),2);Ne(ye,20,()=>[{value:"auto",label:"Auto"},{value:"silent",label:"Night"},{value:"favorite",label:"Manual"}],Ke,(R,B)=>{var P=Dr();P.__click=()=>I(B.value);var U=a(P,!0);t(P),h(()=>{y(P,1,`py-3 text-sm rounded-lg transition-colors
                       ${e(d).mode===B.value?"bg-cyan-500/20 text-cyan-400":"bg-zinc-800/60 text-zinc-400 hover:bg-zinc-700/60"}`),l(U,B.label)}),n(R,P)}),t(ye),t(me);var ee=r(me,2),de=a(ee);{var we=R=>{var B=Lr(),P=r(a(B),2),U=a(P);t(P),t(B),h(()=>l(U,`${e(d).humidity??""}%`)),n(R,B)};j(de,R=>{e(d).humidity!==void 0&&R(we)})}var Te=r(de,2);{var Re=R=>{var B=Vr(),P=r(a(B),2),U=a(P);t(P),t(B),h(()=>l(U,`${e(d).temperature??""}¬∞C`)),n(R,B)};j(Te,R=>{e(d).temperature!==void 0&&R(Re)})}var ze=r(Te,2);{var ne=R=>{var B=Nr(),P=r(a(B),2),U=a(P);t(P),t(B),h(()=>{y(P,1,`text-lg font-bold mt-1 ${e(d).filter_life<20?"text-red-400":""}`),l(U,`${e(d).filter_life??""}%`)}),n(R,B)};j(ze,R=>{e(d).filter_life!==void 0&&R(ne)})}t(ee),h((R,B)=>{y(J,1,`rounded-xl p-4 text-center ${R??""}`),l(V,e(d).aqi),l(Ce,B)},[()=>k(e(d).aqi),()=>C(e(d).aqi)]),n(b,W)};j(g,b=>{e(d).power&&b(v)})}ht(2),h(()=>{q.disabled=e(i),y(q,1,`w-full py-4 rounded-xl text-lg font-medium transition-all
               ${e(d).power?"bg-cyan-500/20 text-cyan-400":"bg-zinc-800 text-zinc-400"}
               hover:scale-[1.02] disabled:opacity-50`),l(c,e(d).power?"Turn Off":"Turn On")}),n(z,K)};j(le,z=>{e(d)&&z(f)})}t(o),h(()=>{var z,K;y(L,1,`font-medium ${(z=e(d))!=null&&z.power?"text-cyan-400":"text-zinc-500"}`),l(_e,(K=e(d))!=null&&K.power?"On":e(d)?"Off":"Offline")}),n(m,o)},$$slots:{default:!0}}),h(()=>{var m,p;y(A,1,`glass-card rounded-xl transition-card hover:scale-[1.02] ${N()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),D.disabled=e(i)||!e(d),ue=y(D,1,`w-9 h-9 rounded-lg flex items-center justify-center transition-all shrink-0
             ${(m=e(d))!=null&&m.power?"bg-cyan-500/20 text-cyan-400":"bg-zinc-800/60 text-zinc-500"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,ue,{"status-active":(p=e(d))==null?void 0:p.power})}),n(X,Y),Ue()}$e(["click","keydown"]);var Fr=u('<div class="glass-card rounded-xl p-2.5"><div class="flex items-center gap-2.5"><div class="w-9 h-9 rounded-lg bg-zinc-800 animate-pulse"></div> <div class="flex-1 space-y-1.5"><div class="w-20 h-3.5 rounded bg-zinc-800 animate-pulse"></div> <div class="w-14 h-3 rounded bg-zinc-800 animate-pulse"></div></div></div></div>'),Kr=u('<section><div class="w-20 h-5 rounded bg-zinc-800 animate-pulse mb-3"></div> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),Yr=u('<div class="space-y-6"></div>'),qr=u('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-amber-400">üí°</span> Lights <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),Jr=u('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-orange-400">üå°Ô∏è</span> Climate <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!> <!></div></section>'),Ur=u('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-cyan-400">üì°</span> Sensors <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),Qr=u('<section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-purple-400">üîä</span> Audio <span class="text-xs text-zinc-600"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),Xr=u('<!> <!> <!> <!> <section><h2 class="text-sm font-medium text-zinc-400 mb-3 flex items-center gap-2"><span class="text-green-400">ü§ñ</span> Robot <span class="text-xs text-zinc-600">(1)</span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!></div></section>',1),Zr=u('<div class="pb-24 space-y-6"><!></div>');function di(X,s){Je(s,!0);let N=re(()=>Q.lamps.filter(S=>S.category==="lamp")),d=re(()=>Q.tuyaDevices.filter(S=>S.category==="wkf")),i=re(()=>Q.tuyaDevices.filter(S=>["sj","mcs","wsdcg"].includes(S.category))),w=re(()=>Q.lamps.length>0||Q.tuyaDevices.length>0||Q.yamahaDevices.length>0);var O=Zr();ba("1uha8ag",S=>{da(()=>{va.title="Smart Home"})});var I=a(O);{var k=S=>{var Y=Yr();Ne(Y,20,()=>Array(3),Ke,(A,be)=>{var D=Kr(),ue=r(a(D),2);Ne(ue,20,()=>Array(4),Ke,(ie,ke,pe,ge)=>{var Se=Fr();n(ie,Se)}),t(ue),t(D),n(A,D)}),t(Y),n(S,Y)},C=S=>{var Y=Xr(),A=Z(Y);{var be=T=>{var E=qr(),M=a(E),m=r(a(M),2),p=a(m);t(m),t(M);var o=r(M,2);Ne(o,21,()=>e(N),_=>_.id,(_,L)=>{Na(_,{get lamp(){return e(L)},compact:!0})}),t(o),t(E),h(()=>l(p,`(${e(N).length??""})`)),n(T,E)};j(A,T=>{e(N).length>0&&T(be)})}var D=r(A,2);{var ue=T=>{var E=Jr(),M=a(E),m=r(a(M),2),p=a(m);t(m),t(M);var o=r(M,2),_=a(o);Ne(_,17,()=>e(d),le=>le.id,(le,f)=>{fr(le,{get device(){return e(f)},compact:!0})});var L=r(_,2);{var _e=le=>{Gr(le,{compact:!0})};j(L,le=>{Q.airPurifier&&le(_e)})}t(o),t(E),h(()=>l(p,`(${e(d).length+(Q.airPurifier?1:0)})`)),n(T,E)};j(D,T=>{(e(d).length>0||Q.airPurifier)&&T(ue)})}var ie=r(D,2);{var ke=T=>{var E=Ur(),M=a(E),m=r(a(M),2),p=a(m);t(m),t(M);var o=r(M,2);Ne(o,21,()=>e(i),_=>_.id,(_,L)=>{lr(_,{get device(){return e(L)},compact:!0})}),t(o),t(E),h(()=>l(p,`(${e(i).length??""})`)),n(T,E)};j(ie,T=>{e(i).length>0&&T(ke)})}var pe=r(ie,2);{var ge=T=>{var E=Qr(),M=a(E),m=r(a(M),2),p=a(m);t(m),t(M);var o=r(M,2);Ne(o,21,()=>Q.yamahaDevices,_=>_.id,(_,L)=>{Tr(_,{get device(){return e(L)},compact:!0})}),t(o),t(E),h(()=>l(p,`(${Q.yamahaDevices.length??""})`)),n(T,E)};j(pe,T=>{Q.yamahaDevices.length>0&&T(ge)})}var Se=r(pe,2),he=r(a(Se),2),se=a(he);rr(se,{get status(){return Q.roborock},compact:!0}),t(he),t(Se),n(S,Y)};j(I,S=>{Q.loading&&!e(w)?S(k):S(C,!1)})}t(O),n(X,O),Ue()}export{di as component};
