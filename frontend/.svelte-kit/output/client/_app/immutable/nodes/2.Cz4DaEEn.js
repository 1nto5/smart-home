import{d as bt,c as gt,e as ra,a as l,f as d,s as u,t as Ut,b as sa}from"../chunks/KsRpIQI_.js";import{h as Qt,a0 as vt,aD as ie,a6 as ut,a1 as a,a2 as t,a3 as r,a5 as g,b5 as ha,a7 as Ct,g as e,a4 as R,s as o,a9 as G,aN as Lt,R as Xt,K as ya,a8 as wa}from"../chunks/CxzkeP2L.js";import{i as _}from"../chunks/JY_fI8Mb.js";import{f as Zt,s as re,h as _t,e as qe,i as nt,j as ka,k as Ma,l as ea,m as Sa,n as Ta,o as Ca,p as ja,r as za,q as Pa,u as ta,v as ct,w as aa}from"../chunks/NTh6LLl8.js";import{h as Ra}from"../chunks/jdav0aRx.js";import{s as x,r as wt,b as Tt}from"../chunks/BRTiwp6z.js";import{p as dt,b as Ba}from"../chunks/FSvs7gAD.js";import{s as Oa}from"../chunks/Bcugs9fK.js";import{a as Da}from"../chunks/CxA4e2Oe.js";import{b as Aa}from"../chunks/DvcQTK2l.js";import{t as La}from"../chunks/Cc_vj6Fx.js";function St(X,i,z,h){var n=X.__style;if(Qt||n!==i){var C=Da(i,h);(!Qt||C!==X.getAttribute("style"))&&(C==null?X.removeAttribute("style"):X.style.cssText=C),X.__style=i}return h}const Va={"korytarz 1":"Hallway 1","korytarz 2":"Hallway 2",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",jadalnia:"Dining Room",gabinet:"Study",pralnia:"Laundry","Czujnik zalania kuchnia":"Water Sensor Kitchen","Czujnik zalania ≈Çazienka":"Water Sensor Bathroom","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Drzwi:"Door Sensor","Grzejnik salon":"Radiator Living Room","Grzejnik sypialnia":"Radiator Bedroom","Grzejnik kuchnia":"Radiator Kitchen","Grzejnik ≈Çazienka":"Radiator Bathroom","Grzejnik korytarz":"Radiator Hallway","Grzejnik pok√≥j dzieci":"Radiator Kids Room",Grzejnik:"Radiator"},Na={korytarz:"Hallway",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",pok√≥j:"Room",dzieci:"Kids","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Grzejnik:"Radiator",Drzwi:"Door",Lampa:"Light",du≈ºy:"Large",ma≈Çy:"Small",g≈Ç√≥wny:"Main",g√≥rny:"Upper",dolny:"Lower"};function jt(X){if(!X)return X;const i=X.toLowerCase();for(const[n,C]of Object.entries(Va))if(i===n.toLowerCase())return C;let z=X;const h=Object.entries(Na).sort((n,C)=>C[0].length-n[0].length);for(const[n,C]of h){const F=new RegExp(n,"gi");z=z.replace(F,C)}return z}function kt(X,i){let z=null;return[(...C)=>{z&&clearTimeout(z),z=setTimeout(()=>{z=null,X(...C)},i)},()=>{z&&(clearTimeout(z),z=null)}]}var Ea=d(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 dialog-overlay animate-fade-in svelte-alpl3u" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="dialog-content w-full max-w-md max-h-[80vh] overflow-hidden"><div class="flex items-center justify-between p-4 border-b border-stroke-default"><h2 id="dialog-title" class="text-lg font-semibold text-content-primary"> </h2> <button aria-label="Close dialog" class="w-10 h-10 rounded-xl bg-surface-recessed text-content-secondary hover:text-content-primary
                 hover:bg-stroke-default transition-colors flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 overflow-y-auto max-h-[calc(80vh-64px)]"><!></div></div></div>`);function Mt(X,i){vt(i,!0);let z=dt(i,"open",3,!1);function h(k){k.target===k.currentTarget&&i.onclose()}function n(k){k.key==="Escape"&&i.onclose()}var C=gt();ra("keydown",ha,n);var F=ie(C);{var q=k=>{var D=Ea();D.__click=h,D.__keydown=n;var w=a(D),E=a(w),j=a(E),se=a(j,!0);t(j);var I=r(j,2);I.__click=function(...ye){var B;(B=i.onclose)==null||B.apply(this,ye)},t(E);var A=r(E,2),$=a(A);Oa($,()=>i.children),t(A),t(w),t(D),g(()=>u(se,i.title)),l(k,D)};_(F,k=>{z()&&k(q)})}l(X,C),ut()}bt(["click","keydown"]);var Ia=d('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-lights-text rounded-full animate-pulse"></span>'),Wa=d('<p class="text-xs text-device-audio-text">Moonlight</p>'),Fa=d('<p class="text-xs text-content-secondary"> </p>'),Ha=d('<p class="text-xs text-content-secondary"> </p>'),Ga=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-lights-text rounded-full animate-pulse"></span>'),$a=d('<span class="absolute top-1 right-1 w-1.5 h-1.5 bg-device-lights-text rounded-full animate-pulse"></span>'),Ka=d("<button> <!></button>"),Ya=d('<div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Brightness</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="1" max="100" class="w-full"/></div> <div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Color Temperature</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="1700" max="6500" step="100" class="w-full"/> <div class="flex justify-between text-xs text-content-tertiary mt-1"><span>Warm</span> <span>Cool</span></div></div>',1),qa=d('<div class="py-4 text-center text-sm text-device-audio-text/80">Hardware night light mode active</div>'),Ja=d('<div><p class="text-sm text-content-secondary mb-2">Presets</p> <div class="grid grid-cols-3 gap-2"></div></div> <!>',1),Ua=d('<button> <!></button> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Model</span> <span class="font-mono text-xs text-content-tertiary"> </span></div> <div class="flex justify-between"><span class="text-content-secondary">IP Address</span> <span class="font-mono text-xs text-content-tertiary"> </span></div></div>',1),Qa=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span><!></span></div> <!></div>'),Xa=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a.75.75 0 01.75.75v6.5a.75.75 0 01-1.5 0v-6.5A.75.75 0 0110 2z"></path><path d="M5.404 4.343a.75.75 0 10-1.06 1.06 6.5 6.5 0 109.192 0 .75.75 0 00-1.06-1.06 5 5 0 11-7.072 0z"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function Za(X,i){vt(i,!0);let z=dt(i,"compact",3,!1),h=G(()=>jt(i.lamp.name)),n=G(()=>re.lampStatuses.get(i.lamp.id)),C=R(!1),F=R(!1),q=R(null),k=R(!1),D=R(null),w=R(null),E=R(null),j=G(()=>{var f;return e(q)??((f=e(n))==null?void 0:f.power)??!1}),se=G(()=>{var f;return e(w)??((f=e(n))==null?void 0:f.brightness)??0}),I=G(()=>{var f;return e(E)??((f=e(n))==null?void 0:f.color_temp)??0});Ct(()=>{e(C)||(o(C,!0),Zt(i.lamp.id).then(f=>re.updateLampStatus(i.lamp.id,f.status)).catch(()=>{}))});async function A(f){f.stopPropagation();const P=!e(j);o(q,P),o(k,!0);try{await _t(i.lamp.id,{toggle:!0}),$()}catch(te){console.error(te),o(q,null),o(k,!1)}}async function $(){try{const f=await Zt(i.lamp.id);re.updateLampStatus(i.lamp.id,f.status),o(q,null)}catch(f){console.error(f)}o(k,!1),o(D,null)}const[ye]=kt(async f=>{try{await _t(i.lamp.id,{brightness:f}),e(n)&&re.updateLampStatus(i.lamp.id,{...e(n),brightness:f})}catch(P){console.error(P)}o(w,null)},300),[B]=kt(async f=>{try{await _t(i.lamp.id,{color_temp:f}),e(n)&&re.updateLampStatus(i.lamp.id,{...e(n),color_temp:f})}catch(P){console.error(P)}o(E,null)},300);function ve(f){o(w,f,!0),ye(f)}function Se(f){o(E,f,!0),B(f)}const Be=[{id:"day",label:"Day",brightness:100,colorTemp:5e3,moonlight:!1},{id:"night",label:"Night",brightness:30,colorTemp:2700,moonlight:!1},{id:"moonlight",label:"Moonlight",brightness:10,colorTemp:2700,moonlight:!0}];async function Oe(f){var P,te;o(D,f.id,!0),f.moonlight?e(n)&&re.updateLampStatus(i.lamp.id,{...e(n),power:!0,moonlight_mode:!0,brightness:f.brightness}):e(n)&&re.updateLampStatus(i.lamp.id,{...e(n),power:!0,moonlight_mode:!1,brightness:f.brightness,color_temp:f.colorTemp});try{f.moonlight?await _t(i.lamp.id,{moonlight:!0,moonlight_brightness:f.brightness}):((P=e(n))!=null&&P.moonlight_mode?await _t(i.lamp.id,{moonlight:!1}):(te=e(n))!=null&&te.power||await _t(i.lamp.id,{power:!0}),await _t(i.lamp.id,{brightness:f.brightness,color_temp:f.colorTemp})),$()}catch(s){console.error(s),o(D,null),$()}}function J(f){var s,p,y,L;if(!e(j))return!1;if(f.moonlight)return((s=e(n))==null?void 0:s.moonlight_mode)??!1;if((p=e(n))!=null&&p.moonlight_mode)return!1;const P=Math.abs((((y=e(n))==null?void 0:y.brightness)??0)-f.brightness)<=5,te=Math.abs((((L=e(n))==null?void 0:L.color_temp)??0)-f.colorTemp)<=200;return P&&te}var U=Xa(),M=ie(U);M.__click=()=>o(F,!0),M.__keydown=f=>f.key==="Enter"&&o(F,!0);var K=a(M),S=a(K);S.__click=A;let T;var v=r(a(S),2);{var b=f=>{var P=Ia();l(f,P)};_(v,f=>{e(k)&&f(b)})}t(S);var Z=r(S,2),ee=a(Z),me=a(ee,!0);t(ee);var De=r(ee,2);{var Me=f=>{var P=gt(),te=ie(P);{var s=y=>{var L=Wa();l(y,L)},p=y=>{var L=Fa(),ne=a(L);t(L),g(()=>u(ne,`${e(se)??""}% ¬∑ ${e(I)??""}K`)),l(y,L)};_(te,y=>{var L;(L=e(n))!=null&&L.moonlight_mode?y(s):y(p,!1)})}l(f,P)},Xe=f=>{var P=Ha(),te=a(P,!0);t(P),g(()=>u(te,e(n)?"Off":"Offline")),l(f,P)};_(De,f=>{e(j)?f(Me):f(Xe,!1)})}t(Z),t(K),t(M);var je=r(M,2);Mt(je,{get open(){return e(F)},onclose:()=>o(F,!1),get title(){return e(h)},children:(f,P)=>{var te=Qa(),s=a(te),p=r(a(s),2),y=a(p);{var L=le=>{var ae=Ut();g(()=>{var c;return u(ae,(c=e(n))!=null&&c.moonlight_mode?"Moonlight":"On")}),l(le,ae)},ne=le=>{var ae=Ut();g(()=>u(ae,e(n)?"Off":"Offline")),l(le,ae)};_(y,le=>{e(j)?le(L):le(ne,!1)})}t(p),t(s);var Ve=r(s,2);{var Ae=le=>{var ae=Ua(),c=ie(ae);c.__click=A;var m=a(c),H=r(m);{var ce=N=>{var fe=Ga();l(N,fe)};_(H,N=>{e(k)&&N(ce)})}t(c);var ue=r(c,2);{var xe=N=>{var fe=Ja(),He=ie(fe),Ze=r(a(He),2);qe(Ze,21,()=>Be,nt,(Pe,we)=>{var Le=Ka();Le.__click=()=>Oe(e(we));var Ne=a(Le),et=r(Ne);{var Ce=ke=>{var Re=$a();l(ke,Re)};_(et,ke=>{e(D)===e(we).id&&ke(Ce)})}t(Le),g(ke=>{x(Le,1,`py-2.5 text-sm rounded-lg transition-all relative
                       ${ke??""}`),u(Ne,`${e(we).label??""} `)},[()=>J(e(we))||e(D)===e(we).id?e(we).moonlight?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"]),l(Pe,Le)}),t(Ze),t(He);var ot=r(He,2);{var Ge=Pe=>{var we=Ya(),Le=ie(we),Ne=a(Le),et=r(a(Ne),2),Ce=a(et);t(et),t(Ne);var ke=r(Ne,2);wt(ke),ke.__input=Q=>ve(parseInt(Q.currentTarget.value)),t(Le);var Re=r(Le,2),Ke=a(Re),Ee=r(a(Ke),2),Y=a(Ee);t(Ee),t(Ke);var W=r(Ke,2);wt(W),W.__input=Q=>Se(parseInt(Q.currentTarget.value)),Lt(2),t(Re),g(()=>{u(Ce,`${e(se)??""}%`),Tt(ke,e(se)),u(Y,`${e(I)??""}K`),Tt(W,e(I))}),l(Pe,we)},$e=Pe=>{var we=qa();l(Pe,we)};_(ot,Pe=>{e(n).moonlight_mode?Pe($e,!1):Pe(Ge)})}l(N,fe)};_(ue,N=>{e(j)&&N(xe)})}var ze=r(ue,2),de=a(ze),Te=r(a(de),2),oe=a(Te,!0);t(Te),t(de);var ge=r(de,2),O=r(a(ge),2),V=a(O,!0);t(O),t(ge),t(ze),g(()=>{x(c,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(j)?e(n).moonlight_mode?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),u(m,`${e(j)?"Turn Off":"Turn On"} `),u(oe,i.lamp.model),u(V,i.lamp.ip)}),l(le,ae)};_(Ve,le=>{e(n)&&le(Ae)})}t(te),g(()=>{var le;return x(p,1,`font-medium ${e(j)?(le=e(n))!=null&&le.moonlight_mode?"text-device-audio-text":"text-device-lights-text":"text-content-tertiary"}`)}),l(f,te)},$$slots:{default:!0}}),g(()=>{var f;x(M,1,`card transition-card hover:scale-[1.02] ${z()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),S.disabled=!e(n),T=x(S,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(j)?(f=e(n))!=null&&f.moonlight_mode?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,T,{"status-active":e(j)}),u(me,e(h))}),l(X,U),ut()}bt(["click","keydown","input"]);var er=d("<p> </p>"),tr=d('<p class="text-xs text-content-secondary">Offline</p>'),ar=d('<div class="flex items-center gap-1 text-xs shrink-0"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 11.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zm4-3a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-4z"></path><path d="M8 4.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v8a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-8z"></path></svg> <span> </span></div>'),rr=d('<span class="absolute top-1 right-1 w-2 h-2 bg-success rounded-full animate-pulse"></span>'),sr=d('<span class="absolute top-1 right-1 w-2 h-2 bg-warning rounded-full animate-pulse"></span>'),nr=d('<span class="absolute top-1 right-1 w-2 h-2 bg-info rounded-full animate-pulse"></span>'),or=d('<span class="absolute top-2 right-2 w-2 h-2 bg-content-secondary rounded-full animate-pulse"></span>'),ir=d('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-device-audio-text rounded-full animate-pulse"></span>'),lr=d('<button><div class="text-base mb-0.5"> </div> <!></button>'),cr=d('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-device-sensors-text rounded-full animate-pulse"></span>'),dr=d('<button><div class="text-base mb-0.5"> </div> <!></button>'),vr=d(`<div><p class="text-sm text-content-secondary mb-2">Actions</p> <div class="grid grid-cols-3 gap-2"><button class="py-4 rounded-xl bg-success/20 text-success text-sm font-medium relative
                     hover:bg-success/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> Start <!></button> <button class="py-4 rounded-xl bg-warning/20 text-warning text-sm font-medium relative
                     hover:bg-warning/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Pause <!></button> <button class="py-4 rounded-xl bg-info/20 text-info text-sm font-medium relative
                     hover:bg-info/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg> Home <!></button></div></div> <div><button class="w-full py-3 rounded-xl bg-surface-recessed text-content-secondary text-sm font-medium relative
                   hover:bg-stroke-default transition-colors">Find Robot <!></button></div> <div><p class="text-sm text-content-secondary mb-2">Suction Power</p> <div class="grid grid-cols-4 gap-1"></div></div> <div><p class="text-sm text-content-secondary mb-2">Mop Intensity</p> <div class="grid grid-cols-4 gap-1"></div></div>`,1),ur=d("<button> </button>"),fr=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-sensors-text rounded-full animate-pulse"></span>'),pr=d(`<button class="w-full mt-3 py-3 rounded-xl badge-sensors text-sm font-medium relative
                       hover:opacity-90 transition-colors"> <!></button>`),mr=d('<div class="grid grid-cols-2 gap-2"></div> <!>',1),xr=d('<p class="text-content-tertiary text-sm">Loading rooms...</p>'),_r=d('<div><p class="text-sm text-content-secondary mb-2">Select rooms to clean</p> <!></div>'),gr=d('<div><p class="text-sm text-content-secondary mb-3">Consumables</p> <div class="space-y-3"><div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Main Brush</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Side Brush</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Filter</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Sensors</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div></div></div>'),br=d('<p class="text-content-tertiary text-sm">Loading consumables...</p>'),hr=d('<div><div class="flex justify-between items-center mb-2"><span class="text-sm text-content-secondary">Volume</span> <span class="text-sm font-medium text-content-primary"> </span></div> <input type="range" min="0" max="100" step="10" class="w-full"/></div> <!>',1),yr=d('<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Battery</span> <p> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Fan Speed</span> <p class="text-2xl font-bold mt-1 text-content-primary"> </p></div></div> <div class="flex gap-1 bg-surface-recessed rounded-lg p-1"><button>Controls</button> <button>Rooms</button> <button>Settings</button></div> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Model</span> <span class="font-mono text-xs text-content-tertiary">Roborock S8</span></div></div>',1),wr=d('<div class="text-center py-8 text-content-secondary">Start bridge to control robot</div>'),kr=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),Mr=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z" clip-rule="evenodd"></path></svg></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate">Roborock</h4> <!></div> <!></div></div> <!>',1);function Sr(X,i){vt(i,!0);let z=dt(i,"compact",3,!1),h=R(!1),n=R(null),C=R(null),F=R(null),q=R(!1),k=R(null),D=R(null),w=R(null),E=G(()=>{var c;return e(D)??((c=i.status)==null?void 0:c.fanPower)??102}),j=G(()=>{var c;return e(w)??((c=i.status)==null?void 0:c.waterBoxMode)??200}),se=R(Xt([])),I=R(Xt(new Set)),A=R(30),$=R(null),ye=G(()=>e($)??e(A)),B=R(null),ve=R("controls");const Se={1:"Starting",2:"Charger disconnected",3:"Idle",4:"Remote control",5:"Cleaning",6:"Returning",7:"Manual mode",8:"Charging",9:"Charging problem",10:"Paused",11:"Spot cleaning",12:"Error",13:"Shutting down",14:"Updating",15:"Docking",16:"Going to target",17:"Zoned cleaning",18:"Segment cleaning",22:"Emptying dustbin",23:"Washing mop",26:"Going to wash mop"},Be=[{mode:101,name:"Quiet",icon:"üîá"},{mode:102,name:"Balanced",icon:"‚öñÔ∏è"},{mode:103,name:"Turbo",icon:"üí®"},{mode:104,name:"Max",icon:"üî•"}],Oe=[{mode:200,name:"Off",icon:"‚ùå"},{mode:201,name:"Low",icon:"üíß"},{mode:202,name:"Med",icon:"üíßüíß"},{mode:203,name:"High",icon:"üíßüíßüíß"}];function J(c){return Se[c]||"Unknown"}function U(c){const m=Be.find(H=>H.mode===c);return m?m.name:`${c}%`}async function M(){try{const[c,m,H]=await Promise.all([ka(),Ma(),ea()]);o(se,c.rooms,!0),o(A,m.volume,!0),o(B,H,!0)}catch(c){console.error("Failed to load extended data:",c)}}async function K(c){o(n,c,!0);try{await Sa(c),re.refreshRoborock()}catch(m){console.error(m)}o(n,null)}async function S(c){o(D,c,!0),o(C,c,!0);try{await Ta(c),re.refreshRoborock()}catch(m){console.error(m),o(D,null)}o(C,null)}async function T(c){o(w,c,!0),o(F,c,!0);try{await Ca(c),re.refreshRoborock()}catch(m){console.error(m),o(w,null)}o(F,null)}const[v]=kt(async c=>{try{await Pa(c),o(A,c,!0)}catch(m){console.error(m)}o($,null)},300);function b(c){o($,c,!0),v(c)}function Z(c){const m=new Set(e(I));m.has(c)?m.delete(c):m.add(c),o(I,m,!0)}async function ee(){if(e(I).size!==0){o(q,!0);try{await ja([...e(I)]),o(I,new Set,!0),re.refreshRoborock()}catch(c){console.error(c)}o(q,!1)}}function me(c,m){const H=c/3600;return Math.max(0,Math.min(100,H/m*100))}function De(c){return c<50?"bg-success":c<80?"bg-warning":"bg-error"}async function Me(c){o(k,c,!0);try{await za(c);const m=await ea();o(B,m,!0)}catch(m){console.error(m)}o(k,null)}function Xe(c){switch(c){case 5:case 11:case 17:case 18:return{color:"text-success",bg:"bg-success/20"};case 8:return{color:"text-info",bg:"bg-info/20"};case 3:return{color:"text-content-tertiary",bg:"bg-surface-recessed"};case 10:return{color:"text-warning",bg:"bg-warning/20"};case 6:case 15:case 16:case 26:return{color:"text-device-sensors-text",bg:"bg-device-sensors-bg"};case 12:case 9:return{color:"text-error",bg:"bg-error/20"};default:return{color:"text-content-tertiary",bg:"bg-surface-recessed"}}}let je=G(()=>i.status?Xe(i.status.state):{color:"text-content-tertiary",bg:"bg-surface-recessed"});Ct(()=>{e(h)&&M()});var f=Mr(),P=ie(f);P.__click=()=>o(h,!0),P.__keydown=c=>c.key==="Enter"&&o(h,!0);var te=a(P),s=a(te);let p;var y=r(s,2),L=r(a(y),2);{var ne=c=>{var m=er(),H=a(m,!0);t(m),g(ce=>{x(m,1,`text-xs ${e(je).color??""}`),u(H,ce)},[()=>J(i.status.state)]),l(c,m)},Ve=c=>{var m=tr();l(c,m)};_(L,c=>{i.status?c(ne):c(Ve,!1)})}t(y);var Ae=r(y,2);{var le=c=>{var m=ar(),H=a(m),ce=r(H,2),ue=a(ce);t(ce),t(m),g(()=>{x(H,0,`w-3.5 h-3.5 ${i.status.battery>20?"text-success":"text-error"}`),x(ce,1,i.status.battery>20?"text-content-secondary":"text-error"),u(ue,`${i.status.battery??""}%`)}),l(c,m)};_(Ae,c=>{z()&&i.status&&c(le)})}t(te),t(P);var ae=r(P,2);Mt(ae,{get open(){return e(h)},onclose:()=>o(h,!1),title:"Roborock",children:(c,m)=>{var H=kr(),ce=a(H),ue=r(a(ce),2),xe=a(ue,!0);t(ue),t(ce);var ze=r(ce,2);{var de=oe=>{var ge=yr(),O=ie(ge),V=a(O),N=r(a(V),2),fe=a(N);t(N),t(V);var He=r(V,2),Ze=r(a(He),2),ot=a(Ze,!0);t(Ze),t(He),t(O);var Ge=r(O,2),$e=a(Ge);$e.__click=()=>o(ve,"controls");var Pe=r($e,2);Pe.__click=()=>o(ve,"rooms");var we=r(Pe,2);we.__click=()=>o(ve,"settings"),t(Ge);var Le=r(Ge,2);{var Ne=Ce=>{var ke=vr(),Re=ie(ke),Ke=r(a(Re),2),Ee=a(Ke);Ee.__click=()=>K("start");var Y=r(a(Ee),2);{var W=pe=>{var _e=rr();l(pe,_e)};_(Y,pe=>{e(n)==="start"&&pe(W)})}t(Ee);var Q=r(Ee,2);Q.__click=()=>K("pause");var tt=r(a(Q),2);{var Ie=pe=>{var _e=sr();l(pe,_e)};_(tt,pe=>{e(n)==="pause"&&pe(Ie)})}t(Q);var he=r(Q,2);he.__click=()=>K("home");var be=r(a(he),2);{var Je=pe=>{var _e=nr();l(pe,_e)};_(be,pe=>{e(n)==="home"&&pe(Je)})}t(he),t(Ke),t(Re);var it=r(Re,2),ft=a(it);ft.__click=()=>K("find");var at=r(a(ft));{var Ue=pe=>{var _e=or();l(pe,_e)};_(at,pe=>{e(n)==="find"&&pe(Ue)})}t(ft),t(it);var Ye=r(it,2),lt=r(a(Ye),2);qe(lt,21,()=>Be,nt,(pe,_e)=>{var Fe=lr();Fe.__click=()=>S(e(_e).mode);var rt=a(Fe),pt=a(rt,!0);t(rt);var mt=r(rt),ht=r(mt);{var yt=st=>{var xt=ir();l(st,xt)};_(ht,st=>{e(C)===e(_e).mode&&st(yt)})}t(Fe),g(()=>{x(Fe,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${e(E)===e(_e).mode?"badge-audio ring-1 ring-device-audio-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(pt,e(_e).icon),u(mt,` ${e(_e).name??""} `)}),l(pe,Fe)}),t(lt),t(Ye);var We=r(Ye,2),Qe=r(a(We),2);qe(Qe,21,()=>Oe,nt,(pe,_e)=>{var Fe=dr();Fe.__click=()=>T(e(_e).mode);var rt=a(Fe),pt=a(rt,!0);t(rt);var mt=r(rt),ht=r(mt);{var yt=st=>{var xt=cr();l(st,xt)};_(ht,st=>{e(F)===e(_e).mode&&st(yt)})}t(Fe),g(()=>{x(Fe,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${e(j)===e(_e).mode?"badge-sensors ring-1 ring-device-sensors-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(pt,e(_e).icon),u(mt,` ${e(_e).name??""} `)}),l(pe,Fe)}),t(Qe),t(We),l(Ce,ke)},et=Ce=>{var ke=gt(),Re=ie(ke);{var Ke=Y=>{var W=_r(),Q=r(a(W),2);{var tt=he=>{var be=mr(),Je=ie(be);qe(Je,21,()=>e(se),nt,(at,Ue)=>{var Ye=ur();Ye.__click=()=>Z(e(Ue).segmentId);var lt=a(Ye,!0);t(Ye),g(We=>{x(Ye,1,`py-3 px-3 rounded-xl text-sm font-medium transition-colors text-left
                         ${We??""}`),u(lt,e(Ue).name)},[()=>e(I).has(e(Ue).segmentId)?"badge-sensors ring-1 ring-device-sensors-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"]),l(at,Ye)}),t(Je);var it=r(Je,2);{var ft=at=>{var Ue=pr();Ue.__click=ee;var Ye=a(Ue),lt=r(Ye);{var We=Qe=>{var pe=fr();l(Qe,pe)};_(lt,Qe=>{e(q)&&Qe(We)})}t(Ue),g(()=>u(Ye,`Clean ${e(I).size??""} room${e(I).size>1?"s":""} `)),l(at,Ue)};_(it,at=>{e(I).size>0&&at(ft)})}l(he,be)},Ie=he=>{var be=xr();l(he,be)};_(Q,he=>{e(se).length>0?he(tt):he(Ie,!1)})}t(W),l(Y,W)},Ee=Y=>{var W=gt(),Q=ie(W);{var tt=Ie=>{var he=hr(),be=ie(he),Je=a(be),it=r(a(Je),2),ft=a(it);t(it),t(Je);var at=r(Je,2);wt(at),at.__input=We=>b(parseInt(We.currentTarget.value)),t(be);var Ue=r(be,2);{var Ye=We=>{var Qe=gr(),pe=r(a(Qe),2),_e=a(pe),Fe=a(_e),rt=r(a(Fe),2),pt=a(rt),mt=a(pt);t(pt);var ht=r(pt,2);ht.__click=()=>Me("main_brush_work_time"),t(rt),t(Fe);var yt=r(Fe,2),st=a(yt);t(yt),t(_e);var xt=r(_e,2),zt=a(xt),Vt=r(a(zt),2),Pt=a(Vt),na=a(Pt);t(Pt);var Nt=r(Pt,2);Nt.__click=()=>Me("side_brush_work_time"),t(Vt),t(zt);var Et=r(zt,2),It=a(Et);t(Et),t(xt);var Rt=r(xt,2),Bt=a(Rt),Wt=r(a(Bt),2),Ot=a(Wt),oa=a(Ot);t(Ot);var Ft=r(Ot,2);Ft.__click=()=>Me("filter_work_time"),t(Wt),t(Bt);var Ht=r(Bt,2),Gt=a(Ht);t(Ht),t(Rt);var $t=r(Rt,2),Dt=a($t),Kt=r(a(Dt),2),At=a(Kt),ia=a(At);t(At);var Yt=r(At,2);Yt.__click=()=>Me("sensor_dirty_time"),t(Kt),t(Dt);var qt=r(Dt,2),Jt=a(qt);t(qt),t($t),t(pe),t(Qe),g((la,ca,da,va,ua,fa,pa,ma,xa,_a,ga,ba)=>{u(mt,`${la??""}h`),x(ht,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary relative ${e(k)==="main_brush_work_time"?"opacity-50":""}`),x(st,1,`h-full ${ca??""} transition-all`),St(st,`width: ${da??""}%`),u(na,`${va??""}h`),x(Nt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="side_brush_work_time"?"opacity-50":""}`),x(It,1,`h-full ${ua??""} transition-all`),St(It,`width: ${fa??""}%`),u(oa,`${pa??""}h`),x(Ft,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="filter_work_time"?"opacity-50":""}`),x(Gt,1,`h-full ${ma??""} transition-all`),St(Gt,`width: ${xa??""}%`),u(ia,`${_a??""}h`),x(Yt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="sensor_dirty_time"?"opacity-50":""}`),x(Jt,1,`h-full ${ga??""} transition-all`),St(Jt,`width: ${ba??""}%`)},[()=>Math.round(e(B).mainBrushWorkTime/3600),()=>De(me(e(B).mainBrushWorkTime,300)),()=>me(e(B).mainBrushWorkTime,300),()=>Math.round(e(B).sideBrushWorkTime/3600),()=>De(me(e(B).sideBrushWorkTime,200)),()=>me(e(B).sideBrushWorkTime,200),()=>Math.round(e(B).filterWorkTime/3600),()=>De(me(e(B).filterWorkTime,150)),()=>me(e(B).filterWorkTime,150),()=>Math.round(e(B).sensorDirtyTime/3600),()=>De(me(e(B).sensorDirtyTime,30)),()=>me(e(B).sensorDirtyTime,30)]),l(We,Qe)},lt=We=>{var Qe=br();l(We,Qe)};_(Ue,We=>{e(B)?We(Ye):We(lt,!1)})}g(()=>{u(ft,`${e(ye)??""}%`),Tt(at,e(ye))}),l(Ie,he)};_(Q,Ie=>{e(ve)==="settings"&&Ie(tt)},!0)}l(Y,W)};_(Re,Y=>{e(ve)==="rooms"?Y(Ke):Y(Ee,!1)},!0)}l(Ce,ke)};_(Le,Ce=>{e(ve)==="controls"?Ce(Ne):Ce(et,!1)})}Lt(2),g(Ce=>{x(N,1,`text-3xl font-bold mt-1 ${i.status.battery>20?"text-content-primary":"text-error"}`),u(fe,`${i.status.battery??""}%`),u(ot,Ce),x($e,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(ve)==="controls"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`),x(Pe,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(ve)==="rooms"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`),x(we,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(ve)==="settings"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`)},[()=>U(i.status.fanPower)]),l(oe,ge)},Te=oe=>{var ge=wr();l(oe,ge)};_(ze,oe=>{i.status?oe(de):oe(Te,!1)})}t(H),g(oe=>{x(ue,1,`font-medium ${e(je).color??""}`),u(xe,oe)},[()=>i.status?J(i.status.state):"Offline"]),l(c,H)},$$slots:{default:!0}}),g(()=>{var c,m,H,ce;x(P,1,`card transition-card hover:scale-[1.02] ${z()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),p=x(s,1,`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${e(je).bg??""} ${e(je).color??""}`,null,p,{"status-active":((c=i.status)==null?void 0:c.state)===5||((m=i.status)==null?void 0:m.state)===11||((H=i.status)==null?void 0:H.state)===17||((ce=i.status)==null?void 0:ce.state)===18})}),l(X,f),ut()}bt(["click","keydown","input"]);var Tr=d('<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Temperature</span> <p class="text-2xl font-bold mt-1 text-device-sensors-text"> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Humidity</span> <p class="text-2xl font-bold mt-1 text-info"> </p></div></div>'),Cr=d('<div class="bg-surface-recessed rounded-xl p-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Battery</span> <span> </span></div> <div class="mt-2 h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div>'),jr=d('<div class="space-y-4"><div><span class="text-4xl"> </span> <p> </p> <p class="text-sm text-content-secondary mt-1"> </p></div> <!> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Type</span> <span class="font-medium text-content-primary"> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Online</span> <span> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Device ID</span> <span class="font-mono text-xs text-content-tertiary"> </span></div></div></div>'),zr=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div> </div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <p> </p></div> <div></div></div></div> <!>',1);function Pr(X,i){vt(i,!0);let z=dt(i,"compact",3,!1),h=G(()=>jt(i.device.name)),n=R(!1),C=G(()=>()=>{if(!i.device.last_status)return null;try{return JSON.parse(i.device.last_status)}catch{return null}});const F={sj:{label:"Water",icon:"üíß"},mcs:{label:"Door",icon:"üö™"},wsdcg:{label:"Climate",icon:"üå°Ô∏è"},wfcon:{label:"Gateway",icon:"üì°"},cz:{label:"Remote",icon:"üì∫"}},q=15;function k(M,K){if(!M)return K==="sj"||K==="mcs"?{text:"Monitoring",alert:!1,color:"text-content-tertiary",lowBattery:!1}:{text:"No data",alert:!1,color:"text-content-tertiary",lowBattery:!1};switch(K){case"sj":{const S=M[1],T=S==="alarm"||S==="1"||S===1,v=M[4],b=v!==void 0&&v<=q;return T?{text:"Water detected!",alert:!0,color:"text-error",lowBattery:b,batteryPercent:v}:{text:b?`Dry ¬∑ ${v}%`:"Dry",alert:!1,color:"text-success",lowBattery:b,batteryPercent:v}}case"mcs":{const S=M[101]===!0||M[1]===!0,T=M[103]||M[4],v=T!==void 0&&T<=q;return{text:v?`${S?"Open":"Closed"} ¬∑ ${T}%`:S?"Open":"Closed",alert:S,color:S?"text-warning":"text-success",lowBattery:v,batteryPercent:T}}case"wsdcg":{const S=M[103],T=M[102];return S!==void 0&&T!==void 0?{text:`${(S/100).toFixed(1)}¬∞C ¬∑ ${T}%`,alert:!1,color:"text-device-sensors-text",lowBattery:!1}:{text:"N/A",alert:!1,color:"text-content-tertiary",lowBattery:!1}}default:return{text:i.device.online?"Online":"Offline",alert:!1,color:i.device.online?"text-success":"text-content-tertiary",lowBattery:!1}}}let D=G(()=>F[i.device.category]||{label:i.device.category,icon:"üì±"}),w=G(()=>k(e(C)(),i.device.category));var E=zr(),j=ie(E);j.__click=()=>o(n,!0),j.__keydown=M=>M.key==="Enter"&&o(n,!0);var se=a(j),I=a(se);let A;var $=a(I,!0);t(I);var ye=r(I,2),B=a(ye),ve=a(B,!0);t(B);var Se=r(B,2),Be=a(Se,!0);t(Se),t(ye);var Oe=r(ye,2);let J;t(se),t(j);var U=r(j,2);Mt(U,{get open(){return e(n)},onclose:()=>o(n,!1),get title(){return e(h)},children:(M,K)=>{var S=jr(),T=a(S),v=a(T),b=a(v,!0);t(v);var Z=r(v,2),ee=a(Z,!0);t(Z);var me=r(Z,2),De=a(me);t(me),t(T);var Me=r(T,2);{var Xe=ae=>{const c=G(()=>e(C)());var m=gt(),H=ie(m);{var ce=ue=>{var xe=Tr(),ze=a(xe),de=r(a(ze),2),Te=a(de);t(de),t(ze);var oe=r(ze,2),ge=r(a(oe),2),O=a(ge);t(ge),t(oe),t(xe),g(V=>{u(Te,`${V??""}¬∞C`),u(O,`${e(c)[102]??""}%`)},[()=>(e(c)[103]/100).toFixed(1)]),l(ue,xe)};_(H,ue=>{e(c)&&ue(ce)})}l(ae,m)};_(Me,ae=>{i.device.category==="wsdcg"&&ae(Xe)})}var je=r(Me,2);{var f=ae=>{const c=G(()=>e(C)());var m=gt(),H=ie(m);{var ce=ue=>{const xe=G(()=>e(c)[4]||e(c)[103]);var ze=gt(),de=ie(ze);{var Te=oe=>{var ge=Cr(),O=a(ge),V=r(a(O),2),N=a(V);t(V),t(O);var fe=r(O,2),He=a(fe);t(fe),t(ge),g(()=>{x(V,1,`font-bold ${e(xe)>20?"text-success":"text-error"}`),u(N,`${e(xe)??""}%`),x(He,1,`h-full rounded-full transition-all ${e(xe)>20?"bg-success":"bg-error"}`),St(He,`width: ${e(xe)??""}%`)}),l(oe,ge)};_(de,oe=>{e(xe)!==void 0&&oe(Te)})}l(ue,ze)};_(H,ue=>{e(c)&&ue(ce)})}l(ae,m)};_(je,ae=>{(i.device.category==="sj"||i.device.category==="mcs")&&ae(f)})}var P=r(je,2),te=a(P),s=r(a(te),2),p=a(s,!0);t(s),t(te);var y=r(te,2),L=r(a(y),2),ne=a(L,!0);t(L),t(y);var Ve=r(y,2),Ae=r(a(Ve),2),le=a(Ae);t(Ae),t(Ve),t(P),t(S),g(ae=>{x(T,1,`rounded-xl p-6 text-center ${e(w).alert?"bg-error/20":"bg-surface-recessed"}`),u(b,e(D).icon),x(Z,1,`text-2xl font-bold mt-2 ${e(w).color??""}`),u(ee,e(w).text),u(De,`${e(D).label??""} Sensor`),u(p,e(D).label),x(L,1,i.device.online?"text-success":"text-error"),u(ne,i.device.online?"Yes":"No"),u(le,`${ae??""}...`)},[()=>i.device.id.slice(0,12)]),l(M,S)},$$slots:{default:!0}}),g(()=>{x(j,1,`card transition-card hover:scale-[1.02] ${z()?"p-2.5":"p-3"} w-full text-left cursor-pointer
         ${e(w).lowBattery?"border-warning/50 bg-warning/10":""}`),A=x(I,1,`w-10 h-10 rounded-xl flex items-center justify-center text-base shrink-0
             ${e(w).alert?"bg-error/20":e(w).lowBattery?"bg-warning/20":"badge-sensors"}`,null,A,{"status-active":e(w).alert}),u($,e(D).icon),u(ve,e(h)),x(Se,1,`text-xs ${(e(w).lowBattery?"text-warning":e(w).color)??""}`),u(Be,e(w).text),J=x(Oe,1,`w-2 h-2 rounded-full shrink-0
             ${i.device.online?"bg-success":"bg-content-tertiary"}`,null,J,{"status-dot":i.device.online})}),l(X,E),ut()}bt(["click","keydown"]);var Rr=sa('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd"></path></svg>'),Br=sa('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M5.05 3.636a1 1 0 010 1.414 7 7 0 000 9.9 1 1 0 11-1.414 1.414 9 9 0 010-12.728 1 1 0 011.414 0zm9.9 0a1 1 0 011.414 0 9 9 0 010 12.728 1 1 0 11-1.414-1.414 7 7 0 000-9.9 1 1 0 010-1.414zM7.879 6.464a1 1 0 010 1.414 3 3 0 000 4.243 1 1 0 11-1.415 1.414 5 5 0 010-7.07 1 1 0 011.415 0zm4.242 0a1 1 0 011.415 0 5 5 0 010 7.072 1 1 0 01-1.415-1.415 3 3 0 000-4.242 1 1 0 010-1.415zM10 9a1 1 0 011 1v.01a1 1 0 11-2 0V10a1 1 0 011-1z"></path></svg>'),Or=d('<p class="text-xs text-content-secondary"> </p>'),Dr=d('<p class="text-xs text-content-secondary">No data</p>'),Ar=d('<input type="number" min="5" max="30" step="0.5" class="text-3xl font-bold w-24 text-center bg-transparent border-b-2 border-device-climate-heat-text outline-none text-content-primary [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/>'),Lr=d('<button class="text-3xl font-bold w-24 text-center text-content-primary hover:text-device-climate-heat-text transition-colors cursor-text" title="Click to edit"> </button>'),Vr=d('<span class="absolute -top-1 -right-1 w-2 h-2 bg-device-climate-heat-text rounded-full animate-pulse"></span>'),Nr=d('<span class="absolute -top-1 -right-1 w-2 h-2 bg-error rounded-full"></span>'),Er=d("<button> </button>"),Ir=d(`<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary uppercase tracking-wide">Current</span> <p class="text-3xl font-bold mt-1 text-content-primary"> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary uppercase tracking-wide">Target</span> <p class="text-3xl font-bold mt-1 text-device-climate-heat-text"> </p></div></div> <div><p class="text-sm text-content-secondary mb-3">Set Temperature</p> <div class="flex items-center justify-center gap-4"><button class="w-14 h-14 rounded-full badge-climate-cool text-2xl font-medium
                   hover:opacity-80 disabled:opacity-50 transition-all">‚àí</button> <div class="relative"><!> <!> <!></div> <button class="w-14 h-14 rounded-full badge-climate-heat text-2xl font-medium
                   hover:opacity-80 disabled:opacity-50 transition-all">+</button></div></div> <div><p class="text-sm text-content-secondary mb-2">Quick Set</p> <div class="grid grid-cols-4 gap-2"></div></div>`,1),Wr=d('<div class="text-center py-8 text-content-secondary">No data available</div>'),Fr=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Valve</span> <span> </span></div> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Device ID</span> <span class="font-mono text-xs text-content-tertiary"> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Online</span> <span> </span></div></div></div>'),Hr=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><!></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function Gr(X,i){vt(i,!0);let z=dt(i,"device",7),h=dt(i,"compact",3,!1),n=G(()=>jt(z().name)),C=R(!1),F=R(null),q=R(!1),k=R(!1),D=R(!1),w=R(""),E=R(null),j=G(()=>()=>{if(!z().last_status)return null;try{return JSON.parse(z().last_status)}catch{return null}}),se=G(()=>{var s;return(s=e(j)())!=null&&s["5"]?e(j)()[5]/10:null}),I=G(()=>{var s;return(s=e(j)())!=null&&s["4"]?e(j)()[4]/10:null}),A=G(()=>e(F)??e(I)),$=G(()=>{var s;return((s=e(j)())==null?void 0:s["3"])||"unknown"});const[ye,B]=kt(s=>{ve(s)},500);async function ve(s){o(q,!0),o(k,!1);const p=e(I);try{await fetch(`/api/devices/${z().id}/control`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dps:4,value:Math.round(s*10)})}),Se()}catch(y){console.error(y),o(k,!0),o(F,p,!0),setTimeout(()=>o(k,!1),3e3)}}async function Se(){try{const s=await fetch(`/api/devices/${z().id}/status`);if(s.ok){const p=await s.json();z().last_status=JSON.stringify(p.status),o(F,null)}}catch(s){console.error(s)}o(q,!1)}function Be(s){if(e(A)===null)return;const p=Math.max(5,Math.min(30,e(A)+s));o(F,p,!0),ye(p)}function Oe(s){o(F,s,!0),B(),ve(s)}function J(){e(A)!==null&&(o(w,e(A).toString(),!0),o(D,!0),La().then(()=>{var s;return(s=e(E))==null?void 0:s.select()}))}function U(){const s=parseFloat(e(w));if(!isNaN(s)&&s>=5&&s<=30){const p=Math.round(s*2)/2;Oe(p)}o(D,!1)}function M(){o(D,!1)}var K=Hr(),S=ie(K);S.__click=()=>o(C,!0),S.__keydown=s=>s.key==="Enter"&&o(C,!0);var T=a(S),v=a(T);let b;var Z=a(v);{var ee=s=>{var p=Rr();l(s,p)},me=s=>{var p=Br();l(s,p)};_(Z,s=>{e($)==="opened"?s(ee):s(me,!1)})}t(v);var De=r(v,2),Me=a(De),Xe=a(Me,!0);t(Me);var je=r(Me,2);{var f=s=>{var p=Or(),y=a(p);t(p),g(()=>u(y,`${e(se)??""}¬∞C ${e($)==="opened"?"‚Üí":"¬∑"} ${e(A)??""}¬∞C`)),l(s,p)},P=s=>{var p=Dr();l(s,p)};_(je,s=>{e(se)!==null?s(f):s(P,!1)})}t(De),t(T),t(S);var te=r(S,2);Mt(te,{get open(){return e(C)},onclose:()=>o(C,!1),get title(){return e(n)},children:(s,p)=>{var y=Fr(),L=a(y),ne=r(a(L),2),Ve=a(ne,!0);t(ne),t(L);var Ae=r(L,2);{var le=de=>{var Te=Ir(),oe=ie(Te),ge=a(oe),O=r(a(ge),2),V=a(O);t(O),t(ge);var N=r(ge,2),fe=r(a(N),2),He=a(fe);t(fe),t(N),t(oe);var Ze=r(oe,2),ot=r(a(Ze),2),Ge=a(ot);Ge.__click=()=>Be(-.5);var $e=r(Ge,2),Pe=a($e);{var we=Y=>{var W=Ar();wt(W),W.__keydown=Q=>{Q.key==="Enter"&&U(),Q.key==="Escape"&&M()},Ba(W,Q=>o(E,Q),()=>e(E)),ra("blur",W,U),Aa(W,()=>e(w),Q=>o(w,Q)),l(Y,W)},Le=Y=>{var W=Lr();W.__click=J;var Q=a(W);t(W),g(()=>u(Q,`${e(A)??""}¬∞C`)),l(Y,W)};_(Pe,Y=>{e(D)?Y(we):Y(Le,!1)})}var Ne=r(Pe,2);{var et=Y=>{var W=Vr();l(Y,W)};_(Ne,Y=>{e(q)&&Y(et)})}var Ce=r(Ne,2);{var ke=Y=>{var W=Nr();l(Y,W)};_(Ce,Y=>{e(k)&&Y(ke)})}t($e);var Re=r($e,2);Re.__click=()=>Be(.5),t(ot),t(Ze);var Ke=r(Ze,2),Ee=r(a(Ke),2);qe(Ee,20,()=>[15,18,21,24],nt,(Y,W)=>{var Q=Er();Q.__click=()=>Oe(W);var tt=a(Q);t(Q),g(()=>{x(Q,1,`py-2 text-sm rounded-lg transition-colors
                     ${e(A)===W?"badge-climate-heat":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(tt,`${W??""}¬∞`)}),l(Y,Q)}),t(Ee),t(Ke),g(()=>{u(V,`${e(se)??""}¬∞C`),u(He,`${e(A)??""}¬∞C`),Ge.disabled=e(A)!==null&&e(A)<=5,Re.disabled=e(A)!==null&&e(A)>=30}),l(de,Te)},ae=de=>{var Te=Wr();l(de,Te)};_(Ae,de=>{e(se)!==null&&e(A)!==null?de(le):de(ae,!1)})}var c=r(Ae,2),m=a(c),H=r(a(m),2),ce=a(H);t(H),t(m);var ue=r(m,2),xe=r(a(ue),2),ze=a(xe,!0);t(xe),t(ue),t(c),t(y),g(de=>{x(ne,1,`font-medium ${e($)==="opened"?"text-device-climate-heat-text":"text-device-climate-cool-text"}`),u(Ve,e($)==="opened"?"Heating":"Idle"),u(ce,`${de??""}...`),x(xe,1,z().online?"text-success":"text-error"),u(ze,z().online?"Yes":"No")},[()=>z().id.slice(0,12)]),l(s,y)},$$slots:{default:!0}}),g(()=>{x(S,1,`card transition-card hover:scale-[1.02] ${h()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b=x(v,1,`w-10 h-10 rounded-xl flex items-center justify-center shrink-0
             ${e($)==="opened"?"badge-climate-heat":"badge-climate-cool"}`,null,b,{"status-active":e($)==="opened"}),u(Xe,e(n))}),l(X,K),ut()}bt(["click","keydown"]);var $r=d('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-audio-text rounded-full animate-pulse"></span>'),Kr=d('<p class="text-xs text-content-secondary"> </p>'),Yr=d('<p class="text-xs text-content-secondary"> </p>'),qr=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-audio-text rounded-full animate-pulse"></span>'),Jr=d("<button> </button>"),Ur=d("<button> </button>"),Qr=d('<div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Volume</span> <span class="font-medium text-content-primary"> </span></div> <div class="flex gap-2 items-center"><input type="range" min="0" max="100" class="flex-1"/> <button> </button></div></div> <div><p class="text-sm text-content-secondary mb-2">Input</p> <div class="grid grid-cols-2 gap-2"></div></div> <div><p class="text-sm text-content-secondary mb-2">Sound Program</p> <div class="grid grid-cols-3 gap-2"></div></div> <div><p class="text-sm text-content-secondary mb-2">Audio</p> <div class="grid grid-cols-2 gap-2"><button>Clear Voice</button> <button>Bass Ext.</button></div></div> <div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Subwoofer</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="-6" max="6" step="1" class="w-full"/></div>',1),Xr=d('<button> <!></button> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Model</span> <span class="font-mono text-xs text-content-tertiary"> </span></div></div>',1),Zr=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),es=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function ts(X,i){vt(i,!0);let z=dt(i,"compact",3,!1),h=G(()=>jt(i.device.name)),n=R(null),C=R(!1),F=R(!1),q=R(null),k=R(!1),D=R(null),w=R(null),E=G(()=>{var s;return e(q)??((s=e(n))==null?void 0:s.power)??"standby"}),j=G(()=>{var s;return e(D)??((s=e(n))==null?void 0:s.volume)??0}),se=G(()=>{var s;return e(w)??((s=e(n))==null?void 0:s.subwoofer_volume)??0});Ct(()=>{if(!e(C)&&i.device.last_status)try{o(n,JSON.parse(i.device.last_status),!0)}catch{}}),Ct(()=>{e(C)||(o(C,!0),ta(i.device.id).then(s=>o(n,s.status,!0)).catch(()=>{}))});async function I(){const s=e(E)==="on"?"standby":"on";o(q,s,!0),o(k,!0);try{await ct(i.device.id,{power:s==="on"}),A()}catch(p){console.error(p),o(q,null),o(k,!1)}}async function A(){try{const s=await ta(i.device.id);o(n,s.status,!0),o(q,null)}catch(s){console.error(s)}o(k,!1)}const[$]=kt(async s=>{try{await ct(i.device.id,{volume:s}),e(n)&&o(n,{...e(n),volume:s},!0)}catch(p){console.error(p)}o(D,null)},300),[ye]=kt(async s=>{try{await ct(i.device.id,{subwoofer_volume:s}),e(n)&&o(n,{...e(n),subwoofer_volume:s},!0)}catch(p){console.error(p)}o(w,null)},300);function B(s){o(D,s,!0),$(s)}function ve(s){o(w,s,!0),ye(s)}async function Se(){var p;const s=!((p=e(n))!=null&&p.mute);e(n)&&o(n,{...e(n),mute:s},!0);try{await ct(i.device.id,{mute:s})}catch(y){console.error(y),e(n)&&o(n,{...e(n),mute:!s},!0)}}async function Be(s){var y;const p=(y=e(n))==null?void 0:y.input;e(n)&&o(n,{...e(n),input:s},!0);try{await ct(i.device.id,{input:s})}catch(L){console.error(L),e(n)&&p&&o(n,{...e(n),input:p},!0)}}async function Oe(s){var y;const p=(y=e(n))==null?void 0:y.sound_program;e(n)&&o(n,{...e(n),sound_program:s},!0);try{await ct(i.device.id,{sound_program:s})}catch(L){console.error(L),e(n)&&p&&o(n,{...e(n),sound_program:p},!0)}}async function J(){var p;const s=!((p=e(n))!=null&&p.clear_voice);e(n)&&o(n,{...e(n),clear_voice:s},!0);try{await ct(i.device.id,{clear_voice:s})}catch(y){console.error(y),e(n)&&o(n,{...e(n),clear_voice:!s},!0)}}async function U(){var p;const s=!((p=e(n))!=null&&p.bass_extension);e(n)&&o(n,{...e(n),bass_extension:s},!0);try{await ct(i.device.id,{bass_extension:s})}catch(y){console.error(y),e(n)&&o(n,{...e(n),bass_extension:!s},!0)}}const M=["tv","bluetooth"],K=[{id:"movie",label:"Movie"},{id:"music",label:"Music"},{id:"sports",label:"Sports"},{id:"game",label:"Game"},{id:"tv_program",label:"TV"},{id:"stereo",label:"Stereo"}];var S=es(),T=ie(S);T.__click=()=>o(F,!0),T.__keydown=s=>s.key==="Enter"&&o(F,!0);var v=a(T),b=a(v);b.__click=s=>{s.stopPropagation(),I()};let Z;var ee=r(a(b),2);{var me=s=>{var p=$r();l(s,p)};_(ee,s=>{e(k)&&s(me)})}t(b);var De=r(b,2),Me=a(De),Xe=a(Me,!0);t(Me);var je=r(Me,2);{var f=s=>{var p=Kr(),y=a(p);t(p),g(()=>{var L,ne;return u(y,`${(L=e(n))!=null&&L.mute?"Muted":`${e(j)}%`} ¬∑ ${((ne=e(n))==null?void 0:ne.input)??""}`)}),l(s,p)},P=s=>{var p=Yr(),y=a(p,!0);t(p),g(()=>u(y,e(n)?"Standby":"Offline")),l(s,p)};_(je,s=>{e(E)==="on"?s(f):s(P,!1)})}t(De),t(v),t(T);var te=r(T,2);Mt(te,{get open(){return e(F)},onclose:()=>o(F,!1),get title(){return e(h)},children:(s,p)=>{var y=Zr(),L=a(y),ne=r(a(L),2),Ve=a(ne,!0);t(ne),t(L);var Ae=r(L,2);{var le=ae=>{var c=Xr(),m=ie(c);m.__click=I;var H=a(m),ce=r(H);{var ue=O=>{var V=qr();l(O,V)};_(ce,O=>{e(k)&&O(ue)})}t(m);var xe=r(m,2);{var ze=O=>{var V=Qr(),N=ie(V),fe=a(N),He=r(a(fe),2),Ze=a(He,!0);t(He),t(fe);var ot=r(fe,2),Ge=a(ot);wt(Ge),Ge.__input=Ie=>B(parseInt(Ie.currentTarget.value));var $e=r(Ge,2);$e.__click=Se;var Pe=a($e,!0);t($e),t(ot),t(N);var we=r(N,2),Le=r(a(we),2);qe(Le,21,()=>M,nt,(Ie,he)=>{var be=Jr();be.__click=()=>Be(e(he));var Je=a(be,!0);t(be),g(()=>{x(be,1,`py-3 text-sm rounded-lg transition-colors uppercase
                       ${e(n).input===e(he)?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Je,e(he)==="bluetooth"?"BT":"TV")}),l(Ie,be)}),t(Le),t(we);var Ne=r(we,2),et=r(a(Ne),2);qe(et,21,()=>K,nt,(Ie,he)=>{var be=Ur();be.__click=()=>Oe(e(he).id);var Je=a(be,!0);t(be),g(()=>{x(be,1,`py-2.5 text-sm rounded-lg transition-colors
                       ${e(n).sound_program===e(he).id?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Je,e(he).label)}),l(Ie,be)}),t(et),t(Ne);var Ce=r(Ne,2),ke=r(a(Ce),2),Re=a(ke);Re.__click=J;var Ke=r(Re,2);Ke.__click=U,t(ke),t(Ce);var Ee=r(Ce,2),Y=a(Ee),W=r(a(Y),2),Q=a(W);t(W),t(Y);var tt=r(Y,2);wt(tt),tt.__input=Ie=>ve(parseInt(Ie.currentTarget.value)),t(Ee),g(()=>{u(Ze,e(n).mute?"Muted":`${e(j)}%`),Tt(Ge,e(j)),x($e,1,`w-10 h-10 rounded-lg transition-colors text-lg
                     ${e(n).mute?"bg-error/20 text-error":"bg-surface-recessed text-content-secondary"}
                     hover:bg-stroke-default`),u(Pe,e(n).mute?"üîá":"üîä"),x(Re,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(n).clear_voice?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),x(Ke,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(n).bass_extension?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Q,`${e(se)>0?"+":""}${e(se)??""}`),Tt(tt,e(se))}),l(O,V)};_(xe,O=>{e(E)==="on"&&O(ze)})}var de=r(xe,2),Te=a(de),oe=r(a(Te),2),ge=a(oe,!0);t(oe),t(Te),t(de),g(()=>{x(m,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(E)==="on"?"badge-audio":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),u(H,`${e(E)==="on"?"Turn Off":"Turn On"} `),u(ge,i.device.model||"Yamaha Soundbar")}),l(ae,c)};_(Ae,ae=>{e(n)&&ae(le)})}t(y),g(()=>{x(ne,1,`font-medium ${e(E)==="on"?"text-device-audio-text":"text-content-tertiary"}`),u(Ve,e(E)==="on"?"On":e(n)?"Standby":"Offline")}),l(s,y)},$$slots:{default:!0}}),g(()=>{x(T,1,`card transition-card hover:scale-[1.02] ${z()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b.disabled=!e(n),Z=x(b,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(E)==="on"?"badge-audio":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,Z,{"status-active":e(E)==="on"}),u(Xe,e(h))}),l(X,S),ut()}bt(["click","keydown","input"]);var as=d('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-air-text rounded-full animate-pulse"></span>'),rs=d('<p class="text-xs text-content-secondary"> </p>'),ss=d('<p class="text-xs text-content-secondary"> </p>'),ns=d("<div> </div>"),os=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-air-text rounded-full animate-pulse"></span>'),is=d("<button> </button>"),ls=d('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Humidity</span> <p class="text-lg font-bold mt-1 text-content-primary"> </p></div>'),cs=d('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Temp</span> <p class="text-lg font-bold mt-1 text-content-primary"> </p></div>'),ds=d('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Filter</span> <p> </p></div>'),vs=d('<div><span class="text-xs uppercase tracking-wide opacity-80">Air Quality Index</span> <p class="text-4xl font-bold mt-1"> </p> <p class="text-sm mt-1"> </p></div> <div><p class="text-sm text-content-secondary mb-2">Mode</p> <div class="grid grid-cols-3 gap-2"></div></div> <div class="grid grid-cols-3 gap-3"><!> <!> <!></div>',1),us=d('<button> <!></button> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Model</span> <span class="font-mono text-xs text-content-tertiary">Xiaomi Air Purifier</span></div></div>',1),fs=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),ps=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.414 1.415l.708-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate">Air Purifier</h4> <!></div> <!></div></div> <!>',1);function ms(X,i){vt(i,!0);let z=dt(i,"compact",3,!1),h=G(()=>re.airPurifier),n=R(!1),C=R(null),F=R(null),q=R(!1),k=G(()=>{var v;return e(C)??((v=e(h))==null?void 0:v.power)??!1}),D=G(()=>{var v;return e(F)??((v=e(h))==null?void 0:v.mode)??"auto"});async function w(){const v=!e(k);o(C,v),o(q,!0);try{await aa({power:v}),re.refreshAirPurifier()}catch(b){console.error(b),o(C,null)}o(q,!1),o(C,null)}async function E(v){const b=e(D);o(F,v,!0);try{await aa({mode:v}),re.refreshAirPurifier()}catch(Z){console.error(Z),o(F,b,!0)}o(F,null)}function j(v){return v<=50?"text-success bg-success/20":v<=100?"text-warning bg-warning/20":v<=150?"text-device-climate-heat-text bg-device-climate-heat-bg":"text-error bg-error/20"}function se(v){return v<=50?"Good":v<=100?"Moderate":v<=150?"Unhealthy":"Very Unhealthy"}const I={auto:"Auto",silent:"Night",favorite:"Manual"};var A=ps(),$=ie(A);$.__click=()=>o(n,!0),$.__keydown=v=>v.key==="Enter"&&o(n,!0);var ye=a($),B=a(ye);B.__click=v=>{v.stopPropagation(),w()};let ve;var Se=r(a(B),2);{var Be=v=>{var b=as();l(v,b)};_(Se,v=>{e(q)&&v(Be)})}t(B);var Oe=r(B,2),J=r(a(Oe),2);{var U=v=>{var b=rs(),Z=a(b);t(b),g(()=>{var ee;return u(Z,`${(I[e(D)]||e(D))??""} ¬∑ ${((ee=e(h))==null?void 0:ee.aqi)??0??""} AQI`)}),l(v,b)},M=v=>{var b=ss(),Z=a(b,!0);t(b),g(()=>u(Z,e(h)?"Off":"Offline")),l(v,b)};_(J,v=>{e(k)?v(U):v(M,!1)})}t(Oe);var K=r(Oe,2);{var S=v=>{var b=ns(),Z=a(b,!0);t(b),g(ee=>{x(b,1,`px-2 py-1 rounded-md text-xs font-medium shrink-0 ${ee??""}`),u(Z,e(h).aqi)},[()=>j(e(h).aqi)]),l(v,b)};_(K,v=>{var b;z()&&((b=e(h))!=null&&b.power)&&v(S)})}t(ye),t($);var T=r($,2);Mt(T,{get open(){return e(n)},onclose:()=>o(n,!1),title:"Air Purifier",children:(v,b)=>{var Z=fs(),ee=a(Z),me=r(a(ee),2),De=a(me,!0);t(me),t(ee);var Me=r(ee,2);{var Xe=je=>{var f=us(),P=ie(f);P.__click=w;var te=a(P),s=r(te);{var p=ne=>{var Ve=os();l(ne,Ve)};_(s,ne=>{e(q)&&ne(p)})}t(P);var y=r(P,2);{var L=ne=>{var Ve=vs(),Ae=ie(Ve),le=r(a(Ae),2),ae=a(le,!0);t(le);var c=r(le,2),m=a(c,!0);t(c),t(Ae);var H=r(Ae,2),ce=r(a(H),2);qe(ce,20,()=>[{value:"auto",label:"Auto"},{value:"silent",label:"Night"},{value:"favorite",label:"Manual"}],nt,(O,V)=>{var N=is();N.__click=()=>E(V.value);var fe=a(N,!0);t(N),g(()=>{x(N,1,`py-3 text-sm rounded-lg transition-colors
                       ${e(D)===V.value?"badge-air":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(fe,V.label)}),l(O,N)}),t(ce),t(H);var ue=r(H,2),xe=a(ue);{var ze=O=>{var V=ls(),N=r(a(V),2),fe=a(N);t(N),t(V),g(()=>u(fe,`${e(h).humidity??""}%`)),l(O,V)};_(xe,O=>{e(h).humidity!==void 0&&O(ze)})}var de=r(xe,2);{var Te=O=>{var V=cs(),N=r(a(V),2),fe=a(N);t(N),t(V),g(()=>u(fe,`${e(h).temperature??""}¬∞C`)),l(O,V)};_(de,O=>{e(h).temperature!==void 0&&O(Te)})}var oe=r(de,2);{var ge=O=>{var V=ds(),N=r(a(V),2),fe=a(N);t(N),t(V),g(()=>{x(N,1,`text-lg font-bold mt-1 ${e(h).filter_life<20?"text-error":"text-content-primary"}`),u(fe,`${e(h).filter_life??""}%`)}),l(O,V)};_(oe,O=>{e(h).filter_life!==void 0&&O(ge)})}t(ue),g((O,V)=>{x(Ae,1,`rounded-xl p-4 text-center ${O??""}`),u(ae,e(h).aqi),u(m,V)},[()=>j(e(h).aqi),()=>se(e(h).aqi)]),l(ne,Ve)};_(y,ne=>{e(k)&&ne(L)})}Lt(2),g(()=>{x(P,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(k)?"badge-air":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),u(te,`${e(k)?"Turn Off":"Turn On"} `)}),l(je,f)};_(Me,je=>{e(h)&&je(Xe)})}t(Z),g(()=>{x(me,1,`font-medium ${e(k)?"text-device-air-text":"text-content-tertiary"}`),u(De,e(k)?"On":e(h)?"Off":"Offline")}),l(v,Z)},$$slots:{default:!0}}),g(()=>{x($,1,`card transition-card hover:scale-[1.02] ${z()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),B.disabled=!e(h),ve=x(B,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(k)?"badge-air":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,ve,{"status-active":e(k)})}),l(X,A),ut()}bt(["click","keydown"]);var xs=d('<div class="card rounded-xl p-2.5"><div class="flex items-center gap-2.5"><div class="w-9 h-9 rounded-lg bg-surface-recessed animate-pulse"></div> <div class="flex-1 space-y-1.5"><div class="w-20 h-3.5 rounded bg-surface-recessed animate-pulse"></div> <div class="w-14 h-3 rounded bg-surface-recessed animate-pulse"></div></div></div></div>'),_s=d('<section><div class="w-20 h-5 rounded bg-surface-recessed animate-pulse mb-3"></div> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),gs=d('<div class="space-y-6"></div>'),bs=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-lights-text">üí°</span> Lights <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),hs=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-climate-heat-text">üå°Ô∏è</span> Climate <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!> <!></div></section>'),ys=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-sensors-text">üì°</span> Sensors <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ws=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-audio-text">üîä</span> Audio <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ks=d('<!> <!> <!> <!> <section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-robot-text">ü§ñ</span> Robot <span class="text-xs text-content-tertiary">(1)</span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!></div></section>',1),Ms=d('<div class="pb-24 space-y-6"><!></div>');function Ls(X,i){vt(i,!0);let z=G(()=>re.lamps.filter(w=>w.category==="lamp")),h=G(()=>re.tuyaDevices.filter(w=>w.category==="wkf")),n=G(()=>re.tuyaDevices.filter(w=>["sj","mcs","wsdcg"].includes(w.category))),C=G(()=>re.lamps.length>0||re.tuyaDevices.length>0||re.yamahaDevices.length>0);var F=Ms();Ra("1uha8ag",w=>{ya(()=>{wa.title="Smart Home"})});var q=a(F);{var k=w=>{var E=gs();qe(E,20,()=>Array(3),nt,(j,se)=>{var I=_s(),A=r(a(I),2);qe(A,20,()=>Array(4),nt,($,ye,B,ve)=>{var Se=xs();l($,Se)}),t(A),t(I),l(j,I)}),t(E),l(w,E)},D=w=>{var E=ks(),j=ie(E);{var se=J=>{var U=bs(),M=a(U),K=r(a(M),2),S=a(K);t(K),t(M);var T=r(M,2);qe(T,21,()=>e(z),v=>v.id,(v,b)=>{Za(v,{get lamp(){return e(b)},compact:!0})}),t(T),t(U),g(()=>u(S,`(${e(z).length??""})`)),l(J,U)};_(j,J=>{e(z).length>0&&J(se)})}var I=r(j,2);{var A=J=>{var U=hs(),M=a(U),K=r(a(M),2),S=a(K);t(K),t(M);var T=r(M,2),v=a(T);qe(v,17,()=>e(h),ee=>ee.id,(ee,me)=>{Gr(ee,{get device(){return e(me)},compact:!0})});var b=r(v,2);{var Z=ee=>{ms(ee,{compact:!0})};_(b,ee=>{re.airPurifier&&ee(Z)})}t(T),t(U),g(()=>u(S,`(${e(h).length+(re.airPurifier?1:0)})`)),l(J,U)};_(I,J=>{(e(h).length>0||re.airPurifier)&&J(A)})}var $=r(I,2);{var ye=J=>{var U=ys(),M=a(U),K=r(a(M),2),S=a(K);t(K),t(M);var T=r(M,2);qe(T,21,()=>e(n),v=>v.id,(v,b)=>{Pr(v,{get device(){return e(b)},compact:!0})}),t(T),t(U),g(()=>u(S,`(${e(n).length??""})`)),l(J,U)};_($,J=>{e(n).length>0&&J(ye)})}var B=r($,2);{var ve=J=>{var U=ws(),M=a(U),K=r(a(M),2),S=a(K);t(K),t(M);var T=r(M,2);qe(T,21,()=>re.yamahaDevices,v=>v.id,(v,b)=>{ts(v,{get device(){return e(b)},compact:!0})}),t(T),t(U),g(()=>u(S,`(${re.yamahaDevices.length??""})`)),l(J,U)};_(B,J=>{re.yamahaDevices.length>0&&J(ve)})}var Se=r(B,2),Be=r(a(Se),2),Oe=a(Be);Sr(Oe,{get status(){return re.roborock},compact:!0}),t(Be),t(Se),l(w,E)};_(q,w=>{re.loading&&!e(C)?w(k):w(D,!1)})}t(F),l(X,F),ut()}export{Ls as component};
