import{d as bt,c as gt,e as ta,a as l,f as c,s as f,t as Jt,b as aa}from"../chunks/KsRpIQI_.js";import{h as Ut,a0 as dt,aD as de,a6 as vt,a1 as a,a2 as t,a3 as r,a5 as g,b5 as ga,s as o,a4 as R,g as e,a9 as Y,aN as ba,R as Qt,a7 as At,K as ha,a8 as ya}from"../chunks/CxzkeP2L.js";import{i as _}from"../chunks/JY_fI8Mb.js";import{s as se,f as _t,h as wa,e as $e,i as st,j as ka,k as Sa,l as Zt,m as Ma,n as Ta,o as Ca,p as za,r as ja,q as Pa,u as Xt,v as lt,w as ea}from"../chunks/C_s4BKAr.js";import{h as Ra}from"../chunks/jdav0aRx.js";import{s as x,r as wt,b as Tt}from"../chunks/BRTiwp6z.js";import{p as ct,b as Ba}from"../chunks/FSvs7gAD.js";import{s as Oa}from"../chunks/Bcugs9fK.js";import{a as Da}from"../chunks/CxA4e2Oe.js";import{b as Aa}from"../chunks/DvcQTK2l.js";import{t as La}from"../chunks/Cc_vj6Fx.js";function Mt(te,i,C,y){var n=te.__style;if(Ut||n!==i){var S=Da(i,y);(!Ut||S!==te.getAttribute("style"))&&(S==null?te.removeAttribute("style"):te.style.cssText=S),te.__style=i}return y}const Va={"korytarz 1":"Hallway 1","korytarz 2":"Hallway 2",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",jadalnia:"Dining Room",gabinet:"Study",pralnia:"Laundry","Czujnik zalania kuchnia":"Water Sensor Kitchen","Czujnik zalania ≈Çazienka":"Water Sensor Bathroom","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Drzwi:"Door Sensor","Grzejnik salon":"Radiator Living Room","Grzejnik sypialnia":"Radiator Bedroom","Grzejnik kuchnia":"Radiator Kitchen","Grzejnik ≈Çazienka":"Radiator Bathroom","Grzejnik korytarz":"Radiator Hallway","Grzejnik pok√≥j dzieci":"Radiator Kids Room",Grzejnik:"Radiator"},Na={korytarz:"Hallway",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",pok√≥j:"Room",dzieci:"Kids","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Grzejnik:"Radiator",Drzwi:"Door",Lampa:"Light",du≈ºy:"Large",ma≈Çy:"Small",g≈Ç√≥wny:"Main",g√≥rny:"Upper",dolny:"Lower"};function Ct(te){if(!te)return te;const i=te.toLowerCase();for(const[n,S]of Object.entries(Va))if(i===n.toLowerCase())return S;let C=te;const y=Object.entries(Na).sort((n,S)=>S[0].length-n[0].length);for(const[n,S]of y){const V=new RegExp(n,"gi");C=C.replace(V,S)}return C}function kt(te,i){let C=null;return[(...S)=>{C&&clearTimeout(C),C=setTimeout(()=>{C=null,te(...S)},i)},()=>{C&&(clearTimeout(C),C=null)}]}var Ea=c(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 dialog-overlay animate-fade-in svelte-alpl3u" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="dialog-content w-full max-w-md max-h-[80vh] overflow-hidden"><div class="flex items-center justify-between p-4 border-b border-stroke-default"><h2 id="dialog-title" class="text-lg font-semibold text-content-primary"> </h2> <button aria-label="Close dialog" class="w-10 h-10 rounded-xl bg-surface-recessed text-content-secondary hover:text-content-primary
                 hover:bg-stroke-default transition-colors flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 overflow-y-auto max-h-[calc(80vh-64px)]"><!></div></div></div>`);function St(te,i){dt(i,!0);let C=ct(i,"open",3,!1);function y(k){k.target===k.currentTarget&&i.onclose()}function n(k){k.key==="Escape"&&i.onclose()}var S=gt();ta("keydown",ga,n);var V=de(S);{var J=k=>{var N=Ea();N.__click=y,N.__keydown=n;var w=a(N),M=a(w),E=a(M),ne=a(E,!0);t(E);var I=r(E,2);I.__click=function(...he){var P;(P=i.onclose)==null||P.apply(this,he)},t(M);var B=r(M,2),U=a(B);Oa(U,()=>i.children),t(B),t(w),t(N),g(()=>f(ne,i.title)),l(k,N)};_(V,k=>{C()&&k(J)})}l(te,S),vt()}bt(["click","keydown"]);var Ia=c('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-lights-text rounded-full animate-pulse"></span>'),Wa=c('<p class="text-xs text-device-audio-text">Moonlight</p>'),$a=c('<p class="text-xs text-content-secondary"> </p>'),Fa=c('<p class="text-xs text-content-secondary"> </p>'),Ha=c('<span class="absolute top-2 right-2 w-2 h-2 bg-device-lights-text rounded-full animate-pulse"></span>'),Ga=c('<span class="absolute top-1 right-1 w-1.5 h-1.5 bg-device-lights-text rounded-full animate-pulse"></span>'),Ka=c("<button> <!></button>"),Ya=c('<div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Brightness</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="1" max="100" class="w-full"/></div> <div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Color Temperature</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="1700" max="6500" step="100" class="w-full"/> <div class="flex justify-between text-xs text-content-tertiary mt-1"><span>Warm</span> <span>Cool</span></div></div>',1),qa=c('<div class="py-4 text-center text-sm text-device-audio-text/80">Hardware night light mode active</div>'),Ja=c('<div><p class="text-sm text-content-secondary mb-2">Presets</p> <div class="grid grid-cols-3 gap-2"></div></div> <!>',1),Ua=c('<button> <!></button> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">IP Address</span> <span class="font-mono text-xs text-content-tertiary"> </span></div></div>',1),Qa=c('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span><!></span></div> <!></div>'),Za=c('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a.75.75 0 01.75.75v6.5a.75.75 0 01-1.5 0v-6.5A.75.75 0 0110 2z"></path><path d="M5.404 4.343a.75.75 0 10-1.06 1.06 6.5 6.5 0 109.192 0 .75.75 0 00-1.06-1.06 5 5 0 11-7.072 0z"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function Xa(te,i){dt(i,!0);let C=ct(i,"compact",3,!1),y=Y(()=>Ct(i.lamp.name)),n=Y(()=>se.lampStatuses.get(i.lamp.id)),S=R(!1),V=R(null),J=R(!1),k=R(null),N=R(null),w=R(null),M=Y(()=>{var u;return e(V)??((u=e(n))==null?void 0:u.power)??!1}),E=Y(()=>{var u;return e(N)??((u=e(n))==null?void 0:u.brightness)??0}),ne=Y(()=>{var u;return e(w)??((u=e(n))==null?void 0:u.color_temp)??0});async function I(u){u.stopPropagation();const q=!e(M);o(V,q),o(J,!0);try{await _t(i.lamp.id,{toggle:!0}),B()}catch(W){console.error(W),o(V,null),o(J,!1)}}async function B(){try{const u=await wa(i.lamp.id);se.updateLampStatus(i.lamp.id,u.status),o(V,null)}catch(u){console.error(u)}o(J,!1),o(k,null)}const[U]=kt(async u=>{try{await _t(i.lamp.id,{brightness:u}),e(n)&&se.updateLampStatus(i.lamp.id,{...e(n),brightness:u})}catch(q){console.error(q)}o(N,null)},300),[he]=kt(async u=>{try{await _t(i.lamp.id,{color_temp:u}),e(n)&&se.updateLampStatus(i.lamp.id,{...e(n),color_temp:u})}catch(q){console.error(q)}o(w,null)},300);function P(u){o(N,u,!0),U(u)}function ve(u){o(w,u,!0),he(u)}const Te=[{id:"day",label:"Day",brightness:100,colorTemp:5e3,moonlight:!1},{id:"night",label:"Night",brightness:30,colorTemp:2700,moonlight:!1},{id:"moonlight",label:"Moonlight",brightness:10,colorTemp:2700,moonlight:!0}];async function Pe(u){var q,W;o(k,u.id,!0),u.moonlight?e(n)&&se.updateLampStatus(i.lamp.id,{...e(n),power:!0,moonlight_mode:!0,brightness:u.brightness}):e(n)&&se.updateLampStatus(i.lamp.id,{...e(n),power:!0,moonlight_mode:!1,brightness:u.brightness,color_temp:u.colorTemp});try{u.moonlight?await _t(i.lamp.id,{moonlight:!0,moonlight_brightness:u.brightness}):((q=e(n))!=null&&q.moonlight_mode?await _t(i.lamp.id,{moonlight:!1}):(W=e(n))!=null&&W.power||await _t(i.lamp.id,{power:!0}),await _t(i.lamp.id,{brightness:u.brightness,color_temp:u.colorTemp})),B()}catch(ue){console.error(ue),o(k,null),B()}}function Re(u){var ue,s,p,h;if(!e(M))return!1;if(u.moonlight)return((ue=e(n))==null?void 0:ue.moonlight_mode)??!1;if((s=e(n))!=null&&s.moonlight_mode)return!1;const q=Math.abs((((p=e(n))==null?void 0:p.brightness)??0)-u.brightness)<=5,W=Math.abs((((h=e(n))==null?void 0:h.color_temp)??0)-u.colorTemp)<=200;return q&&W}var Q=Za(),F=de(Q);F.__click=()=>o(S,!0),F.__keydown=u=>u.key==="Enter"&&o(S,!0);var z=a(F),D=a(z);D.__click=I;let j;var T=r(a(D),2);{var v=u=>{var q=Ia();l(u,q)};_(T,u=>{e(J)&&u(v)})}t(D);var b=r(D,2),Z=a(b),oe=a(Z,!0);t(Z);var me=r(Z,2);{var Be=u=>{var q=gt(),W=de(q);{var ue=p=>{var h=Wa();l(p,h)},s=p=>{var h=$a(),ie=a(h);t(h),g(()=>f(ie,`${e(E)??""}% ¬∑ ${e(ne)??""}K`)),l(p,h)};_(W,p=>{var h;(h=e(n))!=null&&h.moonlight_mode?p(ue):p(s,!1)})}l(u,q)},Se=u=>{var q=Fa(),W=a(q,!0);t(q),g(()=>f(W,e(n)?"Off":"Offline")),l(u,q)};_(me,u=>{e(M)?u(Be):u(Se,!1)})}t(b),t(z),t(F);var Qe=r(F,2);St(Qe,{get open(){return e(S)},onclose:()=>o(S,!1),get title(){return e(y)},children:(u,q)=>{var W=Qa(),ue=a(W),s=r(a(ue),2),p=a(s);{var h=ae=>{var ye=Jt();g(()=>{var re;return f(ye,(re=e(n))!=null&&re.moonlight_mode?"Moonlight":"On")}),l(ae,ye)},ie=ae=>{var ye=Jt();g(()=>f(ye,e(n)?"Off":"Offline")),l(ae,ye)};_(p,ae=>{e(M)?ae(h):ae(ie,!1)})}t(s),t(ue);var fe=r(ue,2);{var Ae=ae=>{var ye=Ua(),re=de(ye);re.__click=I;var d=a(re),m=r(d);{var H=G=>{var ce=Ha();l(G,ce)};_(m,G=>{e(J)&&G(H)})}t(re);var le=r(re,2);{var xe=G=>{var ce=Ja(),A=de(ce),$=r(a(A),2);$e($,21,()=>Te,st,(je,we)=>{var ke=Ka();ke.__click=()=>Pe(e(we));var Ce=a(ke),Ie=r(Ce);{var qe=Oe=>{var Fe=Ga();l(Oe,Fe)};_(Ie,Oe=>{e(k)===e(we).id&&Oe(qe)})}t(ke),g(Oe=>{x(ke,1,`py-2.5 text-sm rounded-lg transition-all relative
                       ${Oe??""}`),f(Ce,`${e(we).label??""} `)},[()=>Re(e(we))||e(k)===e(we).id?e(we).moonlight?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"]),l(je,ke)}),t($),t(A);var ee=r(A,2);{var be=je=>{var we=Ya(),ke=de(we),Ce=a(ke),Ie=r(a(Ce),2),qe=a(Ie);t(Ie),t(Ce);var Oe=r(Ce,2);wt(Oe),Oe.__input=Ge=>P(parseInt(Ge.currentTarget.value)),t(ke);var Fe=r(ke,2),et=a(Fe),De=r(a(et),2),He=a(De);t(De),t(et);var Le=r(et,2);wt(Le),Le.__input=Ge=>ve(parseInt(Ge.currentTarget.value)),ba(2),t(Fe),g(()=>{f(qe,`${e(E)??""}%`),Tt(Oe,e(E)),f(He,`${e(ne)??""}K`),Tt(Le,e(ne))}),l(je,we)},Ee=je=>{var we=qa();l(je,we)};_(ee,je=>{e(n).moonlight_mode?je(Ee,!1):je(be)})}l(G,ce)};_(le,G=>{e(M)&&G(xe)})}var _e=r(le,2),ze=a(_e),X=r(a(ze),2),Me=a(X,!0);t(X),t(ze),t(_e),g(()=>{x(re,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(M)?e(n).moonlight_mode?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),f(d,`${e(M)?"Turn Off":"Turn On"} `),f(Me,i.lamp.ip)}),l(ae,ye)};_(fe,ae=>{e(n)&&ae(Ae)})}t(W),g(()=>{var ae;return x(s,1,`font-medium ${e(M)?(ae=e(n))!=null&&ae.moonlight_mode?"text-device-audio-text":"text-device-lights-text":"text-content-tertiary"}`)}),l(u,W)},$$slots:{default:!0}}),g(()=>{var u;x(F,1,`card transition-card hover:scale-[1.02] ${C()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),D.disabled=!e(n),j=x(D,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(M)?(u=e(n))!=null&&u.moonlight_mode?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,j,{"status-active":e(M)}),f(oe,e(y))}),l(te,Q),vt()}bt(["click","keydown","input"]);var er=c("<p> </p>"),tr=c('<p class="text-xs text-content-secondary">Offline</p>'),ar=c('<div class="flex items-center gap-1 text-xs shrink-0"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 11.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zm4-3a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-4z"></path><path d="M8 4.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v8a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-8z"></path></svg> <span> </span></div>'),rr=c('<span class="absolute top-1 right-1 w-2 h-2 bg-success rounded-full animate-pulse"></span>'),sr=c('<span class="absolute top-1 right-1 w-2 h-2 bg-warning rounded-full animate-pulse"></span>'),nr=c('<span class="absolute top-1 right-1 w-2 h-2 bg-info rounded-full animate-pulse"></span>'),or=c('<span class="absolute top-2 right-2 w-2 h-2 bg-content-secondary rounded-full animate-pulse"></span>'),ir=c('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-device-audio-text rounded-full animate-pulse"></span>'),lr=c('<button><div class="text-base mb-0.5"> </div> <!></button>'),cr=c('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-device-sensors-text rounded-full animate-pulse"></span>'),dr=c('<button><div class="text-base mb-0.5"> </div> <!></button>'),vr=c(`<div><p class="text-sm text-content-secondary mb-2">Actions</p> <div class="grid grid-cols-3 gap-2"><button class="py-4 rounded-xl bg-success/20 text-success text-sm font-medium relative
                     hover:bg-success/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> Start <!></button> <button class="py-4 rounded-xl bg-warning/20 text-warning text-sm font-medium relative
                     hover:bg-warning/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Pause <!></button> <button class="py-4 rounded-xl bg-info/20 text-info text-sm font-medium relative
                     hover:bg-info/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg> Home <!></button></div></div> <div><button class="w-full py-3 rounded-xl bg-surface-recessed text-content-secondary text-sm font-medium relative
                   hover:bg-stroke-default transition-colors">Find Robot <!></button></div> <div><p class="text-sm text-content-secondary mb-2">Suction Power</p> <div class="grid grid-cols-4 gap-1"></div></div> <div><p class="text-sm text-content-secondary mb-2">Mop Intensity</p> <div class="grid grid-cols-4 gap-1"></div></div>`,1),ur=c("<button> </button>"),fr=c('<span class="absolute top-2 right-2 w-2 h-2 bg-device-sensors-text rounded-full animate-pulse"></span>'),pr=c(`<button class="w-full mt-3 py-3 rounded-xl badge-sensors text-sm font-medium relative
                       hover:opacity-90 transition-colors"> <!></button>`),mr=c('<div class="grid grid-cols-2 gap-2"></div> <!>',1),xr=c('<p class="text-content-tertiary text-sm">Loading rooms...</p>'),_r=c('<div><p class="text-sm text-content-secondary mb-2">Select rooms to clean</p> <!></div>'),gr=c('<div><p class="text-sm text-content-secondary mb-3">Consumables</p> <div class="space-y-3"><div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Main Brush</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Side Brush</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Filter</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Sensors</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div></div></div>'),br=c('<p class="text-content-tertiary text-sm">Loading consumables...</p>'),hr=c('<div><div class="flex justify-between items-center mb-2"><span class="text-sm text-content-secondary">Volume</span> <span class="text-sm font-medium text-content-primary"> </span></div> <input type="range" min="0" max="100" step="10" class="w-full"/></div> <!>',1),yr=c('<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Battery</span> <p> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Fan Speed</span> <p class="text-2xl font-bold mt-1 text-content-primary"> </p></div></div> <div class="flex gap-1 bg-surface-recessed rounded-lg p-1"><button>Controls</button> <button>Rooms</button> <button>Settings</button></div> <!>',1),wr=c('<div class="text-center py-8 text-content-secondary">Start bridge to control robot</div>'),kr=c('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),Sr=c('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z" clip-rule="evenodd"></path></svg></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate">Roborock</h4> <!></div> <!></div></div> <!>',1);function Mr(te,i){dt(i,!0);let C=ct(i,"compact",3,!1),y=R(!1),n=R(null),S=R(null),V=R(null),J=R(!1),k=R(null),N=R(null),w=R(null),M=Y(()=>{var d;return e(N)??((d=i.status)==null?void 0:d.fanPower)??102}),E=Y(()=>{var d;return e(w)??((d=i.status)==null?void 0:d.waterBoxMode)??200}),ne=R(Qt([])),I=R(Qt(new Set)),B=R(30),U=R(null),he=Y(()=>e(U)??e(B)),P=R(null),ve=R("controls");const Te={1:"Starting",2:"Charger disconnected",3:"Idle",4:"Remote control",5:"Cleaning",6:"Returning",7:"Manual mode",8:"Charging",9:"Charging problem",10:"Paused",11:"Spot cleaning",12:"Error",13:"Shutting down",14:"Updating",15:"Docking",16:"Going to target",17:"Zoned cleaning",18:"Segment cleaning",22:"Emptying dustbin",23:"Washing mop",26:"Going to wash mop"},Pe=[{mode:101,name:"Quiet",icon:"üîá"},{mode:102,name:"Balanced",icon:"‚öñÔ∏è"},{mode:103,name:"Turbo",icon:"üí®"},{mode:104,name:"Max",icon:"üî•"}],Re=[{mode:200,name:"Off",icon:"‚ùå"},{mode:201,name:"Low",icon:"üíß"},{mode:202,name:"Med",icon:"üíßüíß"},{mode:203,name:"High",icon:"üíßüíßüíß"}];function Q(d){return Te[d]||"Unknown"}function F(d){const m=Pe.find(H=>H.mode===d);return m?m.name:`${d}%`}async function z(){try{const[d,m,H]=await Promise.all([ka(),Sa(),Zt()]);o(ne,d.rooms,!0),o(B,m.volume,!0),o(P,H,!0)}catch(d){console.error("Failed to load extended data:",d)}}async function D(d){o(n,d,!0);try{await Ma(d),se.refreshRoborock()}catch(m){console.error(m)}o(n,null)}async function j(d){o(N,d,!0),o(S,d,!0);try{await Ta(d),se.refreshRoborock()}catch(m){console.error(m),o(N,null)}o(S,null)}async function T(d){o(w,d,!0),o(V,d,!0);try{await Ca(d),se.refreshRoborock()}catch(m){console.error(m),o(w,null)}o(V,null)}const[v]=kt(async d=>{try{await Pa(d),o(B,d,!0)}catch(m){console.error(m)}o(U,null)},300);function b(d){o(U,d,!0),v(d)}function Z(d){const m=new Set(e(I));m.has(d)?m.delete(d):m.add(d),o(I,m,!0)}async function oe(){if(e(I).size!==0){o(J,!0);try{await za([...e(I)]),o(I,new Set,!0),se.refreshRoborock()}catch(d){console.error(d)}o(J,!1)}}function me(d,m){const H=d/3600;return Math.max(0,Math.min(100,H/m*100))}function Be(d){return d<50?"bg-success":d<80?"bg-warning":"bg-error"}async function Se(d){o(k,d,!0);try{await ja(d);const m=await Zt();o(P,m,!0)}catch(m){console.error(m)}o(k,null)}function Qe(d){switch(d){case 5:case 11:case 17:case 18:return{color:"text-success",bg:"bg-success/20"};case 8:return{color:"text-info",bg:"bg-info/20"};case 3:return{color:"text-content-tertiary",bg:"bg-surface-recessed"};case 10:return{color:"text-warning",bg:"bg-warning/20"};case 6:case 15:case 16:case 26:return{color:"text-device-sensors-text",bg:"bg-device-sensors-bg"};case 12:case 9:return{color:"text-error",bg:"bg-error/20"};default:return{color:"text-content-tertiary",bg:"bg-surface-recessed"}}}let u=Y(()=>i.status?Qe(i.status.state):{color:"text-content-tertiary",bg:"bg-surface-recessed"});At(()=>{e(y)&&z()});var q=Sr(),W=de(q);W.__click=()=>o(y,!0),W.__keydown=d=>d.key==="Enter"&&o(y,!0);var ue=a(W),s=a(ue);let p;var h=r(s,2),ie=r(a(h),2);{var fe=d=>{var m=er(),H=a(m,!0);t(m),g(le=>{x(m,1,`text-xs ${e(u).color??""}`),f(H,le)},[()=>Q(i.status.state)]),l(d,m)},Ae=d=>{var m=tr();l(d,m)};_(ie,d=>{i.status?d(fe):d(Ae,!1)})}t(h);var ae=r(h,2);{var ye=d=>{var m=ar(),H=a(m),le=r(H,2),xe=a(le);t(le),t(m),g(()=>{x(H,0,`w-3.5 h-3.5 ${i.status.battery>20?"text-success":"text-error"}`),x(le,1,i.status.battery>20?"text-content-secondary":"text-error"),f(xe,`${i.status.battery??""}%`)}),l(d,m)};_(ae,d=>{C()&&i.status&&d(ye)})}t(ue),t(W);var re=r(W,2);St(re,{get open(){return e(y)},onclose:()=>o(y,!1),title:"Roborock",children:(d,m)=>{var H=kr(),le=a(H),xe=r(a(le),2),_e=a(xe,!0);t(xe),t(le);var ze=r(le,2);{var X=G=>{var ce=yr(),A=de(ce),$=a(A),ee=r(a($),2),be=a(ee);t(ee),t($);var Ee=r($,2),je=r(a(Ee),2),we=a(je,!0);t(je),t(Ee),t(A);var ke=r(A,2),Ce=a(ke);Ce.__click=()=>o(ve,"controls");var Ie=r(Ce,2);Ie.__click=()=>o(ve,"rooms");var qe=r(Ie,2);qe.__click=()=>o(ve,"settings"),t(ke);var Oe=r(ke,2);{var Fe=De=>{var He=vr(),Le=de(He),Ge=r(a(Le),2),Ke=a(Ge);Ke.__click=()=>D("start");var K=r(a(Ke),2);{var O=pe=>{var ge=rr();l(pe,ge)};_(K,pe=>{e(n)==="start"&&pe(O)})}t(Ke);var L=r(Ke,2);L.__click=()=>D("pause");var Ze=r(a(L),2);{var ut=pe=>{var ge=sr();l(pe,ge)};_(Ze,pe=>{e(n)==="pause"&&pe(ut)})}t(L);var Ye=r(L,2);Ye.__click=()=>D("home");var tt=r(a(Ye),2);{var nt=pe=>{var ge=nr();l(pe,ge)};_(tt,pe=>{e(n)==="home"&&pe(nt)})}t(Ye),t(Ge),t(Le);var ot=r(Le,2),ft=a(ot);ft.__click=()=>D("find");var Xe=r(a(ft));{var Je=pe=>{var ge=or();l(pe,ge)};_(Xe,pe=>{e(n)==="find"&&pe(Je)})}t(ft),t(ot);var We=r(ot,2),it=r(a(We),2);$e(it,21,()=>Pe,st,(pe,ge)=>{var Ne=lr();Ne.__click=()=>j(e(ge).mode);var at=a(Ne),pt=a(at,!0);t(at);var mt=r(at),ht=r(mt);{var yt=rt=>{var xt=ir();l(rt,xt)};_(ht,rt=>{e(S)===e(ge).mode&&rt(yt)})}t(Ne),g(()=>{x(Ne,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${e(M)===e(ge).mode?"badge-audio ring-1 ring-device-audio-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),f(pt,e(ge).icon),f(mt,` ${e(ge).name??""} `)}),l(pe,Ne)}),t(it),t(We);var Ve=r(We,2),Ue=r(a(Ve),2);$e(Ue,21,()=>Re,st,(pe,ge)=>{var Ne=dr();Ne.__click=()=>T(e(ge).mode);var at=a(Ne),pt=a(at,!0);t(at);var mt=r(at),ht=r(mt);{var yt=rt=>{var xt=cr();l(rt,xt)};_(ht,rt=>{e(V)===e(ge).mode&&rt(yt)})}t(Ne),g(()=>{x(Ne,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${e(E)===e(ge).mode?"badge-sensors ring-1 ring-device-sensors-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),f(pt,e(ge).icon),f(mt,` ${e(ge).name??""} `)}),l(pe,Ne)}),t(Ue),t(Ve),l(De,He)},et=De=>{var He=gt(),Le=de(He);{var Ge=K=>{var O=_r(),L=r(a(O),2);{var Ze=Ye=>{var tt=mr(),nt=de(tt);$e(nt,21,()=>e(ne),st,(Xe,Je)=>{var We=ur();We.__click=()=>Z(e(Je).segmentId);var it=a(We,!0);t(We),g(Ve=>{x(We,1,`py-3 px-3 rounded-xl text-sm font-medium transition-colors text-left
                         ${Ve??""}`),f(it,e(Je).name)},[()=>e(I).has(e(Je).segmentId)?"badge-sensors ring-1 ring-device-sensors-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"]),l(Xe,We)}),t(nt);var ot=r(nt,2);{var ft=Xe=>{var Je=pr();Je.__click=oe;var We=a(Je),it=r(We);{var Ve=Ue=>{var pe=fr();l(Ue,pe)};_(it,Ue=>{e(J)&&Ue(Ve)})}t(Je),g(()=>f(We,`Clean ${e(I).size??""} room${e(I).size>1?"s":""} `)),l(Xe,Je)};_(ot,Xe=>{e(I).size>0&&Xe(ft)})}l(Ye,tt)},ut=Ye=>{var tt=xr();l(Ye,tt)};_(L,Ye=>{e(ne).length>0?Ye(Ze):Ye(ut,!1)})}t(O),l(K,O)},Ke=K=>{var O=gt(),L=de(O);{var Ze=ut=>{var Ye=hr(),tt=de(Ye),nt=a(tt),ot=r(a(nt),2),ft=a(ot);t(ot),t(nt);var Xe=r(nt,2);wt(Xe),Xe.__input=Ve=>b(parseInt(Ve.currentTarget.value)),t(tt);var Je=r(tt,2);{var We=Ve=>{var Ue=gr(),pe=r(a(Ue),2),ge=a(pe),Ne=a(ge),at=r(a(Ne),2),pt=a(at),mt=a(pt);t(pt);var ht=r(pt,2);ht.__click=()=>Se("main_brush_work_time"),t(at),t(Ne);var yt=r(Ne,2),rt=a(yt);t(yt),t(ge);var xt=r(ge,2),zt=a(xt),Lt=r(a(zt),2),jt=a(Lt),ra=a(jt);t(jt);var Vt=r(jt,2);Vt.__click=()=>Se("side_brush_work_time"),t(Lt),t(zt);var Nt=r(zt,2),Et=a(Nt);t(Nt),t(xt);var Pt=r(xt,2),Rt=a(Pt),It=r(a(Rt),2),Bt=a(It),sa=a(Bt);t(Bt);var Wt=r(Bt,2);Wt.__click=()=>Se("filter_work_time"),t(It),t(Rt);var $t=r(Rt,2),Ft=a($t);t($t),t(Pt);var Ht=r(Pt,2),Ot=a(Ht),Gt=r(a(Ot),2),Dt=a(Gt),na=a(Dt);t(Dt);var Kt=r(Dt,2);Kt.__click=()=>Se("sensor_dirty_time"),t(Gt),t(Ot);var Yt=r(Ot,2),qt=a(Yt);t(Yt),t(Ht),t(pe),t(Ue),g((oa,ia,la,ca,da,va,ua,fa,pa,ma,xa,_a)=>{f(mt,`${oa??""}h`),x(ht,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary relative ${e(k)==="main_brush_work_time"?"opacity-50":""}`),x(rt,1,`h-full ${ia??""} transition-all`),Mt(rt,`width: ${la??""}%`),f(ra,`${ca??""}h`),x(Vt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="side_brush_work_time"?"opacity-50":""}`),x(Et,1,`h-full ${da??""} transition-all`),Mt(Et,`width: ${va??""}%`),f(sa,`${ua??""}h`),x(Wt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="filter_work_time"?"opacity-50":""}`),x(Ft,1,`h-full ${fa??""} transition-all`),Mt(Ft,`width: ${pa??""}%`),f(na,`${ma??""}h`),x(Kt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="sensor_dirty_time"?"opacity-50":""}`),x(qt,1,`h-full ${xa??""} transition-all`),Mt(qt,`width: ${_a??""}%`)},[()=>Math.round(e(P).mainBrushWorkTime/3600),()=>Be(me(e(P).mainBrushWorkTime,300)),()=>me(e(P).mainBrushWorkTime,300),()=>Math.round(e(P).sideBrushWorkTime/3600),()=>Be(me(e(P).sideBrushWorkTime,200)),()=>me(e(P).sideBrushWorkTime,200),()=>Math.round(e(P).filterWorkTime/3600),()=>Be(me(e(P).filterWorkTime,150)),()=>me(e(P).filterWorkTime,150),()=>Math.round(e(P).sensorDirtyTime/3600),()=>Be(me(e(P).sensorDirtyTime,30)),()=>me(e(P).sensorDirtyTime,30)]),l(Ve,Ue)},it=Ve=>{var Ue=br();l(Ve,Ue)};_(Je,Ve=>{e(P)?Ve(We):Ve(it,!1)})}g(()=>{f(ft,`${e(he)??""}%`),Tt(Xe,e(he))}),l(ut,Ye)};_(L,ut=>{e(ve)==="settings"&&ut(Ze)},!0)}l(K,O)};_(Le,K=>{e(ve)==="rooms"?K(Ge):K(Ke,!1)},!0)}l(De,He)};_(Oe,De=>{e(ve)==="controls"?De(Fe):De(et,!1)})}g(De=>{x(ee,1,`text-3xl font-bold mt-1 ${i.status.battery>20?"text-content-primary":"text-error"}`),f(be,`${i.status.battery??""}%`),f(we,De),x(Ce,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(ve)==="controls"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`),x(Ie,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(ve)==="rooms"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`),x(qe,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(ve)==="settings"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`)},[()=>F(i.status.fanPower)]),l(G,ce)},Me=G=>{var ce=wr();l(G,ce)};_(ze,G=>{i.status?G(X):G(Me,!1)})}t(H),g(G=>{x(xe,1,`font-medium ${e(u).color??""}`),f(_e,G)},[()=>i.status?Q(i.status.state):"Offline"]),l(d,H)},$$slots:{default:!0}}),g(()=>{var d,m,H,le;x(W,1,`card transition-card hover:scale-[1.02] ${C()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),p=x(s,1,`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${e(u).bg??""} ${e(u).color??""}`,null,p,{"status-active":((d=i.status)==null?void 0:d.state)===5||((m=i.status)==null?void 0:m.state)===11||((H=i.status)==null?void 0:H.state)===17||((le=i.status)==null?void 0:le.state)===18})}),l(te,q),vt()}bt(["click","keydown","input"]);var Tr=c('<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Temperature</span> <p class="text-2xl font-bold mt-1 text-device-sensors-text"> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Humidity</span> <p class="text-2xl font-bold mt-1 text-info"> </p></div></div>'),Cr=c('<div class="bg-surface-recessed rounded-xl p-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Battery</span> <span> </span></div> <div class="mt-2 h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div>'),zr=c('<div class="space-y-4"><div><span class="text-4xl"> </span> <p> </p> <p class="text-sm text-content-secondary mt-1"> </p></div> <!> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Type</span> <span class="font-medium text-content-primary"> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Online</span> <span> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Device ID</span> <span class="font-mono text-xs text-content-tertiary"> </span></div></div></div>'),jr=c('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div> </div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <p> </p></div> <div></div></div></div> <!>',1);function Pr(te,i){dt(i,!0);let C=ct(i,"compact",3,!1),y=Y(()=>Ct(i.device.name)),n=R(!1),S=Y(()=>()=>{if(!i.device.last_status)return null;try{return JSON.parse(i.device.last_status)}catch{return null}});const V={sj:{label:"Water",icon:"üíß"},mcs:{label:"Door",icon:"üö™"},wsdcg:{label:"Climate",icon:"üå°Ô∏è"},wfcon:{label:"Gateway",icon:"üì°"},cz:{label:"Remote",icon:"üì∫"}},J=15;function k(z,D){if(!z)return D==="sj"||D==="mcs"?{text:"Monitoring",alert:!1,color:"text-content-tertiary",lowBattery:!1}:{text:"No data",alert:!1,color:"text-content-tertiary",lowBattery:!1};switch(D){case"sj":{const j=z[1],T=j==="alarm"||j==="1"||j===1,v=z[4],b=v!==void 0&&v<=J;return T?{text:"Water detected!",alert:!0,color:"text-error",lowBattery:b,batteryPercent:v}:{text:b?`Dry ¬∑ ${v}%`:"Dry",alert:!1,color:"text-success",lowBattery:b,batteryPercent:v}}case"mcs":{const j=z[101]===!0||z[1]===!0,T=z[103]||z[4],v=T!==void 0&&T<=J;return{text:v?`${j?"Open":"Closed"} ¬∑ ${T}%`:j?"Open":"Closed",alert:j,color:j?"text-warning":"text-success",lowBattery:v,batteryPercent:T}}case"wsdcg":{const j=z[103],T=z[102];return j!==void 0&&T!==void 0?{text:`${(j/100).toFixed(1)}¬∞C ¬∑ ${T}%`,alert:!1,color:"text-device-sensors-text",lowBattery:!1}:{text:"N/A",alert:!1,color:"text-content-tertiary",lowBattery:!1}}default:return{text:i.device.online?"Online":"Offline",alert:!1,color:i.device.online?"text-success":"text-content-tertiary",lowBattery:!1}}}let N=Y(()=>V[i.device.category]||{label:i.device.category,icon:"üì±"}),w=Y(()=>k(e(S)(),i.device.category));var M=jr(),E=de(M);E.__click=()=>o(n,!0),E.__keydown=z=>z.key==="Enter"&&o(n,!0);var ne=a(E),I=a(ne);let B;var U=a(I,!0);t(I);var he=r(I,2),P=a(he),ve=a(P,!0);t(P);var Te=r(P,2),Pe=a(Te,!0);t(Te),t(he);var Re=r(he,2);let Q;t(ne),t(E);var F=r(E,2);St(F,{get open(){return e(n)},onclose:()=>o(n,!1),get title(){return e(y)},children:(z,D)=>{var j=zr(),T=a(j),v=a(T),b=a(v,!0);t(v);var Z=r(v,2),oe=a(Z,!0);t(Z);var me=r(Z,2),Be=a(me);t(me),t(T);var Se=r(T,2);{var Qe=re=>{const d=Y(()=>e(S)());var m=gt(),H=de(m);{var le=xe=>{var _e=Tr(),ze=a(_e),X=r(a(ze),2),Me=a(X);t(X),t(ze);var G=r(ze,2),ce=r(a(G),2),A=a(ce);t(ce),t(G),t(_e),g($=>{f(Me,`${$??""}¬∞C`),f(A,`${e(d)[102]??""}%`)},[()=>(e(d)[103]/100).toFixed(1)]),l(xe,_e)};_(H,xe=>{e(d)&&xe(le)})}l(re,m)};_(Se,re=>{i.device.category==="wsdcg"&&re(Qe)})}var u=r(Se,2);{var q=re=>{const d=Y(()=>e(S)());var m=gt(),H=de(m);{var le=xe=>{const _e=Y(()=>e(d)[4]||e(d)[103]);var ze=gt(),X=de(ze);{var Me=G=>{var ce=Cr(),A=a(ce),$=r(a(A),2),ee=a($);t($),t(A);var be=r(A,2),Ee=a(be);t(be),t(ce),g(()=>{x($,1,`font-bold ${e(_e)>20?"text-success":"text-error"}`),f(ee,`${e(_e)??""}%`),x(Ee,1,`h-full rounded-full transition-all ${e(_e)>20?"bg-success":"bg-error"}`),Mt(Ee,`width: ${e(_e)??""}%`)}),l(G,ce)};_(X,G=>{e(_e)!==void 0&&G(Me)})}l(xe,ze)};_(H,xe=>{e(d)&&xe(le)})}l(re,m)};_(u,re=>{(i.device.category==="sj"||i.device.category==="mcs")&&re(q)})}var W=r(u,2),ue=a(W),s=r(a(ue),2),p=a(s,!0);t(s),t(ue);var h=r(ue,2),ie=r(a(h),2),fe=a(ie,!0);t(ie),t(h);var Ae=r(h,2),ae=r(a(Ae),2),ye=a(ae);t(ae),t(Ae),t(W),t(j),g(re=>{x(T,1,`rounded-xl p-6 text-center ${e(w).alert?"bg-error/20":"bg-surface-recessed"}`),f(b,e(N).icon),x(Z,1,`text-2xl font-bold mt-2 ${e(w).color??""}`),f(oe,e(w).text),f(Be,`${e(N).label??""} Sensor`),f(p,e(N).label),x(ie,1,i.device.online?"text-success":"text-error"),f(fe,i.device.online?"Yes":"No"),f(ye,`${re??""}...`)},[()=>i.device.id.slice(0,12)]),l(z,j)},$$slots:{default:!0}}),g(()=>{x(E,1,`card transition-card hover:scale-[1.02] ${C()?"p-2.5":"p-3"} w-full text-left cursor-pointer
         ${e(w).lowBattery?"border-warning/50 bg-warning/10":""}`),B=x(I,1,`w-10 h-10 rounded-xl flex items-center justify-center text-base shrink-0
             ${e(w).alert?"bg-error/20":e(w).lowBattery?"bg-warning/20":"badge-sensors"}`,null,B,{"status-active":e(w).alert}),f(U,e(N).icon),f(ve,e(y)),x(Te,1,`text-xs ${(e(w).lowBattery?"text-warning":e(w).color)??""}`),f(Pe,e(w).text),Q=x(Re,1,`w-2 h-2 rounded-full shrink-0
             ${i.device.online?"bg-success":"bg-content-tertiary"}`,null,Q,{"status-dot":i.device.online})}),l(te,M),vt()}bt(["click","keydown"]);var Rr=aa('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd"></path></svg>'),Br=aa('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M5.05 3.636a1 1 0 010 1.414 7 7 0 000 9.9 1 1 0 11-1.414 1.414 9 9 0 010-12.728 1 1 0 011.414 0zm9.9 0a1 1 0 011.414 0 9 9 0 010 12.728 1 1 0 11-1.414-1.414 7 7 0 000-9.9 1 1 0 010-1.414zM7.879 6.464a1 1 0 010 1.414 3 3 0 000 4.243 1 1 0 11-1.415 1.414 5 5 0 010-7.07 1 1 0 011.415 0zm4.242 0a1 1 0 011.415 0 5 5 0 010 7.072 1 1 0 01-1.415-1.415 3 3 0 000-4.242 1 1 0 010-1.415zM10 9a1 1 0 011 1v.01a1 1 0 11-2 0V10a1 1 0 011-1z"></path></svg>'),Or=c('<p class="text-xs text-content-secondary"> </p>'),Dr=c('<p class="text-xs text-content-secondary">No data</p>'),Ar=c('<input type="number" min="5" max="30" step="0.5" class="text-3xl font-bold w-24 text-center bg-transparent border-b-2 border-device-climate-heat-text outline-none text-content-primary [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/>'),Lr=c('<button class="text-3xl font-bold w-24 text-center text-content-primary hover:text-device-climate-heat-text transition-colors cursor-text" title="Click to edit"> </button>'),Vr=c('<span class="absolute -top-1 -right-1 w-2 h-2 bg-device-climate-heat-text rounded-full animate-pulse"></span>'),Nr=c('<span class="absolute -top-1 -right-1 w-2 h-2 bg-error rounded-full"></span>'),Er=c("<button> </button>"),Ir=c(`<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary uppercase tracking-wide">Current</span> <p class="text-3xl font-bold mt-1 text-content-primary"> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary uppercase tracking-wide">Target</span> <p class="text-3xl font-bold mt-1 text-device-climate-heat-text"> </p></div></div> <div><p class="text-sm text-content-secondary mb-3">Set Temperature</p> <div class="flex items-center justify-center gap-4"><button class="w-14 h-14 rounded-full badge-climate-cool text-2xl font-medium
                   hover:opacity-80 disabled:opacity-50 transition-all">‚àí</button> <div class="relative"><!> <!> <!></div> <button class="w-14 h-14 rounded-full badge-climate-heat text-2xl font-medium
                   hover:opacity-80 disabled:opacity-50 transition-all">+</button></div></div> <div><p class="text-sm text-content-secondary mb-2">Quick Set</p> <div class="grid grid-cols-4 gap-2"></div></div>`,1),Wr=c('<div class="text-center py-8 text-content-secondary">No data available</div>'),$r=c('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Valve</span> <span> </span></div> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Device ID</span> <span class="font-mono text-xs text-content-tertiary"> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Online</span> <span> </span></div></div></div>'),Fr=c('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><!></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function Hr(te,i){dt(i,!0);let C=ct(i,"device",7),y=ct(i,"compact",3,!1),n=Y(()=>Ct(C().name)),S=R(!1),V=R(null),J=R(!1),k=R(!1),N=R(!1),w=R(""),M=R(null),E=Y(()=>()=>{if(!C().last_status)return null;try{return JSON.parse(C().last_status)}catch{return null}}),ne=Y(()=>{var s;return(s=e(E)())!=null&&s["5"]?e(E)()[5]/10:null}),I=Y(()=>{var s;return(s=e(E)())!=null&&s["4"]?e(E)()[4]/10:null}),B=Y(()=>e(V)??e(I)),U=Y(()=>{var s;return((s=e(E)())==null?void 0:s["3"])||"unknown"});const[he,P]=kt(s=>{ve(s)},500);async function ve(s){o(J,!0),o(k,!1);const p=e(I);try{await fetch(`/api/devices/${C().id}/control`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dps:4,value:Math.round(s*10)})}),Te()}catch(h){console.error(h),o(k,!0),o(V,p,!0),setTimeout(()=>o(k,!1),3e3)}}async function Te(){try{const s=await fetch(`/api/devices/${C().id}/status`);if(s.ok){const p=await s.json();C().last_status=JSON.stringify(p.status),o(V,null)}}catch(s){console.error(s)}o(J,!1)}function Pe(s){if(e(B)===null)return;const p=Math.max(5,Math.min(30,e(B)+s));o(V,p,!0),he(p)}function Re(s){o(V,s,!0),P(),ve(s)}function Q(){e(B)!==null&&(o(w,e(B).toString(),!0),o(N,!0),La().then(()=>{var s;return(s=e(M))==null?void 0:s.select()}))}function F(){const s=parseFloat(e(w));if(!isNaN(s)&&s>=5&&s<=30){const p=Math.round(s*2)/2;Re(p)}o(N,!1)}function z(){o(N,!1)}var D=Fr(),j=de(D);j.__click=()=>o(S,!0),j.__keydown=s=>s.key==="Enter"&&o(S,!0);var T=a(j),v=a(T);let b;var Z=a(v);{var oe=s=>{var p=Rr();l(s,p)},me=s=>{var p=Br();l(s,p)};_(Z,s=>{e(U)==="opened"?s(oe):s(me,!1)})}t(v);var Be=r(v,2),Se=a(Be),Qe=a(Se,!0);t(Se);var u=r(Se,2);{var q=s=>{var p=Or(),h=a(p);t(p),g(()=>f(h,`${e(ne)??""}¬∞C ${e(U)==="opened"?"‚Üí":"¬∑"} ${e(B)??""}¬∞C`)),l(s,p)},W=s=>{var p=Dr();l(s,p)};_(u,s=>{e(ne)!==null?s(q):s(W,!1)})}t(Be),t(T),t(j);var ue=r(j,2);St(ue,{get open(){return e(S)},onclose:()=>o(S,!1),get title(){return e(n)},children:(s,p)=>{var h=$r(),ie=a(h),fe=r(a(ie),2),Ae=a(fe,!0);t(fe),t(ie);var ae=r(ie,2);{var ye=X=>{var Me=Ir(),G=de(Me),ce=a(G),A=r(a(ce),2),$=a(A);t(A),t(ce);var ee=r(ce,2),be=r(a(ee),2),Ee=a(be);t(be),t(ee),t(G);var je=r(G,2),we=r(a(je),2),ke=a(we);ke.__click=()=>Pe(-.5);var Ce=r(ke,2),Ie=a(Ce);{var qe=K=>{var O=Ar();wt(O),O.__keydown=L=>{L.key==="Enter"&&F(),L.key==="Escape"&&z()},Ba(O,L=>o(M,L),()=>e(M)),ta("blur",O,F),Aa(O,()=>e(w),L=>o(w,L)),l(K,O)},Oe=K=>{var O=Lr();O.__click=Q;var L=a(O);t(O),g(()=>f(L,`${e(B)??""}¬∞C`)),l(K,O)};_(Ie,K=>{e(N)?K(qe):K(Oe,!1)})}var Fe=r(Ie,2);{var et=K=>{var O=Vr();l(K,O)};_(Fe,K=>{e(J)&&K(et)})}var De=r(Fe,2);{var He=K=>{var O=Nr();l(K,O)};_(De,K=>{e(k)&&K(He)})}t(Ce);var Le=r(Ce,2);Le.__click=()=>Pe(.5),t(we),t(je);var Ge=r(je,2),Ke=r(a(Ge),2);$e(Ke,20,()=>[15,18,21,24],st,(K,O)=>{var L=Er();L.__click=()=>Re(O);var Ze=a(L);t(L),g(()=>{x(L,1,`py-2 text-sm rounded-lg transition-colors
                     ${e(B)===O?"badge-climate-heat":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),f(Ze,`${O??""}¬∞`)}),l(K,L)}),t(Ke),t(Ge),g(()=>{f($,`${e(ne)??""}¬∞C`),f(Ee,`${e(B)??""}¬∞C`),ke.disabled=e(B)!==null&&e(B)<=5,Le.disabled=e(B)!==null&&e(B)>=30}),l(X,Me)},re=X=>{var Me=Wr();l(X,Me)};_(ae,X=>{e(ne)!==null&&e(B)!==null?X(ye):X(re,!1)})}var d=r(ae,2),m=a(d),H=r(a(m),2),le=a(H);t(H),t(m);var xe=r(m,2),_e=r(a(xe),2),ze=a(_e,!0);t(_e),t(xe),t(d),t(h),g(X=>{x(fe,1,`font-medium ${e(U)==="opened"?"text-device-climate-heat-text":"text-device-climate-cool-text"}`),f(Ae,e(U)==="opened"?"Heating":"Idle"),f(le,`${X??""}...`),x(_e,1,C().online?"text-success":"text-error"),f(ze,C().online?"Yes":"No")},[()=>C().id.slice(0,12)]),l(s,h)},$$slots:{default:!0}}),g(()=>{x(j,1,`card transition-card hover:scale-[1.02] ${y()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b=x(v,1,`w-10 h-10 rounded-xl flex items-center justify-center shrink-0
             ${e(U)==="opened"?"badge-climate-heat":"badge-climate-cool"}`,null,b,{"status-active":e(U)==="opened"}),f(Qe,e(n))}),l(te,D),vt()}bt(["click","keydown"]);var Gr=c('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-audio-text rounded-full animate-pulse"></span>'),Kr=c('<p class="text-xs text-content-secondary"> </p>'),Yr=c('<p class="text-xs text-content-secondary"> </p>'),qr=c('<span class="absolute top-2 right-2 w-2 h-2 bg-device-audio-text rounded-full animate-pulse"></span>'),Jr=c("<button> </button>"),Ur=c("<button> </button>"),Qr=c('<div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Volume</span> <span class="font-medium text-content-primary"> </span></div> <div class="flex gap-2 items-center"><input type="range" min="0" max="100" class="flex-1"/> <button> </button></div></div> <div><p class="text-sm text-content-secondary mb-2">Input</p> <div class="grid grid-cols-2 gap-2"></div></div> <div><p class="text-sm text-content-secondary mb-2">Sound Program</p> <div class="grid grid-cols-3 gap-2"></div></div> <div><p class="text-sm text-content-secondary mb-2">Audio</p> <div class="grid grid-cols-2 gap-2"><button>Clear Voice</button> <button>Bass Ext.</button></div></div> <div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Subwoofer</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="-6" max="6" step="1" class="w-full"/></div>',1),Zr=c("<button> <!></button> <!>",1),Xr=c('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),es=c('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function ts(te,i){dt(i,!0);let C=ct(i,"compact",3,!1),y=Y(()=>Ct(i.device.name)),n=R(null),S=R(!1),V=R(!1),J=R(null),k=R(!1),N=R(null),w=R(null),M=Y(()=>{var s;return e(J)??((s=e(n))==null?void 0:s.power)??"standby"}),E=Y(()=>{var s;return e(N)??((s=e(n))==null?void 0:s.volume)??0}),ne=Y(()=>{var s;return e(w)??((s=e(n))==null?void 0:s.subwoofer_volume)??0});At(()=>{if(!e(S)&&i.device.last_status)try{o(n,JSON.parse(i.device.last_status),!0)}catch{}}),At(()=>{e(S)||(o(S,!0),Xt(i.device.id).then(s=>o(n,s.status,!0)).catch(()=>{}))});async function I(){const s=e(M)==="on"?"standby":"on";o(J,s,!0),o(k,!0);try{await lt(i.device.id,{power:s==="on"}),B()}catch(p){console.error(p),o(J,null),o(k,!1)}}async function B(){try{const s=await Xt(i.device.id);o(n,s.status,!0),o(J,null)}catch(s){console.error(s)}o(k,!1)}const[U]=kt(async s=>{try{await lt(i.device.id,{volume:s}),e(n)&&o(n,{...e(n),volume:s},!0)}catch(p){console.error(p)}o(N,null)},300),[he]=kt(async s=>{try{await lt(i.device.id,{subwoofer_volume:s}),e(n)&&o(n,{...e(n),subwoofer_volume:s},!0)}catch(p){console.error(p)}o(w,null)},300);function P(s){o(N,s,!0),U(s)}function ve(s){o(w,s,!0),he(s)}async function Te(){var p;const s=!((p=e(n))!=null&&p.mute);e(n)&&o(n,{...e(n),mute:s},!0);try{await lt(i.device.id,{mute:s})}catch(h){console.error(h),e(n)&&o(n,{...e(n),mute:!s},!0)}}async function Pe(s){var h;const p=(h=e(n))==null?void 0:h.input;e(n)&&o(n,{...e(n),input:s},!0);try{await lt(i.device.id,{input:s})}catch(ie){console.error(ie),e(n)&&p&&o(n,{...e(n),input:p},!0)}}async function Re(s){var h;const p=(h=e(n))==null?void 0:h.sound_program;e(n)&&o(n,{...e(n),sound_program:s},!0);try{await lt(i.device.id,{sound_program:s})}catch(ie){console.error(ie),e(n)&&p&&o(n,{...e(n),sound_program:p},!0)}}async function Q(){var p;const s=!((p=e(n))!=null&&p.clear_voice);e(n)&&o(n,{...e(n),clear_voice:s},!0);try{await lt(i.device.id,{clear_voice:s})}catch(h){console.error(h),e(n)&&o(n,{...e(n),clear_voice:!s},!0)}}async function F(){var p;const s=!((p=e(n))!=null&&p.bass_extension);e(n)&&o(n,{...e(n),bass_extension:s},!0);try{await lt(i.device.id,{bass_extension:s})}catch(h){console.error(h),e(n)&&o(n,{...e(n),bass_extension:!s},!0)}}const z=["tv","bluetooth"],D=[{id:"movie",label:"Movie"},{id:"music",label:"Music"},{id:"sports",label:"Sports"},{id:"game",label:"Game"},{id:"tv_program",label:"TV"},{id:"stereo",label:"Stereo"}];var j=es(),T=de(j);T.__click=()=>o(V,!0),T.__keydown=s=>s.key==="Enter"&&o(V,!0);var v=a(T),b=a(v);b.__click=s=>{s.stopPropagation(),I()};let Z;var oe=r(a(b),2);{var me=s=>{var p=Gr();l(s,p)};_(oe,s=>{e(k)&&s(me)})}t(b);var Be=r(b,2),Se=a(Be),Qe=a(Se,!0);t(Se);var u=r(Se,2);{var q=s=>{var p=Kr(),h=a(p);t(p),g(()=>{var ie,fe;return f(h,`${(ie=e(n))!=null&&ie.mute?"Muted":`${e(E)}%`} ¬∑ ${((fe=e(n))==null?void 0:fe.input)??""}`)}),l(s,p)},W=s=>{var p=Yr(),h=a(p,!0);t(p),g(()=>f(h,e(n)?"Standby":"Offline")),l(s,p)};_(u,s=>{e(M)==="on"?s(q):s(W,!1)})}t(Be),t(v),t(T);var ue=r(T,2);St(ue,{get open(){return e(V)},onclose:()=>o(V,!1),get title(){return e(y)},children:(s,p)=>{var h=Xr(),ie=a(h),fe=r(a(ie),2),Ae=a(fe,!0);t(fe),t(ie);var ae=r(ie,2);{var ye=re=>{var d=Zr(),m=de(d);m.__click=I;var H=a(m),le=r(H);{var xe=X=>{var Me=qr();l(X,Me)};_(le,X=>{e(k)&&X(xe)})}t(m);var _e=r(m,2);{var ze=X=>{var Me=Qr(),G=de(Me),ce=a(G),A=r(a(ce),2),$=a(A,!0);t(A),t(ce);var ee=r(ce,2),be=a(ee);wt(be),be.__input=K=>P(parseInt(K.currentTarget.value));var Ee=r(be,2);Ee.__click=Te;var je=a(Ee,!0);t(Ee),t(ee),t(G);var we=r(G,2),ke=r(a(we),2);$e(ke,21,()=>z,st,(K,O)=>{var L=Jr();L.__click=()=>Pe(e(O));var Ze=a(L,!0);t(L),g(()=>{x(L,1,`py-3 text-sm rounded-lg transition-colors uppercase
                       ${e(n).input===e(O)?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),f(Ze,e(O)==="bluetooth"?"BT":"TV")}),l(K,L)}),t(ke),t(we);var Ce=r(we,2),Ie=r(a(Ce),2);$e(Ie,21,()=>D,st,(K,O)=>{var L=Ur();L.__click=()=>Re(e(O).id);var Ze=a(L,!0);t(L),g(()=>{x(L,1,`py-2.5 text-sm rounded-lg transition-colors
                       ${e(n).sound_program===e(O).id?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),f(Ze,e(O).label)}),l(K,L)}),t(Ie),t(Ce);var qe=r(Ce,2),Oe=r(a(qe),2),Fe=a(Oe);Fe.__click=Q;var et=r(Fe,2);et.__click=F,t(Oe),t(qe);var De=r(qe,2),He=a(De),Le=r(a(He),2),Ge=a(Le);t(Le),t(He);var Ke=r(He,2);wt(Ke),Ke.__input=K=>ve(parseInt(K.currentTarget.value)),t(De),g(()=>{f($,e(n).mute?"Muted":`${e(E)}%`),Tt(be,e(E)),x(Ee,1,`w-10 h-10 rounded-lg transition-colors text-lg
                     ${e(n).mute?"bg-error/20 text-error":"bg-surface-recessed text-content-secondary"}
                     hover:bg-stroke-default`),f(je,e(n).mute?"üîá":"üîä"),x(Fe,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(n).clear_voice?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),x(et,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(n).bass_extension?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),f(Ge,`${e(ne)>0?"+":""}${e(ne)??""}`),Tt(Ke,e(ne))}),l(X,Me)};_(_e,X=>{e(M)==="on"&&X(ze)})}g(()=>{x(m,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(M)==="on"?"badge-audio":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),f(H,`${e(M)==="on"?"Turn Off":"Turn On"} `)}),l(re,d)};_(ae,re=>{e(n)&&re(ye)})}t(h),g(()=>{x(fe,1,`font-medium ${e(M)==="on"?"text-device-audio-text":"text-content-tertiary"}`),f(Ae,e(M)==="on"?"On":e(n)?"Standby":"Offline")}),l(s,h)},$$slots:{default:!0}}),g(()=>{x(T,1,`card transition-card hover:scale-[1.02] ${C()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b.disabled=!e(n),Z=x(b,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(M)==="on"?"badge-audio":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,Z,{"status-active":e(M)==="on"}),f(Qe,e(y))}),l(te,j),vt()}bt(["click","keydown","input"]);var as=c('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-air-text rounded-full animate-pulse"></span>'),rs=c('<p class="text-xs text-content-secondary"> </p>'),ss=c('<p class="text-xs text-content-secondary"> </p>'),ns=c("<div> </div>"),os=c('<span class="absolute top-2 right-2 w-2 h-2 bg-device-air-text rounded-full animate-pulse"></span>'),is=c("<button> </button>"),ls=c('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Humidity</span> <p class="text-lg font-bold mt-1 text-content-primary"> </p></div>'),cs=c('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Temp</span> <p class="text-lg font-bold mt-1 text-content-primary"> </p></div>'),ds=c('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Filter</span> <p> </p></div>'),vs=c('<div><span class="text-xs uppercase tracking-wide opacity-80">Air Quality Index</span> <p class="text-4xl font-bold mt-1"> </p> <p class="text-sm mt-1"> </p></div> <div><p class="text-sm text-content-secondary mb-2">Mode</p> <div class="grid grid-cols-3 gap-2"></div></div> <div class="grid grid-cols-3 gap-3"><!> <!> <!></div>',1),us=c("<button> <!></button> <!>",1),fs=c('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),ps=c('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.414 1.415l.708-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate">Air Purifier</h4> <!></div> <!></div></div> <!>',1);function ms(te,i){dt(i,!0);let C=ct(i,"compact",3,!1),y=Y(()=>se.airPurifier),n=R(!1),S=R(null),V=R(null),J=R(!1),k=Y(()=>{var v;return e(S)??((v=e(y))==null?void 0:v.power)??!1}),N=Y(()=>{var v;return e(V)??((v=e(y))==null?void 0:v.mode)??"auto"});async function w(){const v=!e(k);o(S,v),o(J,!0);try{await ea({power:v}),se.refreshAirPurifier()}catch(b){console.error(b),o(S,null)}o(J,!1),o(S,null)}async function M(v){const b=e(N);o(V,v,!0);try{await ea({mode:v}),se.refreshAirPurifier()}catch(Z){console.error(Z),o(V,b,!0)}o(V,null)}function E(v){return v<=50?"text-success bg-success/20":v<=100?"text-warning bg-warning/20":v<=150?"text-device-climate-heat-text bg-device-climate-heat-bg":"text-error bg-error/20"}function ne(v){return v<=50?"Good":v<=100?"Moderate":v<=150?"Unhealthy":"Very Unhealthy"}const I={auto:"Auto",silent:"Night",favorite:"Manual"};var B=ps(),U=de(B);U.__click=()=>o(n,!0),U.__keydown=v=>v.key==="Enter"&&o(n,!0);var he=a(U),P=a(he);P.__click=v=>{v.stopPropagation(),w()};let ve;var Te=r(a(P),2);{var Pe=v=>{var b=as();l(v,b)};_(Te,v=>{e(J)&&v(Pe)})}t(P);var Re=r(P,2),Q=r(a(Re),2);{var F=v=>{var b=rs(),Z=a(b);t(b),g(()=>{var oe;return f(Z,`${(I[e(N)]||e(N))??""} ¬∑ ${((oe=e(y))==null?void 0:oe.aqi)??0??""} AQI`)}),l(v,b)},z=v=>{var b=ss(),Z=a(b,!0);t(b),g(()=>f(Z,e(y)?"Off":"Offline")),l(v,b)};_(Q,v=>{e(k)?v(F):v(z,!1)})}t(Re);var D=r(Re,2);{var j=v=>{var b=ns(),Z=a(b,!0);t(b),g(oe=>{x(b,1,`px-2 py-1 rounded-md text-xs font-medium shrink-0 ${oe??""}`),f(Z,e(y).aqi)},[()=>E(e(y).aqi)]),l(v,b)};_(D,v=>{var b;C()&&((b=e(y))!=null&&b.power)&&v(j)})}t(he),t(U);var T=r(U,2);St(T,{get open(){return e(n)},onclose:()=>o(n,!1),title:"Air Purifier",children:(v,b)=>{var Z=fs(),oe=a(Z),me=r(a(oe),2),Be=a(me,!0);t(me),t(oe);var Se=r(oe,2);{var Qe=u=>{var q=us(),W=de(q);W.__click=w;var ue=a(W),s=r(ue);{var p=fe=>{var Ae=os();l(fe,Ae)};_(s,fe=>{e(J)&&fe(p)})}t(W);var h=r(W,2);{var ie=fe=>{var Ae=vs(),ae=de(Ae),ye=r(a(ae),2),re=a(ye,!0);t(ye);var d=r(ye,2),m=a(d,!0);t(d),t(ae);var H=r(ae,2),le=r(a(H),2);$e(le,20,()=>[{value:"auto",label:"Auto"},{value:"silent",label:"Night"},{value:"favorite",label:"Manual"}],st,(A,$)=>{var ee=is();ee.__click=()=>M($.value);var be=a(ee,!0);t(ee),g(()=>{x(ee,1,`py-3 text-sm rounded-lg transition-colors
                       ${e(N)===$.value?"badge-air":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),f(be,$.label)}),l(A,ee)}),t(le),t(H);var xe=r(H,2),_e=a(xe);{var ze=A=>{var $=ls(),ee=r(a($),2),be=a(ee);t(ee),t($),g(()=>f(be,`${e(y).humidity??""}%`)),l(A,$)};_(_e,A=>{e(y).humidity!==void 0&&A(ze)})}var X=r(_e,2);{var Me=A=>{var $=cs(),ee=r(a($),2),be=a(ee);t(ee),t($),g(()=>f(be,`${e(y).temperature??""}¬∞C`)),l(A,$)};_(X,A=>{e(y).temperature!==void 0&&A(Me)})}var G=r(X,2);{var ce=A=>{var $=ds(),ee=r(a($),2),be=a(ee);t(ee),t($),g(()=>{x(ee,1,`text-lg font-bold mt-1 ${e(y).filter_life<20?"text-error":"text-content-primary"}`),f(be,`${e(y).filter_life??""}%`)}),l(A,$)};_(G,A=>{e(y).filter_life!==void 0&&A(ce)})}t(xe),g((A,$)=>{x(ae,1,`rounded-xl p-4 text-center ${A??""}`),f(re,e(y).aqi),f(m,$)},[()=>E(e(y).aqi),()=>ne(e(y).aqi)]),l(fe,Ae)};_(h,fe=>{e(k)&&fe(ie)})}g(()=>{x(W,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(k)?"badge-air":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),f(ue,`${e(k)?"Turn Off":"Turn On"} `)}),l(u,q)};_(Se,u=>{e(y)&&u(Qe)})}t(Z),g(()=>{x(me,1,`font-medium ${e(k)?"text-device-air-text":"text-content-tertiary"}`),f(Be,e(k)?"On":e(y)?"Off":"Offline")}),l(v,Z)},$$slots:{default:!0}}),g(()=>{x(U,1,`card transition-card hover:scale-[1.02] ${C()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),P.disabled=!e(y),ve=x(P,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(k)?"badge-air":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,ve,{"status-active":e(k)})}),l(te,B),vt()}bt(["click","keydown"]);var xs=c('<div class="card rounded-xl p-2.5"><div class="flex items-center gap-2.5"><div class="w-9 h-9 rounded-lg bg-surface-recessed animate-pulse"></div> <div class="flex-1 space-y-1.5"><div class="w-20 h-3.5 rounded bg-surface-recessed animate-pulse"></div> <div class="w-14 h-3 rounded bg-surface-recessed animate-pulse"></div></div></div></div>'),_s=c('<section><div class="w-20 h-5 rounded bg-surface-recessed animate-pulse mb-3"></div> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),gs=c('<div class="space-y-6"></div>'),bs=c('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-lights-text">üí°</span> Lights <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),hs=c('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-climate-heat-text">üå°Ô∏è</span> Climate <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!> <!></div></section>'),ys=c('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-sensors-text">üì°</span> Sensors <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ws=c('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-audio-text">üîä</span> Audio <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ks=c('<!> <!> <!> <!> <section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-robot-text">ü§ñ</span> Robot <span class="text-xs text-content-tertiary">(1)</span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!></div></section>',1),Ss=c('<div class="pb-24 space-y-6"><!></div>');function Ls(te,i){dt(i,!0);let C=Y(()=>se.lamps.filter(w=>w.category==="lamp")),y=Y(()=>se.tuyaDevices.filter(w=>w.category==="wkf")),n=Y(()=>se.tuyaDevices.filter(w=>["sj","mcs","wsdcg"].includes(w.category))),S=Y(()=>se.lamps.length>0||se.tuyaDevices.length>0||se.yamahaDevices.length>0);var V=Ss();Ra("1uha8ag",w=>{ha(()=>{ya.title="Smart Home"})});var J=a(V);{var k=w=>{var M=gs();$e(M,20,()=>Array(3),st,(E,ne)=>{var I=_s(),B=r(a(I),2);$e(B,20,()=>Array(4),st,(U,he,P,ve)=>{var Te=xs();l(U,Te)}),t(B),t(I),l(E,I)}),t(M),l(w,M)},N=w=>{var M=ks(),E=de(M);{var ne=Q=>{var F=bs(),z=a(F),D=r(a(z),2),j=a(D);t(D),t(z);var T=r(z,2);$e(T,21,()=>e(C),v=>v.id,(v,b)=>{Xa(v,{get lamp(){return e(b)},compact:!0})}),t(T),t(F),g(()=>f(j,`(${e(C).length??""})`)),l(Q,F)};_(E,Q=>{e(C).length>0&&Q(ne)})}var I=r(E,2);{var B=Q=>{var F=hs(),z=a(F),D=r(a(z),2),j=a(D);t(D),t(z);var T=r(z,2),v=a(T);$e(v,17,()=>e(y),oe=>oe.id,(oe,me)=>{Hr(oe,{get device(){return e(me)},compact:!0})});var b=r(v,2);{var Z=oe=>{ms(oe,{compact:!0})};_(b,oe=>{se.airPurifier&&oe(Z)})}t(T),t(F),g(()=>f(j,`(${e(y).length+(se.airPurifier?1:0)})`)),l(Q,F)};_(I,Q=>{(e(y).length>0||se.airPurifier)&&Q(B)})}var U=r(I,2);{var he=Q=>{var F=ys(),z=a(F),D=r(a(z),2),j=a(D);t(D),t(z);var T=r(z,2);$e(T,21,()=>e(n),v=>v.id,(v,b)=>{Pr(v,{get device(){return e(b)},compact:!0})}),t(T),t(F),g(()=>f(j,`(${e(n).length??""})`)),l(Q,F)};_(U,Q=>{e(n).length>0&&Q(he)})}var P=r(U,2);{var ve=Q=>{var F=ws(),z=a(F),D=r(a(z),2),j=a(D);t(D),t(z);var T=r(z,2);$e(T,21,()=>se.yamahaDevices,v=>v.id,(v,b)=>{ts(v,{get device(){return e(b)},compact:!0})}),t(T),t(F),g(()=>f(j,`(${se.yamahaDevices.length??""})`)),l(Q,F)};_(P,Q=>{se.yamahaDevices.length>0&&Q(ve)})}var Te=r(P,2),Pe=r(a(Te),2),Re=a(Pe);Mr(Re,{get status(){return se.roborock},compact:!0}),t(Pe),t(Te),l(w,M)};_(J,w=>{se.loading&&!e(S)?w(k):w(N,!1)})}t(V),l(te,V),vt()}export{Ls as component};
