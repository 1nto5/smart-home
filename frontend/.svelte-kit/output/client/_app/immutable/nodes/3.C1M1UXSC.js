import{c as ge,a as v,d as hr,f as u,s as f}from"../chunks/C6IfJnDo.js";import{f as Q,p as wr,s as m,c as mt,d as _t,j as i,m as s,g as n,k as t,t as P,l as kr,e as Pr,$ as $r,n as a,o as R,v as Cr}from"../chunks/DKHSd8_d.js";import{l as me,s as _e,i as H}from"../chunks/DTZz9ds9.js";import{I as xe,s as ye,e as le,b as Hr,a as l,l as Tr,m as xt,n as Or,d as K,o as yt,r as N,p as Dr,q as Sr,v as rt,w as Ar,x as Nr,y as jr,z as Mr,A as zr,B as Er,C as Fr}from"../chunks/Dc1DVRgn.js";import{h as Rr,b as V,X as Vr,P as Lr}from"../chunks/MqMbLj5U.js";import{b as qr}from"../chunks/D1qDfmfk.js";import"../chunks/BFRcN8qg.js";import{T as Br}from"../chunks/Wf27CaWt.js";import{P as ht,C as wt,a as kt,T as Pt}from"../chunks/GI-K3CKk.js";import{F as Ur}from"../chunks/ByR4CFJf.js";function Xr(j,w){const y=me(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const T=[["path",{d:"m6 9 6 6 6-6"}]];xe(j,_e({name:"chevron-down"},()=>y,{get iconNode(){return T},children:(O,d)=>{var _=ge(),$=Q(_);ye($,w,"default",{}),v(O,_)},$$slots:{default:!0}}))}function Gr(j,w){const y=me(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const T=[["path",{d:"m18 15-6-6-6 6"}]];xe(j,_e({name:"chevron-up"},()=>y,{get iconNode(){return T},children:(O,d)=>{var _=ge(),$=Q(_);ye($,w,"default",{}),v(O,_)},$$slots:{default:!0}}))}function Ir(j,w){const y=me(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const T=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9"}]];xe(j,_e({name:"circle-pause"},()=>y,{get iconNode(){return T},children:(O,d)=>{var _=ge(),$=Q(_);ye($,w,"default",{}),v(O,_)},$$slots:{default:!0}}))}function Jr(j,w){const y=me(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const T=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];xe(j,_e({name:"rotate-ccw"},()=>y,{get iconNode(){return T},children:(O,d)=>{var _=ge(),$=Q(_);ye($,w,"default",{}),v(O,_)},$$slots:{default:!0}}))}var Kr=u('<div class="rounded-lg p-3 mb-4 bg-warning/10 border border-warning/30 flex items-center gap-2"><!> <p class="text-sm text-warning">Schedules paused while override active</p></div>'),Qr=u('<div class="flex items-center gap-3 p-2 rounded-lg bg-surface-recessed border border-stroke-subtle"><input type="range" min="5" max="25" step="0.5" class="w-32" style="--color-accent: var(--color-warning); --color-accent-glow: color-mix(in srgb, var(--color-warning) 50%, transparent);"/> <span class="font-display text-xl text-warning neon-text-subtle w-16"> </span></div>'),Wr=u('<div class="card card-active glow-climate-heat mb-4"><div class="p-4"><div class="flex flex-col sm:flex-row gap-3"><input type="text" placeholder="Preset ID (e.g. away)" class="flex-1 bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary placeholder:text-content-tertiary focus:border-device-climate-heat-text focus:outline-none transition-colors"/> <input type="text" placeholder="Display name (e.g. Away)" class="flex-1 bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary placeholder:text-content-tertiary focus:border-device-climate-heat-text focus:outline-none transition-colors"/> <div class="flex items-center gap-2 px-3 py-2 rounded-lg bg-surface-recessed border border-stroke-subtle"><input type="number" min="5" max="30" step="0.5" class="bg-transparent w-16 text-content-primary text-center font-display focus:outline-none [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/> <span class="text-device-climate-heat-text font-display">°C</span></div> <button class="px-4 py-2.5 rounded-lg glow-climate-heat power-btn-on font-semibold uppercase tracking-wider disabled:opacity-50 transition-all">Create</button> <button class="px-3 py-2.5 rounded-lg bg-surface-recessed border border-stroke-default text-content-secondary hover:border-stroke-strong transition-colors"><!></button></div></div></div>'),Yr=u('<div class="flex items-center gap-2"><input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded px-2 py-1 w-16 text-content-primary text-center font-display focus:outline-none focus:border-device-climate-heat-text [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/> <span class="text-device-climate-heat-text">°C</span> <button class="text-xs px-2 py-1 bg-success/20 text-success border border-success/30 rounded hover:bg-success/30 transition-colors">Save</button> <button class="text-xs px-2 py-1 bg-surface-recessed border border-stroke-default text-content-secondary rounded hover:border-stroke-strong transition-colors">Cancel</button></div>'),Zr=u('<button class="font-display text-2xl text-device-climate-heat-text neon-text-subtle hover:scale-105 transition-transform"> </button>'),ea=u('<p class="text-sm text-content-tertiary">No TRV devices found</p>'),ta=u('<input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded px-2 py-1 w-16 text-content-primary text-center text-sm font-display focus:outline-none focus:border-device-climate-heat-text [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/> <button class="text-xs px-2 py-1 bg-success/20 text-success border border-success/30 rounded disabled:opacity-50 hover:bg-success/30 transition-colors">Save</button> <button class="text-xs px-2 py-1 bg-surface-recessed border border-stroke-default text-content-secondary rounded hover:border-stroke-strong transition-colors">Cancel</button>',1),ra=u('<button class="p-1.5 rounded bg-surface-recessed border border-stroke-subtle text-content-tertiary hover:text-content-secondary transition-colors disabled:opacity-50" title="Reset to default"><!></button>'),aa=u("<button> </button> <!>",1),sa=u('<div class="flex items-center justify-between bg-surface-elevated rounded-lg p-3 border border-stroke-subtle"><span class="text-sm text-content-primary"> </span> <div class="flex items-center gap-2"><!></div></div>'),na=u('<div class="space-y-2"></div>'),oa=u('<div class="border-t border-stroke-subtle bg-surface-recessed/50 p-4"><p class="text-xs text-content-tertiary uppercase tracking-wider mb-3">Per-device temperatures <span class="text-content-secondary"> </span></p> <!></div>'),ia=u('<div class="card overflow-hidden hover:border-device-climate-heat-text/30 transition-colors"><div class="p-4"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-3"><div class="w-9 h-9 rounded-lg glow-climate-heat power-btn-on flex items-center justify-center"><!></div> <span class="font-display text-sm uppercase tracking-wider text-content-primary"> </span></div> <div class="flex items-center gap-1.5"><button class="p-2 rounded-lg bg-surface-recessed border border-stroke-default text-device-climate-heat-text hover:glow-climate-heat hover:power-btn-on transition-all disabled:opacity-50" title="Apply to all heaters"><!></button> <button class="p-2 rounded-lg bg-surface-recessed border border-stroke-default text-content-secondary hover:border-stroke-strong transition-colors" title="Per-device settings"><!></button> <button class="p-2 rounded-lg bg-surface-recessed border border-stroke-default text-content-tertiary hover:bg-error/10 hover:text-error hover:border-error/30 transition-all" title="Delete preset"><!></button></div></div> <!></div> <!></div>'),ca=u('<option class="svelte-1wpfyiy"> </option>'),la=u('<div class="card p-6 text-center"><!> <p class="text-content-tertiary">No schedules configured</p></div>'),da=u('<div><div class="flex items-center justify-between mb-2"><div class="font-display text-xl text-accent neon-text-subtle"> </div> <div class="flex gap-1.5"><button> </button> <button class="p-1.5 rounded-lg bg-surface-recessed border border-stroke-default text-content-tertiary hover:bg-error/10 hover:text-error hover:border-error/30 transition-colors"><!></button></div></div> <div class="text-sm"><span class="font-medium text-content-primary"> </span> <span class="text-content-tertiary mx-1">→</span> <span class="text-device-climate-heat-text"> </span></div></div>'),va=u('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"></div>'),pa=u('<button class="ml-3 px-3 py-1.5 rounded-lg bg-surface-recessed border border-stroke-default text-content-secondary text-sm hover:border-stroke-strong transition-colors">Clear All</button>'),ua=u('<div class="card p-4 flex items-center gap-3"><div class="w-2 h-2 rounded-full bg-success animate-glow"></div> <p class="text-content-secondary text-sm">All heaters online - no pending actions</p></div>'),fa=u('<div class="card p-3 flex items-center justify-between border-warning/30"><div class="flex items-center gap-3"><div class="w-2 h-2 rounded-full bg-warning animate-glow"></div> <span class="font-mono text-sm text-content-primary"> </span> <span class="text-content-tertiary">→</span> <span class="text-sm text-device-climate-heat-text"> </span></div> <span class="text-xs font-display text-content-tertiary px-2 py-1 rounded bg-surface-recessed"> </span></div>'),ba=u('<div class="space-y-2"></div>'),ga=u('<div class="space-y-8 pb-24"><section><div class="p-4"><div class="section-header section-header-warning mb-4 svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-warning) 15%, transparent); border-color: color-mix(in srgb, var(--color-warning) 30%, transparent); color: var(--color-warning);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-warning);">Override Mode</h2> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-warning) 40%, transparent) 0%, transparent 100%);"></div> <button> </button></div> <!> <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center"><div class="flex items-center gap-4"><label class="flex items-center gap-2 cursor-pointer group"><input type="radio" name="overrideMode" value="pause" class="sr-only peer"/> <div class="w-4 h-4 rounded-full border-2 border-stroke-default peer-checked:border-warning peer-checked:bg-warning/20 transition-colors flex items-center justify-center"><div class="w-2 h-2 rounded-full bg-warning scale-0 peer-checked:scale-100 transition-transform"></div></div> <span class="text-content-primary text-sm group-hover:text-warning transition-colors">Pause schedules</span></label> <label class="flex items-center gap-2 cursor-pointer group"><input type="radio" name="overrideMode" value="fixed" class="sr-only peer"/> <div class="w-4 h-4 rounded-full border-2 border-stroke-default peer-checked:border-warning peer-checked:bg-warning/20 transition-colors flex items-center justify-center"><div class="w-2 h-2 rounded-full bg-warning scale-0 peer-checked:scale-100 transition-transform"></div></div> <span class="text-content-primary text-sm group-hover:text-warning transition-colors">Fixed temperature</span></label></div> <!></div></div></section> <section><div class="section-header section-header-climate svelte-1wpfyiy"><div class="section-icon glow-climate-heat svelte-1wpfyiy"><!></div> <h2 class="section-title svelte-1wpfyiy">Heater Presets</h2> <span class="section-count svelte-1wpfyiy"> </span> <div class="section-line svelte-1wpfyiy"></div> <button class="ml-3 px-3 py-1.5 rounded-lg glow-climate-heat power-btn-on text-sm font-medium flex items-center gap-1.5 transition-transform hover:scale-105"><!> Add</button></div> <!> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"></div></section> <section><div class="section-header svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-accent) 15%, transparent); border-color: color-mix(in srgb, var(--color-accent) 30%, transparent); color: var(--color-accent);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-accent);">Create Schedule</h2> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-accent) 40%, transparent) 0%, transparent 100%);"></div></div> <div class="card p-4"><div class="flex flex-col sm:flex-row flex-wrap gap-3"><input type="text" placeholder="Schedule name" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 w-full sm:flex-1 sm:min-w-[150px] text-content-primary placeholder:text-content-tertiary focus:border-accent focus:outline-none transition-colors"/> <div class="flex gap-3"><select class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary flex-1 sm:flex-initial focus:border-accent focus:outline-none transition-colors svelte-1wpfyiy"></select> <input type="time" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2.5 text-content-primary font-display focus:border-accent focus:outline-none transition-colors"/></div> <button>Add</button></div></div></section> <section><div class="section-header svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-accent) 15%, transparent); border-color: color-mix(in srgb, var(--color-accent) 30%, transparent); color: var(--color-accent);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-accent);">Schedules</h2> <span class="section-count svelte-1wpfyiy"> </span> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-accent) 40%, transparent) 0%, transparent 100%);"></div></div> <!></section> <section><div class="section-header svelte-1wpfyiy"><div class="section-icon svelte-1wpfyiy" style="background: color-mix(in srgb, var(--color-warning) 15%, transparent); border-color: color-mix(in srgb, var(--color-warning) 30%, transparent); color: var(--color-warning);"><!></div> <h2 class="section-title svelte-1wpfyiy" style="color: var(--color-warning);">Pending Actions</h2> <span class="section-count svelte-1wpfyiy"> </span> <div class="section-line svelte-1wpfyiy" style="background: linear-gradient(90deg, color-mix(in srgb, var(--color-warning) 40%, transparent) 0%, transparent 100%);"></div> <!></div> <!></section></div>');function Ha(j,w){wr(w,!0);let y=m(""),T=m("night"),O=m("22:00"),d=m(!1),_=m(null),$=m(21),E=m("pause"),B=m(18),W=m(null),de=m(mt([])),Y=m(mt([])),Z=m(null),ve=m(21);_t(()=>{l.heaterOverride&&(n(E,l.heaterOverride.mode,!0),n(B,l.heaterOverride.fixed_temp,!0))}),_t(()=>{qr&&Tr().then(e=>{n(de,e.filter(r=>r.category==="wkf"),!0)})});async function $t(e){t(W)===e?(n(W,null),n(Y,[],!0)):(n(W,e,!0),n(Y,await rt(e),!0)),n(Z,null)}function Ct(e,r){const o=t(Y).find(c=>c.device_id===e);return o?{temp:o.target_temp,isCustom:!0}:{temp:r,isCustom:!1}}function Ht(e,r){n(Z,e,!0),n(ve,r,!0)}async function Tt(e,r){n(d,!0);try{await Er(e,r,t(ve)),n(Y,await rt(e),!0),n(Z,null)}catch(o){console.error(o)}n(d,!1)}async function Ot(e,r){n(d,!0);try{await Fr(e,r),n(Y,await rt(e),!0)}catch(o){console.error(o)}n(d,!1)}async function Dt(){var r;n(d,!0);const e=!((r=l.heaterOverride)!=null&&r.enabled);try{await xt(e,t(E),t(B)),await l.refreshHeaterOverride()}catch(o){console.error(o)}n(d,!1)}async function he(e){var o;if(!((o=l.heaterOverride)!=null&&o.enabled))return;n(d,!0);const r=e??t(E);try{await xt(!0,r,t(B)),await l.refreshHeaterOverride()}catch(c){console.error(c)}n(d,!1)}async function St(){if(t(y).trim()){n(d,!0);try{await Or(t(y).trim(),t(T),t(O)),n(y,""),await l.refreshHeaterSchedules()}catch(e){console.error(e)}n(d,!1)}}async function At(e){await Mr(e),await l.refreshHeaterSchedules()}async function Nt(e){await jr(e),await l.refreshHeaterSchedules()}async function jt(){await zr(),await l.refreshPendingHeater()}function Mt(e){n(_,e.id,!0),n($,e.target_temp,!0)}async function zt(e){await Nr(e,t($)),n(_,null),await l.refreshHeaterPresets()}function Et(){n(_,null)}let ee=m(!1),U=m(""),X=m(""),pe=m(20);async function Ft(){if(!(!t(U).trim()||!t(X).trim())){n(d,!0);try{const e=t(U).trim().toLowerCase().replace(/\s+/g,"-");await Dr(e,t(X).trim(),t(pe)),n(U,""),n(X,""),n(pe,20),n(ee,!1),await l.refreshHeaterPresets()}catch(e){console.error(e),alert(e.message||"Failed to create preset")}n(d,!1)}}async function Rt(e){if(confirm(`Delete preset "${e}"? This will also delete any schedules using this preset.`)){n(d,!0);try{await Ar(e),await l.refreshHeaterPresets(),await l.refreshHeaterSchedules()}catch(r){console.error(r)}n(d,!1)}}async function Vt(e){n(d,!0);try{const r=await Sr(e);console.log("Applied preset:",r),await l.refreshPendingHeater()}catch(r){console.error(r)}n(d,!1)}function at(e){const r=l.heaterPresets.find(o=>o.id===e);return(r==null?void 0:r.name)??e}function Lt(e){const r=t(de).find(o=>o.id===e);return(r==null?void 0:r.name)??e}var we=ga();Rr("1wpfyiy",e=>{Pr(()=>{$r.title="Smart Home - Heater Schedule"})});var ue=s(we),st=s(ue),ke=s(st),Pe=s(ke),qt=s(Pe);Ir(qt,{class:"w-4 h-4"}),a(Pe);var te=i(Pe,6);te.__click=Dt;var Bt=s(te,!0);a(te),a(ke);var nt=i(ke,2);{var Ut=e=>{var r=Kr(),o=s(r);kt(o,{class:"w-4 h-4 text-warning shrink-0"}),R(2),a(r),v(e,r)};H(nt,e=>{var r;(r=l.heaterOverride)!=null&&r.enabled&&e(Ut)})}var ot=i(nt,2),$e=s(ot),Ce=s($e),He=s(Ce);N(He),He.__change=()=>{n(E,"pause"),he("pause")},R(4),a(Ce);var it=i(Ce,2),Te=s(it);N(Te),Te.__change=()=>{n(E,"fixed"),he("fixed")},R(4),a(it),a($e);var Xt=i($e,2);{var Gt=e=>{var r=Qr(),o=s(r);N(o),o.__change=()=>he();var c=i(o,2),p=s(c);a(c),a(r),P(()=>f(p,`${t(B)??""}°C`)),V(o,()=>t(B),x=>n(B,x)),v(e,r)};H(Xt,e=>{t(E)==="fixed"&&e(Gt)})}a(ot),a(st),a(ue);var Oe=i(ue,2),De=s(Oe),Se=s(De),It=s(Se);Br(It,{class:"w-4 h-4"}),a(Se);var Ae=i(Se,4),Jt=s(Ae,!0);a(Ae);var Ne=i(Ae,4);Ne.__click=()=>n(ee,!t(ee));var Kt=s(Ne);ht(Kt,{class:"w-4 h-4"}),R(),a(Ne),a(De);var ct=i(De,2);{var Qt=e=>{var r=Wr(),o=s(r),c=s(o),p=s(c);N(p);var x=i(p,2);N(x);var h=i(x,2),S=s(h);N(S),R(2),a(h);var D=i(h,2);D.__click=Ft;var A=i(D,2);A.__click=()=>n(ee,!1);var k=s(A);Vr(k,{class:"w-5 h-5"}),a(A),a(c),a(o),a(r),P(b=>D.disabled=b,[()=>t(d)||!t(U).trim()||!t(X).trim()]),V(p,()=>t(U),b=>n(U,b)),V(x,()=>t(X),b=>n(X,b)),V(S,()=>t(pe),b=>n(pe,b)),v(e,r)};H(ct,e=>{t(ee)&&e(Qt)})}var lt=i(ct,2);le(lt,21,()=>l.heaterPresets,e=>e.id,(e,r)=>{var o=ia(),c=s(o),p=s(c),x=s(p),h=s(x),S=s(h);Ur(S,{class:"w-4 h-4"}),a(h);var D=i(h,2),A=s(D,!0);a(D),a(x);var k=i(x,2),b=s(k);b.__click=()=>Vt(t(r).id);var L=s(b);Lr(L,{class:"w-4 h-4"}),a(b);var F=i(b,2);F.__click=()=>$t(t(r).id);var be=s(F);{var re=g=>{Gr(g,{class:"w-4 h-4"})},Xe=g=>{Xr(g,{class:"w-4 h-4"})};H(be,g=>{t(W)===t(r).id?g(re):g(Xe,!1)})}a(F);var G=i(F,2);G.__click=()=>Rt(t(r).id);var Ge=s(G);Pt(Ge,{class:"w-4 h-4"}),a(G),a(k),a(p);var Ie=i(p,2);{var dr=g=>{var C=Yr(),M=s(C);N(M);var ae=i(M,4);ae.__click=()=>zt(t(r).id);var Je=i(ae,2);Je.__click=Et,a(C),V(M,()=>t($),Ke=>n($,Ke)),v(g,C)},vr=g=>{var C=Zr();C.__click=()=>Mt(t(r));var M=s(C);a(C),P(()=>f(M,`${t(r).target_temp??""}°C`)),v(g,C)};H(Ie,g=>{t(_)===t(r).id?g(dr):g(vr,!1)})}a(c);var pr=i(c,2);{var ur=g=>{var C=oa(),M=s(C),ae=i(s(M)),Je=s(ae);a(ae),a(M);var Ke=i(M,2);{var fr=I=>{var se=ea();v(I,se)},br=I=>{var se=na();le(se,21,()=>t(de),Qe=>Qe.id,(Qe,q)=>{const ne=Cr(()=>Ct(t(q).id,t(r).target_temp));var We=sa(),Ye=s(We),gr=s(Ye,!0);a(Ye);var gt=i(Ye,2),mr=s(gt);{var _r=J=>{var oe=ta(),z=Q(oe);N(z);var ie=i(z,2);ie.__click=()=>Tt(t(r).id,t(q).id);var Ze=i(ie,2);Ze.__click=()=>n(Z,null),P(()=>ie.disabled=t(d)),V(z,()=>t(ve),et=>n(ve,et)),v(J,oe)},xr=J=>{var oe=aa(),z=Q(oe);z.__click=()=>Ht(t(q).id,t(ne).temp);var ie=s(z);a(z);var Ze=i(z,2);{var et=tt=>{var ce=ra();ce.__click=()=>Ot(t(r).id,t(q).id);var yr=s(ce);Jr(yr,{class:"w-3 h-3"}),a(ce),P(()=>ce.disabled=t(d)),v(tt,ce)};H(Ze,tt=>{t(ne).isCustom&&tt(et)})}P(()=>{K(z,1,`font-display text-sm ${t(ne).isCustom?"text-device-climate-heat-text":"text-content-secondary"} hover:text-device-climate-heat-text transition-colors`),f(ie,`${t(ne).temp??""}°C ${t(ne).isCustom?"":"(default)"}`)}),v(J,oe)};H(mr,J=>{t(Z)===t(q).id?J(_r):J(xr,!1)})}a(gt),a(We),P(()=>f(gr,t(q).name||t(q).id)),v(Qe,We)}),a(se),v(I,se)};H(Ke,I=>{t(de).length===0?I(fr):I(br,!1)})}a(C),P(()=>f(Je,`(override default ${t(r).target_temp??""}°C)`)),v(g,C)};H(pr,g=>{t(W)===t(r).id&&g(ur)})}a(o),P(()=>{f(A,t(r).name),b.disabled=t(d)}),v(e,o)}),a(lt),a(Oe);var je=i(Oe,2),Me=s(je),dt=s(Me),Wt=s(dt);ht(Wt,{class:"w-4 h-4"}),a(dt),R(4),a(Me);var vt=i(Me,2),pt=s(vt),ze=s(pt);N(ze);var Ee=i(ze,2),fe=s(Ee);le(fe,21,()=>l.heaterPresets,e=>e.id,(e,r)=>{var o=ca(),c=s(o);a(o);var p={};P(()=>{f(c,`${t(r).name??""} (${t(r).target_temp??""}°C)`),p!==(p=t(r).id)&&(o.value=(o.__value=t(r).id)??"")}),v(e,o)}),a(fe);var ut=i(fe,2);N(ut),a(Ee);var Fe=i(Ee,2);Fe.__click=St,a(pt),a(vt),a(je);var Re=i(je,2),Ve=s(Re),Le=s(Ve),Yt=s(Le);wt(Yt,{class:"w-4 h-4"}),a(Le);var ft=i(Le,4),Zt=s(ft,!0);a(ft),R(2),a(Ve);var er=i(Ve,2);{var tr=e=>{var r=la(),o=s(r);wt(o,{class:"w-10 h-10 mx-auto text-content-tertiary mb-2 opacity-50"}),R(2),a(r),v(e,r)},rr=e=>{var r=va();le(r,21,()=>l.heaterSchedules,o=>o.id,(o,c)=>{var p=da();let x;var h=s(p),S=s(h),D=s(S,!0);a(S);var A=i(S,2),k=s(A);k.__click=()=>Nt(t(c).id);var b=s(k,!0);a(k);var L=i(k,2);L.__click=()=>At(t(c).id);var F=s(L);Pt(F,{class:"w-3.5 h-3.5"}),a(L),a(A),a(h);var be=i(h,2),re=s(be),Xe=s(re,!0);a(re);var G=i(re,4),Ge=s(G,!0);a(G),a(be),a(p),P(Ie=>{x=K(p,1,"card p-3 transition-opacity svelte-1wpfyiy",null,x,{"opacity-50":!t(c).enabled,"card-active":t(c).enabled,"glow-accent":t(c).enabled}),f(D,t(c).time),K(k,1,`px-2.5 py-1 rounded-lg font-medium text-xs transition-all
                         ${t(c).enabled?"glow-accent power-btn-on":"bg-surface-recessed border border-stroke-default text-content-tertiary hover:border-stroke-strong"}`,"svelte-1wpfyiy"),f(b,t(c).enabled?"On":"Off"),f(Xe,t(c).name),f(Ge,Ie)},[()=>at(t(c).preset_id)]),v(o,p)}),a(r),v(e,r)};H(er,e=>{l.heaterSchedules.length===0?e(tr):e(rr,!1)})}a(Re);var bt=i(Re,2),qe=s(bt),Be=s(qe),ar=s(Be);kt(ar,{class:"w-4 h-4"}),a(Be);var Ue=i(Be,4),sr=s(Ue,!0);a(Ue);var nr=i(Ue,4);{var or=e=>{var r=pa();r.__click=jt,v(e,r)};H(nr,e=>{l.pendingHeaterActions.length>0&&e(or)})}a(qe);var ir=i(qe,2);{var cr=e=>{var r=ua();v(e,r)},lr=e=>{var r=ba();le(r,21,()=>l.pendingHeaterActions,o=>o.id,(o,c)=>{var p=fa(),x=s(p),h=i(s(x),2),S=s(h,!0);a(h);var D=i(h,4),A=s(D,!0);a(D),a(x);var k=i(x,2),b=s(k);a(k),a(p),P((L,F)=>{f(S,L),f(A,F),f(b,`Retry #${t(c).retry_count??""}`)},[()=>Lt(t(c).device_id),()=>at(t(c).preset_id)]),v(o,p)}),a(r),v(e,r)};H(ir,e=>{l.pendingHeaterActions.length===0?e(cr):e(lr,!1)})}a(bt),a(we),P((e,r)=>{var o,c,p;K(ue,1,`card ${(o=l.heaterOverride)!=null&&o.enabled?"card-active border-warning/50":""}`),te.disabled=t(d),K(te,1,`ml-3 px-4 py-2 rounded-lg font-semibold uppercase tracking-wider text-sm transition-all disabled:opacity-50
                 ${(c=l.heaterOverride)!=null&&c.enabled?"bg-warning/20 text-warning border border-warning/50 shadow-[0_0_15px_-3px] shadow-warning/40":"bg-surface-recessed border border-stroke-default text-content-secondary hover:border-stroke-strong"}`),f(Bt,(p=l.heaterOverride)!=null&&p.enabled?"Active":"Off"),yt(He,t(E)==="pause"),yt(Te,t(E)==="fixed"),f(Jt,l.heaterPresets.length),Fe.disabled=e,K(Fe,1,`px-5 py-2.5 rounded-lg font-semibold uppercase tracking-wider transition-all w-full sm:w-auto
                 ${r??""}`,"svelte-1wpfyiy"),f(Zt,l.heaterSchedules.length),f(sr,l.pendingHeaterActions.length)},[()=>t(d)||!t(y).trim(),()=>!t(d)&&t(y).trim()?"glow-accent power-btn-on":"bg-surface-recessed border border-stroke-default text-content-tertiary"]),V(ze,()=>t(y),e=>n(y,e)),Hr(fe,()=>t(T),e=>n(T,e)),V(ut,()=>t(O),e=>n(O,e)),v(j,we),kr()}hr(["click","change"]);export{Ha as component};
