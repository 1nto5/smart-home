import{c as Z,a as d,d as Ie,f as x,s as _}from"../chunks/1jsiGTgY.js";import{f as ee,p as Oe,s as n,t as j,g as r,d as T,i as Ve,j as u,e as De,c as s,$ as Re,ah as pe,k as t}from"../chunks/js2fU5d7.js";import{i as I}from"../chunks/DykED0dc.js";import{e as O,b as qe,i as Be,s as c,r as X,a as ue,j as Fe,u as Ge,k as Je,l as Ke,m as Le}from"../chunks/Ba70ElLJ.js";import{h as Qe}from"../chunks/C6CS1puY.js";import{b as Y}from"../chunks/C0VnCiCJ.js";import{T as Ue,P as We}from"../chunks/VaZuplM8.js";import"../chunks/MGp4GRcg.js";import{I as te,s as ae}from"../chunks/CeF91h_T.js";import{l as re,s as se}from"../chunks/D_bOTIDI.js";function Xe(H,h){const m=re(h,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const y=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];te(H,se({name:"clock"},()=>m,{get iconNode(){return y},children:($,w)=>{var v=Z(),g=ee(v);ae(g,h,"default",{}),d($,v)},$$slots:{default:!0}}))}function Ye(H,h){const m=re(h,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const y=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];te(H,se({name:"plus"},()=>m,{get iconNode(){return y},children:($,w)=>{var v=Z(),g=ee(v);ae(g,h,"default",{}),d($,v)},$$slots:{default:!0}}))}function Ze(H,h){const m=re(h,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const y=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];te(H,se({name:"trash-2"},()=>m,{get iconNode(){return y},children:($,w)=>{var v=Z(),g=ee(v);ae(g,h,"default",{}),d($,v)},$$slots:{default:!0}}))}var et=x('<div class="flex items-center gap-2"><input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded px-2 py-1 w-16 text-content-primary text-center"/> <span class="text-content-secondary">°C</span> <button class="text-xs px-2 py-1 bg-success/20 text-success rounded">Save</button> <button class="text-xs px-2 py-1 bg-surface-recessed text-content-secondary rounded">Cancel</button></div>'),tt=x('<button class="text-2xl font-mono text-content-primary hover:text-accent transition-colors"> </button>'),at=x('<div class="bg-surface-elevated border border-stroke-default rounded-xl p-4"><div class="flex items-center justify-between mb-2"><span class="font-medium text-content-primary"> </span> <button class="p-1.5 rounded-lg bg-accent/20 text-accent hover:bg-accent/30 transition-colors disabled:opacity-50" title="Apply to all heaters"><!></button></div> <!></div>'),rt=x("<option> </option>"),st=x('<p class="text-content-secondary">No heater schedules yet</p>'),nt=x('<div><div class="flex items-center gap-4"><span class="text-xl font-mono text-content-primary"> </span> <div><span class="font-medium text-content-primary"> </span> <span class="text-sm text-content-secondary ml-2"> </span></div></div> <div class="flex gap-2"><button> </button> <button class="text-sm px-3 py-1 rounded-lg bg-error/20 text-error hover:bg-error/30 font-medium transition-colors"><!></button></div></div>'),ot=x('<div class="space-y-2"></div>'),it=x('<button class="text-sm px-3 py-1 rounded-lg bg-surface-recessed text-content-secondary hover:bg-stroke-default transition-colors">Clear All</button>'),ct=x('<p class="text-content-secondary">No pending actions (all heaters online)</p>'),lt=x('<div class="bg-surface-elevated border border-stroke-default rounded-xl p-3 flex items-center justify-between"><div><span class="font-mono text-sm text-content-primary"> </span> <span class="text-sm text-content-secondary ml-2"> </span></div> <span class="text-xs text-content-tertiary"> </span></div>'),dt=x('<div class="space-y-2"></div>'),vt=x('<div class="space-y-8"><section><h2 class="text-lg font-medium text-content-primary mb-4 flex items-center gap-2"><!> Heater Presets</h2> <div class="grid grid-cols-2 sm:grid-cols-4 gap-3"></div></section> <section class="bg-surface-elevated border border-stroke-default rounded-xl p-4"><h2 class="text-lg font-medium text-content-primary mb-4 flex items-center gap-2"><!> Create Schedule</h2> <div class="flex flex-col sm:flex-row flex-wrap gap-3"><input type="text" placeholder="Schedule name" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 w-full sm:flex-1 sm:min-w-[150px] text-content-primary placeholder:text-content-tertiary"/> <div class="flex gap-3"><select class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 text-content-primary flex-1 sm:flex-initial"></select> <input type="time" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 text-content-primary"/></div> <button class="bg-accent hover:bg-accent/80 disabled:opacity-50 px-4 py-2 rounded-lg text-white font-medium w-full sm:w-auto">Add</button></div></section> <section><h2 class="text-lg font-medium text-content-primary mb-4 flex items-center gap-2"><!> </h2> <!></section> <section><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-medium text-content-primary"> </h2> <!></div> <!></section></div>');function $t(H,h){Oe(h,!0);let m=T(""),y=T("night"),$=T("22:00"),w=T(!1),v=T(null),g=T(21);async function me(){if(r(m).trim()){u(w,!0);try{await Be(r(m).trim(),r(y),r($)),u(m,""),await c.refreshHeaterSchedules()}catch(e){console.error(e)}u(w,!1)}}async function fe(e){await Ke(e),await c.refreshHeaterSchedules()}async function _e(e){await Je(e),await c.refreshHeaterSchedules()}async function xe(){await Le(),await c.refreshPendingHeater()}function he(e){u(v,e.id,!0),u(g,e.target_temp,!0)}async function ge(e){await Ge(e,r(g)),u(v,null),await c.refreshHeaterPresets()}function be(){u(v,null)}async function ye(e){u(w,!0);try{const a=await Fe(e);console.log("Applied preset:",a),await c.refreshPendingHeater()}catch(a){console.error(a)}u(w,!1)}function ne(e){const a=c.heaterPresets.find(o=>o.id===e);return(a==null?void 0:a.name)??e}var V=vt();Qe("1wpfyiy",e=>{De(()=>{Re.title="Smart Home - Heater Schedule"})});var D=s(V),R=s(D),$e=s(R);Ue($e,{class:"w-5 h-5"}),pe(),t(R);var oe=n(R,2);O(oe,21,()=>c.heaterPresets,e=>e.id,(e,a)=>{var o=at(),i=s(o),l=s(i),P=s(l,!0);t(l);var f=n(l,2);f.__click=()=>ye(r(a).id);var S=s(f);We(S,{class:"w-4 h-4"}),t(f),t(i);var C=n(i,2);{var M=b=>{var p=et(),A=s(p);X(A);var z=n(A,4);z.__click=()=>ge(r(a).id);var N=n(z,2);N.__click=be,t(p),Y(A,()=>r(g),U=>u(g,U)),d(b,p)},k=b=>{var p=tt();p.__click=()=>he(r(a));var A=s(p);t(p),j(()=>_(A,`${r(a).target_temp??""}°C`)),d(b,p)};I(C,b=>{r(v)===r(a).id?b(M):b(k,!1)})}t(o),j(()=>{_(P,r(a).name),f.disabled=r(w)}),d(e,o)}),t(oe),t(D);var q=n(D,2),B=s(q),we=s(B);Ye(we,{class:"w-5 h-5"}),pe(),t(B);var ie=n(B,2),F=s(ie);X(F);var G=n(F,2),E=s(G);O(E,21,()=>c.heaterPresets,e=>e.id,(e,a)=>{var o=rt(),i=s(o);t(o);var l={};j(()=>{_(i,`${r(a).name??""} (${r(a).target_temp??""}°C)`),l!==(l=r(a).id)&&(o.value=(o.__value=r(a).id)??"")}),d(e,o)}),t(E);var ce=n(E,2);X(ce),t(G);var le=n(G,2);le.__click=me,t(ie),t(q);var J=n(q,2),K=s(J),de=s(K);Xe(de,{class:"w-5 h-5"});var Pe=n(de);t(K);var ke=n(K,2);{var He=e=>{var a=st();d(e,a)},Se=e=>{var a=ot();O(a,21,()=>c.heaterSchedules,o=>o.id,(o,i)=>{var l=nt();let P;var f=s(l),S=s(f),C=s(S,!0);t(S);var M=n(S,2),k=s(M),b=s(k,!0);t(k);var p=n(k,2),A=s(p);t(p),t(M),t(f);var z=n(f,2),N=s(z);N.__click=()=>_e(r(i).id);var U=s(N,!0);t(N);var W=n(N,2);W.__click=()=>fe(r(i).id);var ze=s(W);Ze(ze,{class:"w-4 h-4"}),t(W),t(z),t(l),j(Ee=>{P=ue(l,1,"bg-surface-elevated border border-stroke-default rounded-xl p-3 flex items-center justify-between",null,P,{"opacity-50":!r(i).enabled}),_(C,r(i).time),_(b,r(i).name),_(A,`(${Ee??""})`),ue(N,1,`text-sm px-3 py-1 rounded-lg font-medium transition-colors
                       ${r(i).enabled?"bg-success/20 text-success":"bg-surface-recessed text-content-secondary"}`),_(U,r(i).enabled?"On":"Off")},[()=>ne(r(i).preset_id)]),d(o,l)}),t(a),d(e,a)};I(ke,e=>{c.heaterSchedules.length===0?e(He):e(Se,!1)})}t(J);var ve=n(J,2),L=s(ve),Q=s(L),Ae=s(Q);t(Q);var Ne=n(Q,2);{var Ce=e=>{var a=it();a.__click=xe,d(e,a)};I(Ne,e=>{c.pendingHeaterActions.length>0&&e(Ce)})}t(L);var Me=n(L,2);{var je=e=>{var a=ct();d(e,a)},Te=e=>{var a=dt();O(a,21,()=>c.pendingHeaterActions,o=>o.id,(o,i)=>{var l=lt(),P=s(l),f=s(P),S=s(f,!0);t(f);var C=n(f,2),M=s(C);t(C),t(P);var k=n(P,2),b=s(k);t(k),t(l),j(p=>{_(S,r(i).device_id),_(M,`→ ${p??""}`),_(b,`Retry #${r(i).retry_count??""}`)},[()=>ne(r(i).preset_id)]),d(o,l)}),t(a),d(e,a)};I(Me,e=>{c.pendingHeaterActions.length===0?e(je):e(Te,!1)})}t(ve),t(V),j(e=>{le.disabled=e,_(Pe,` Schedules (${c.heaterSchedules.length??""})`),_(Ae,`Pending Actions (${c.pendingHeaterActions.length??""})`)},[()=>r(w)||!r(m).trim()]),Y(F,()=>r(m),e=>u(m,e)),qe(E,()=>r(y),e=>u(y,e)),Y(ce,()=>r($),e=>u($,e)),d(H,V),Ve()}Ie(["click"]);export{$t as component};
