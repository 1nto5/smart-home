import{c as xe,a as v,d as ia,f as p,s as _}from"../chunks/CEDFY9N9.js";import{f as K,p as ca,s as m,a as vt,b as ut,d as i,i as s,c as n,g as t,t as P,h as da,e as la,$ as va,n as L,j as r,k as ua}from"../chunks/B2drfW2D.js";import{i as T}from"../chunks/Bro-wCEF.js";import{I as be,s as ge,e as de,b as pa,a as d,l as fa,m as pt,n as _a,d as le,o as ft,r as S,p as ma,q as xa,v as ba,w as Ye,x as ga,y as ha,z as ya,A as wa,B as $a,C as Pa}from"../chunks/B0b-N5Ls.js";import{h as ka,b as R,X as _t,P as Ca}from"../chunks/Dx7yjh-j.js";import{b as Ha}from"../chunks/Diics1BE.js";import"../chunks/CDrra-OC.js";import{l as he,s as ye}from"../chunks/o9TOya3S.js";import{T as Ta}from"../chunks/Crr3xu5C.js";import{P as mt,C as Oa,T as Da}from"../chunks/AqStGfDT.js";function Sa(N,y){const g=he(y,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const O=[["path",{d:"m6 9 6 6 6-6"}]];be(N,ye({name:"chevron-down"},()=>g,{get iconNode(){return O},children:(D,l)=>{var x=xe(),k=K(x);ge(k,y,"default",{}),v(D,x)},$$slots:{default:!0}}))}function Na(N,y){const g=he(y,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const O=[["path",{d:"m18 15-6-6-6 6"}]];be(N,ye({name:"chevron-up"},()=>g,{get iconNode(){return O},children:(D,l)=>{var x=xe(),k=K(x);ge(k,y,"default",{}),v(D,x)},$$slots:{default:!0}}))}function Aa(N,y){const g=he(y,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const O=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9"}]];be(N,ye({name:"circle-pause"},()=>g,{get iconNode(){return O},children:(D,l)=>{var x=xe(),k=K(x);ge(k,y,"default",{}),v(D,x)},$$slots:{default:!0}}))}function ja(N,y){const g=he(y,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const O=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];be(N,ye({name:"rotate-ccw"},()=>g,{get iconNode(){return O},children:(D,l)=>{var x=xe(),k=K(x);ge(k,y,"default",{}),v(D,x)},$$slots:{default:!0}}))}var Ma=p('<div class="bg-warning/10 border border-warning/30 rounded-lg p-3 mb-4"><p class="text-sm text-warning">Schedules are paused while override is active</p></div>'),za=p('<div class="flex items-center gap-2"><input type="range" min="5" max="25" step="0.5" class="w-32 accent-accent"/> <span class="text-xl font-mono text-content-primary w-16"> </span></div>'),Ea=p('<div class="bg-surface-elevated border border-stroke-default rounded-xl p-4 mb-4"><div class="flex flex-col sm:flex-row gap-3"><input type="text" placeholder="Preset ID (e.g. away)" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 text-content-primary placeholder:text-content-tertiary flex-1"/> <input type="text" placeholder="Display name (e.g. Away)" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 text-content-primary placeholder:text-content-tertiary flex-1"/> <div class="flex items-center gap-2"><input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 w-20 text-content-primary text-center"/> <span class="text-content-secondary">°C</span></div> <button class="bg-accent hover:bg-accent/80 disabled:opacity-50 px-4 py-2 rounded-lg text-white font-medium">Create</button> <button class="px-3 py-2 rounded-lg bg-surface-recessed text-content-secondary hover:bg-stroke-default transition-colors"><!></button></div></div>'),Ra=p('<div class="flex items-center gap-2"><input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded px-2 py-1 w-16 text-content-primary text-center"/> <span class="text-content-secondary">°C</span> <button class="text-xs px-2 py-1 bg-success/20 text-success rounded">Save</button> <button class="text-xs px-2 py-1 bg-surface-recessed text-content-secondary rounded">Cancel</button></div>'),Fa=p('<button class="text-2xl font-mono text-content-primary hover:text-accent transition-colors"> </button>'),Va=p('<p class="text-sm text-content-tertiary">No TRV devices found</p>'),La=p('<input type="number" min="5" max="30" step="0.5" class="bg-surface-recessed border border-stroke-default rounded px-2 py-1 w-16 text-content-primary text-center text-sm"/> <button class="text-xs px-2 py-1 bg-success/20 text-success rounded disabled:opacity-50">Save</button> <button class="text-xs px-2 py-1 bg-surface-recessed text-content-secondary rounded">Cancel</button>',1),qa=p('<button class="p-1 rounded bg-surface-recessed text-content-tertiary hover:text-content-secondary transition-colors disabled:opacity-50" title="Reset to default"><!></button>'),Ba=p("<button> </button> <!>",1),Ua=p('<div class="flex items-center justify-between bg-surface-elevated rounded-lg p-2"><span class="text-sm text-content-primary"> </span> <div class="flex items-center gap-2"><!></div></div>'),Xa=p('<div class="space-y-2"></div>'),Ga=p('<div class="border-t border-stroke-default bg-surface-recessed/50 p-4"><p class="text-sm text-content-secondary mb-3"> </p> <!></div>'),Ia=p('<div class="bg-surface-elevated border border-stroke-default rounded-xl overflow-hidden"><div class="p-4 relative group"><button class="absolute top-2 right-2 p-1 rounded bg-error/20 text-error opacity-0 group-hover:opacity-100 transition-opacity" title="Delete preset"><!></button> <div class="flex items-center justify-between"><div class="flex items-center gap-4"><span class="font-medium text-content-primary"> </span> <!></div> <div class="flex items-center gap-2"><button class="p-1.5 rounded-lg bg-accent/20 text-accent hover:bg-accent/30 transition-colors disabled:opacity-50" title="Apply to all heaters"><!></button> <button class="p-1.5 rounded-lg bg-surface-recessed text-content-secondary hover:bg-stroke-default transition-colors" title="Per-device settings"><!></button></div></div></div> <!></div>'),Ja=p("<option> </option>"),Ka=p('<p class="text-content-secondary">No heater schedules yet</p>'),Qa=p('<div><div class="flex items-center gap-4"><span class="text-xl font-mono text-content-primary"> </span> <div><span class="font-medium text-content-primary"> </span> <span class="text-sm text-content-secondary ml-2"> </span></div></div> <div class="flex gap-2"><button> </button> <button class="text-sm px-3 py-1 rounded-lg bg-error/20 text-error hover:bg-error/30 font-medium transition-colors"><!></button></div></div>'),Wa=p('<div class="space-y-2"></div>'),Ya=p('<button class="text-sm px-3 py-1 rounded-lg bg-surface-recessed text-content-secondary hover:bg-stroke-default transition-colors">Clear All</button>'),Za=p('<p class="text-content-secondary">No pending actions (all heaters online)</p>'),er=p('<div class="bg-surface-elevated border border-stroke-default rounded-xl p-3 flex items-center justify-between"><div><span class="font-mono text-sm text-content-primary"> </span> <span class="text-sm text-content-secondary ml-2"> </span></div> <span class="text-xs text-content-tertiary"> </span></div>'),tr=p('<div class="space-y-2"></div>'),ar=p('<div class="space-y-8"><section><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-medium text-content-primary flex items-center gap-2"><!> Override Mode</h2> <button> </button></div> <!> <div class="flex flex-col sm:flex-row gap-4"><div class="flex items-center gap-3"><label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="overrideMode" value="pause" class="accent-accent"/> <span class="text-content-primary">Pause schedules</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="overrideMode" value="fixed" class="accent-accent"/> <span class="text-content-primary">Fixed temperature</span></label></div> <!></div></section> <section><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-medium text-content-primary flex items-center gap-2"><!> Heater Presets</h2> <button class="text-sm px-3 py-1.5 rounded-lg bg-accent/20 text-accent hover:bg-accent/30 transition-colors flex items-center gap-1"><!> Add Preset</button></div> <!> <div class="space-y-3"></div></section> <section class="bg-surface-elevated border border-stroke-default rounded-xl p-4"><h2 class="text-lg font-medium text-content-primary mb-4 flex items-center gap-2"><!> Create Schedule</h2> <div class="flex flex-col sm:flex-row flex-wrap gap-3"><input type="text" placeholder="Schedule name" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 w-full sm:flex-1 sm:min-w-[150px] text-content-primary placeholder:text-content-tertiary"/> <div class="flex gap-3"><select class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 text-content-primary flex-1 sm:flex-initial"></select> <input type="time" class="bg-surface-recessed border border-stroke-default rounded-lg px-3 py-2 text-content-primary"/></div> <button class="bg-accent hover:bg-accent/80 disabled:opacity-50 px-4 py-2 rounded-lg text-white font-medium w-full sm:w-auto">Add</button></div></section> <section><h2 class="text-lg font-medium text-content-primary mb-4 flex items-center gap-2"><!> </h2> <!></section> <section><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-medium text-content-primary"> </h2> <!></div> <!></section></div>');function pr(N,y){ca(y,!0);let g=m(""),O=m("night"),D=m("22:00"),l=m(!1),x=m(null),k=m(21),M=m("pause"),q=m(18),Q=m(null),ve=m(vt([])),W=m(vt([])),Y=m(null),ue=m(21);ut(()=>{d.heaterOverride&&(n(M,d.heaterOverride.mode,!0),n(q,d.heaterOverride.fixed_temp,!0))}),ut(()=>{Ha&&fa().then(e=>{n(ve,e.filter(a=>a.category==="wkf"),!0)})});async function xt(e){t(Q)===e?(n(Q,null),n(W,[],!0)):(n(Q,e,!0),n(W,await Ye(e),!0)),n(Y,null)}function bt(e,a){const o=t(W).find(c=>c.device_id===e);return o?{temp:o.target_temp,isCustom:!0}:{temp:a,isCustom:!1}}function gt(e,a){n(Y,e,!0),n(ue,a,!0)}async function ht(e,a){n(l,!0);try{await $a(e,a,t(ue)),n(W,await Ye(e),!0),n(Y,null)}catch(o){console.error(o)}n(l,!1)}async function yt(e,a){n(l,!0);try{await Pa(e,a),n(W,await Ye(e),!0)}catch(o){console.error(o)}n(l,!1)}async function wt(){var a;n(l,!0);const e=!((a=d.heaterOverride)!=null&&a.enabled);try{await pt(e,t(M),t(q)),await d.refreshHeaterOverride()}catch(o){console.error(o)}n(l,!1)}async function we(e){var o;if(!((o=d.heaterOverride)!=null&&o.enabled))return;n(l,!0);const a=e??t(M);try{await pt(!0,a,t(q)),await d.refreshHeaterOverride()}catch(c){console.error(c)}n(l,!1)}async function $t(){if(t(g).trim()){n(l,!0);try{await _a(t(g).trim(),t(O),t(D)),n(g,""),await d.refreshHeaterSchedules()}catch(e){console.error(e)}n(l,!1)}}async function Pt(e){await ya(e),await d.refreshHeaterSchedules()}async function kt(e){await ha(e),await d.refreshHeaterSchedules()}async function Ct(){await wa(),await d.refreshPendingHeater()}function Ht(e){n(x,e.id,!0),n(k,e.target_temp,!0)}async function Tt(e){await ga(e,t(k)),n(x,null),await d.refreshHeaterPresets()}function Ot(){n(x,null)}let Z=m(!1),B=m(""),U=m(""),pe=m(20);async function Dt(){if(!(!t(B).trim()||!t(U).trim())){n(l,!0);try{const e=t(B).trim().toLowerCase().replace(/\s+/g,"-");await ma(e,t(U).trim(),t(pe)),n(B,""),n(U,""),n(pe,20),n(Z,!1),await d.refreshHeaterPresets()}catch(e){console.error(e),alert(e.message||"Failed to create preset")}n(l,!1)}}async function St(e){if(confirm(`Delete preset "${e}"? This will also delete any schedules using this preset.`)){n(l,!0);try{await xa(e),await d.refreshHeaterPresets(),await d.refreshHeaterSchedules()}catch(a){console.error(a)}n(l,!1)}}async function Nt(e){n(l,!0);try{const a=await ba(e);console.log("Applied preset:",a),await d.refreshPendingHeater()}catch(a){console.error(a)}n(l,!1)}function Ze(e){const a=d.heaterPresets.find(o=>o.id===e);return(a==null?void 0:a.name)??e}function At(e){const a=t(ve).find(o=>o.id===e);return(a==null?void 0:a.name)??e}var $e=ar();ka("1wpfyiy",e=>{la(()=>{va.title="Smart Home - Heater Schedule"})});var fe=s($e),Pe=s(fe),ke=s(Pe),jt=s(ke);Aa(jt,{class:"w-5 h-5"}),L(),r(ke);var ee=i(ke,2);ee.__click=wt;var Mt=s(ee,!0);r(ee),r(Pe);var et=i(Pe,2);{var zt=e=>{var a=Ma();v(e,a)};T(et,e=>{var a;(a=d.heaterOverride)!=null&&a.enabled&&e(zt)})}var tt=i(et,2),Ce=s(tt),He=s(Ce),Te=s(He);S(Te),Te.__change=()=>{n(M,"pause"),we("pause")},L(2),r(He);var at=i(He,2),Oe=s(at);S(Oe),Oe.__change=()=>{n(M,"fixed"),we("fixed")},L(2),r(at),r(Ce);var Et=i(Ce,2);{var Rt=e=>{var a=za(),o=s(a);S(o),o.__change=()=>we();var c=i(o,2),u=s(c);r(c),r(a),P(()=>_(u,`${t(q)??""}°C`)),R(o,()=>t(q),h=>n(q,h)),v(e,a)};T(Et,e=>{t(M)==="fixed"&&e(Rt)})}r(tt),r(fe);var De=i(fe,2),Se=s(De),Ne=s(Se),Ft=s(Ne);Ta(Ft,{class:"w-5 h-5"}),L(),r(Ne);var Ae=i(Ne,2);Ae.__click=()=>n(Z,!t(Z));var Vt=s(Ae);mt(Vt,{class:"w-4 h-4"}),L(),r(Ae),r(Se);var rt=i(Se,2);{var Lt=e=>{var a=Ea(),o=s(a),c=s(o);S(c);var u=i(c,2);S(u);var h=i(u,2),w=s(h);S(w),L(2),r(h);var $=i(h,2);$.__click=Dt;var C=i($,2);C.__click=()=>n(Z,!1);var z=s(C);_t(z,{class:"w-5 h-5"}),r(C),r(o),r(a),P(b=>$.disabled=b,[()=>t(l)||!t(B).trim()||!t(U).trim()]),R(c,()=>t(B),b=>n(B,b)),R(u,()=>t(U),b=>n(U,b)),R(w,()=>t(pe),b=>n(pe,b)),v(e,a)};T(rt,e=>{t(Z)&&e(Lt)})}var st=i(rt,2);de(st,21,()=>d.heaterPresets,e=>e.id,(e,a)=>{var o=Ia(),c=s(o),u=s(c);u.__click=()=>St(t(a).id);var h=s(u);_t(h,{class:"w-3 h-3"}),r(u);var w=i(u,2),$=s(w),C=s($),z=s(C,!0);r(C);var b=i(C,2);{var te=f=>{var H=Ra(),A=s(H);S(A);var me=i(A,4);me.__click=()=>Tt(t(a).id);var Ue=i(me,2);Ue.__click=Ot,r(H),R(A,()=>t(k),Xe=>n(k,Xe)),v(f,H)},X=f=>{var H=Fa();H.__click=()=>Ht(t(a));var A=s(H);r(H),P(()=>_(A,`${t(a).target_temp??""}°C`)),v(f,H)};T(b,f=>{t(x)===t(a).id?f(te):f(X,!1)})}r($);var G=i($,2),E=s(G);E.__click=()=>Nt(t(a).id);var F=s(E);Ca(F,{class:"w-4 h-4"}),r(E);var ae=i(E,2);ae.__click=()=>xt(t(a).id);var re=s(ae);{var qe=f=>{Na(f,{class:"w-4 h-4"})},Be=f=>{Sa(f,{class:"w-4 h-4"})};T(re,f=>{t(Q)===t(a).id?f(qe):f(Be,!1)})}r(ae),r(G),r(w),r(c);var Zt=i(c,2);{var ea=f=>{var H=Ga(),A=s(H),me=s(A);r(A);var Ue=i(A,2);{var Xe=I=>{var se=Va();v(I,se)},ta=I=>{var se=Xa();de(se,21,()=>t(ve),Ge=>Ge.id,(Ge,V)=>{const ne=ua(()=>bt(t(V).id,t(a).target_temp));var Ie=Ua(),Je=s(Ie),aa=s(Je,!0);r(Je);var lt=i(Je,2),ra=s(lt);{var sa=J=>{var oe=La(),j=K(oe);S(j);var ie=i(j,2);ie.__click=()=>ht(t(a).id,t(V).id);var Ke=i(ie,2);Ke.__click=()=>n(Y,null),P(()=>ie.disabled=t(l)),R(j,()=>t(ue),Qe=>n(ue,Qe)),v(J,oe)},na=J=>{var oe=Ba(),j=K(oe);j.__click=()=>gt(t(V).id,t(ne).temp);var ie=s(j);r(j);var Ke=i(j,2);{var Qe=We=>{var ce=qa();ce.__click=()=>yt(t(a).id,t(V).id);var oa=s(ce);ja(oa,{class:"w-3 h-3"}),r(ce),P(()=>ce.disabled=t(l)),v(We,ce)};T(Ke,We=>{t(ne).isCustom&&We(Qe)})}P(()=>{le(j,1,`font-mono text-sm ${t(ne).isCustom?"text-accent":"text-content-secondary"} hover:text-accent transition-colors`),_(ie,`${t(ne).temp??""}°C ${t(ne).isCustom?"":"(default)"}`)}),v(J,oe)};T(ra,J=>{t(Y)===t(V).id?J(sa):J(na,!1)})}r(lt),r(Ie),P(()=>_(aa,t(V).name||t(V).id)),v(Ge,Ie)}),r(se),v(I,se)};T(Ue,I=>{t(ve).length===0?I(Xe):I(ta,!1)})}r(H),P(()=>_(me,`Per-device temperatures (override default ${t(a).target_temp??""}°C)`)),v(f,H)};T(Zt,f=>{t(Q)===t(a).id&&f(ea)})}r(o),P(()=>{_(z,t(a).name),E.disabled=t(l)}),v(e,o)}),r(st),r(De);var je=i(De,2),Me=s(je),qt=s(Me);mt(qt,{class:"w-5 h-5"}),L(),r(Me);var nt=i(Me,2),ze=s(nt);S(ze);var Ee=i(ze,2),_e=s(Ee);de(_e,21,()=>d.heaterPresets,e=>e.id,(e,a)=>{var o=Ja(),c=s(o);r(o);var u={};P(()=>{_(c,`${t(a).name??""} (${t(a).target_temp??""}°C)`),u!==(u=t(a).id)&&(o.value=(o.__value=t(a).id)??"")}),v(e,o)}),r(_e);var ot=i(_e,2);S(ot),r(Ee);var it=i(Ee,2);it.__click=$t,r(nt),r(je);var Re=i(je,2),Fe=s(Re),ct=s(Fe);Oa(ct,{class:"w-5 h-5"});var Bt=i(ct);r(Fe);var Ut=i(Fe,2);{var Xt=e=>{var a=Ka();v(e,a)},Gt=e=>{var a=Wa();de(a,21,()=>d.heaterSchedules,o=>o.id,(o,c)=>{var u=Qa();let h;var w=s(u),$=s(w),C=s($,!0);r($);var z=i($,2),b=s(z),te=s(b,!0);r(b);var X=i(b,2),G=s(X);r(X),r(z),r(w);var E=i(w,2),F=s(E);F.__click=()=>kt(t(c).id);var ae=s(F,!0);r(F);var re=i(F,2);re.__click=()=>Pt(t(c).id);var qe=s(re);Da(qe,{class:"w-4 h-4"}),r(re),r(E),r(u),P(Be=>{h=le(u,1,"bg-surface-elevated border border-stroke-default rounded-xl p-3 flex items-center justify-between",null,h,{"opacity-50":!t(c).enabled}),_(C,t(c).time),_(te,t(c).name),_(G,`(${Be??""})`),le(F,1,`text-sm px-3 py-1 rounded-lg font-medium transition-colors
                       ${t(c).enabled?"bg-success/20 text-success":"bg-surface-recessed text-content-secondary"}`),_(ae,t(c).enabled?"On":"Off")},[()=>Ze(t(c).preset_id)]),v(o,u)}),r(a),v(e,a)};T(Ut,e=>{d.heaterSchedules.length===0?e(Xt):e(Gt,!1)})}r(Re);var dt=i(Re,2),Ve=s(dt),Le=s(Ve),It=s(Le);r(Le);var Jt=i(Le,2);{var Kt=e=>{var a=Ya();a.__click=Ct,v(e,a)};T(Jt,e=>{d.pendingHeaterActions.length>0&&e(Kt)})}r(Ve);var Qt=i(Ve,2);{var Wt=e=>{var a=Za();v(e,a)},Yt=e=>{var a=tr();de(a,21,()=>d.pendingHeaterActions,o=>o.id,(o,c)=>{var u=er(),h=s(u),w=s(h),$=s(w,!0);r(w);var C=i(w,2),z=s(C);r(C),r(h);var b=i(h,2),te=s(b);r(b),r(u),P((X,G)=>{_($,X),_(z,`→ ${G??""}`),_(te,`Retry #${t(c).retry_count??""}`)},[()=>At(t(c).device_id),()=>Ze(t(c).preset_id)]),v(o,u)}),r(a),v(e,a)};T(Qt,e=>{d.pendingHeaterActions.length===0?e(Wt):e(Yt,!1)})}r(dt),r($e),P(e=>{var a,o,c;le(fe,1,`bg-surface-elevated border rounded-xl p-4 ${(a=d.heaterOverride)!=null&&a.enabled?"border-warning":"border-stroke-default"}`),ee.disabled=t(l),le(ee,1,`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50
               ${(o=d.heaterOverride)!=null&&o.enabled?"bg-warning text-white hover:bg-warning/80":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),_(Mt,(c=d.heaterOverride)!=null&&c.enabled?"Active":"Off"),ft(Te,t(M)==="pause"),ft(Oe,t(M)==="fixed"),it.disabled=e,_(Bt,` Schedules (${d.heaterSchedules.length??""})`),_(It,`Pending Actions (${d.pendingHeaterActions.length??""})`)},[()=>t(l)||!t(g).trim()]),R(ze,()=>t(g),e=>n(g,e)),pa(_e,()=>t(O),e=>n(O,e)),R(ot,()=>t(D),e=>n(D,e)),v(N,$e),da()}ia(["click","change"]);export{pr as component};
