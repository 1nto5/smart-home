import{d as bt,c as ot,e as ta,a as l,f as d,s as u,t as At,b as aa}from"../chunks/KsRpIQI_.js";import{h as Ut,a0 as vt,aD as ie,a6 as ut,a1 as a,a2 as t,a3 as r,a5 as g,b5 as ga,s as o,a4 as R,g as e,a9 as H,aN as ba,R as Qt,a7 as Lt,K as ha,a8 as ya}from"../chunks/CxzkeP2L.js";import{i as x}from"../chunks/JY_fI8Mb.js";import{s as ce,f as gt,h as wa,e as $e,i as st,j as ka,k as Sa,l as Zt,m as Ma,n as Ta,o as Ca,p as za,r as ja,q as Pa,u as Xt,v as ct,w as ea}from"../chunks/C_s4BKAr.js";import{h as Ra}from"../chunks/jdav0aRx.js";import{s as _,r as wt,b as Tt}from"../chunks/BRTiwp6z.js";import{p as dt,b as Ba}from"../chunks/FSvs7gAD.js";import{s as Oa}from"../chunks/Bcugs9fK.js";import{a as Da}from"../chunks/CxA4e2Oe.js";import{b as Aa}from"../chunks/DvcQTK2l.js";import{t as La}from"../chunks/Cc_vj6Fx.js";function Mt(se,i,j,h){var n=se.__style;if(Ut||n!==i){var S=Da(i,h);(!Ut||S!==se.getAttribute("style"))&&(S==null?se.removeAttribute("style"):se.style.cssText=S),se.__style=i}return h}const Va={"korytarz 1":"Hallway 1","korytarz 2":"Hallway 2",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",jadalnia:"Dining Room",gabinet:"Study",pralnia:"Laundry","Czujnik zalania kuchnia":"Water Sensor Kitchen","Czujnik zalania ≈Çazienka":"Water Sensor Bathroom","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Drzwi:"Door Sensor","Grzejnik salon":"Radiator Living Room","Grzejnik sypialnia":"Radiator Bedroom","Grzejnik kuchnia":"Radiator Kitchen","Grzejnik ≈Çazienka":"Radiator Bathroom","Grzejnik korytarz":"Radiator Hallway","Grzejnik pok√≥j dzieci":"Radiator Kids Room",Grzejnik:"Radiator"},Na={korytarz:"Hallway",kuchnia:"Kitchen",salon:"Living Room",sypialnia:"Bedroom",≈Çazienka:"Bathroom","pok√≥j dzieci":"Kids Room",pok√≥j:"Room",dzieci:"Kids","Czujnik zalania":"Water Sensor","Stacja meteo":"Weather Station",Grzejnik:"Radiator",Drzwi:"Door",Lampa:"Light",du≈ºy:"Large",ma≈Çy:"Small",g≈Ç√≥wny:"Main",g√≥rny:"Upper",dolny:"Lower"};function Ct(se){if(!se)return se;const i=se.toLowerCase();for(const[n,S]of Object.entries(Va))if(i===n.toLowerCase())return S;let j=se;const h=Object.entries(Na).sort((n,S)=>S[0].length-n[0].length);for(const[n,S]of h){const F=new RegExp(n,"gi");j=j.replace(F,S)}return j}function kt(se,i){let j=null;return[(...S)=>{j&&clearTimeout(j),j=setTimeout(()=>{j=null,se(...S)},i)},()=>{j&&(clearTimeout(j),j=null)}]}var Ea=d(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 dialog-overlay animate-fade-in svelte-alpl3u" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="dialog-content w-full max-w-md max-h-[80vh] overflow-hidden"><div class="flex items-center justify-between p-4 border-b border-stroke-default"><h2 id="dialog-title" class="text-lg font-semibold text-content-primary"> </h2> <button aria-label="Close dialog" class="w-10 h-10 rounded-xl bg-surface-recessed text-content-secondary hover:text-content-primary
                 hover:bg-stroke-default transition-colors flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 overflow-y-auto max-h-[calc(80vh-64px)]"><!></div></div></div>`);function St(se,i){vt(i,!0);let j=dt(i,"open",3,!1);function h(k){k.target===k.currentTarget&&i.onclose()}function n(k){k.key==="Escape"&&i.onclose()}var S=ot();ta("keydown",ga,n);var F=ie(S);{var Z=k=>{var O=Ea();O.__click=h,O.__keydown=n;var w=a(O),N=a(w),z=a(N),de=a(z,!0);t(z);var E=r(z,2);E.__click=function(...ye){var P;(P=i.onclose)==null||P.apply(this,ye)},t(N);var D=r(N,2),K=a(D);Oa(K,()=>i.children),t(D),t(w),t(O),g(()=>u(de,i.title)),l(k,O)};x(F,k=>{j()&&k(Z)})}l(se,S),ut()}bt(["click","keydown"]);var Ia=d('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-lights-text rounded-full animate-pulse"></span>'),Wa=d('<p class="text-xs text-content-secondary">Offline</p>'),$a=d('<p class="text-xs text-device-audio-text">Moonlight</p>'),Fa=d('<p class="text-xs text-content-secondary"> </p>'),Ha=d('<p class="text-xs text-content-secondary">Off</p>'),Ga=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-lights-text rounded-full animate-pulse"></span>'),Ka=d('<span class="absolute top-1 right-1 w-1.5 h-1.5 bg-device-lights-text rounded-full animate-pulse"></span>'),Ya=d("<button> <!></button>"),qa=d('<div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Brightness</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="1" max="100" class="w-full"/></div> <div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Color Temperature</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="1700" max="6500" step="100" class="w-full"/> <div class="flex justify-between text-xs text-content-tertiary mt-1"><span>Warm</span> <span>Cool</span></div></div>',1),Ja=d('<div class="py-4 text-center text-sm text-device-audio-text/80">Hardware night light mode active</div>'),Ua=d('<div><p class="text-sm text-content-secondary mb-2">Presets</p> <div class="grid grid-cols-3 gap-2"></div></div> <!>',1),Qa=d('<button> <!></button> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">IP Address</span> <span class="font-mono text-xs text-content-tertiary"> </span></div></div>',1),Za=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span><!></span></div> <!></div>'),Xa=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a.75.75 0 01.75.75v6.5a.75.75 0 01-1.5 0v-6.5A.75.75 0 0110 2z"></path><path d="M5.404 4.343a.75.75 0 10-1.06 1.06 6.5 6.5 0 109.192 0 .75.75 0 00-1.06-1.06 5 5 0 11-7.072 0z"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function er(se,i){vt(i,!0);let j=dt(i,"compact",3,!1),h=H(()=>Ct(i.lamp.name)),n=H(()=>ce.lampStatuses.get(i.lamp.id)),S=H(()=>i.lamp.online===1),F=R(!1),Z=R(null),k=R(!1),O=R(null),w=R(null),N=R(null),z=H(()=>{var f;return e(S)?e(Z)??((f=e(n))==null?void 0:f.power)??!1:!1}),de=H(()=>{var f;return e(w)??((f=e(n))==null?void 0:f.brightness)??0}),E=H(()=>{var f;return e(N)??((f=e(n))==null?void 0:f.color_temp)??0});async function D(f){f.stopPropagation();const B=!e(z);o(Z,B),o(k,!0);try{await gt(i.lamp.id,{toggle:!0}),K()}catch(ve){console.error(ve),o(Z,null),o(k,!1)}}async function K(){try{const f=await wa(i.lamp.id);ce.updateLampStatus(i.lamp.id,f.status),o(Z,null)}catch(f){console.error(f)}o(k,!1),o(O,null)}const[ye]=kt(async f=>{try{await gt(i.lamp.id,{brightness:f}),e(n)&&ce.updateLampStatus(i.lamp.id,{...e(n),brightness:f})}catch(B){console.error(B)}o(w,null)},300),[P]=kt(async f=>{try{await gt(i.lamp.id,{color_temp:f}),e(n)&&ce.updateLampStatus(i.lamp.id,{...e(n),color_temp:f})}catch(B){console.error(B)}o(N,null)},300);function pe(f){o(w,f,!0),ye(f)}function Se(f){o(N,f,!0),P(f)}const Oe=[{id:"day",label:"Day",brightness:100,colorTemp:5e3,moonlight:!1},{id:"night",label:"Night",brightness:30,colorTemp:2700,moonlight:!1},{id:"moonlight",label:"Moonlight",brightness:10,colorTemp:2700,moonlight:!0}];async function De(f){var B,ve;o(O,f.id,!0),f.moonlight?e(n)&&ce.updateLampStatus(i.lamp.id,{...e(n),power:!0,moonlight_mode:!0,brightness:f.brightness}):e(n)&&ce.updateLampStatus(i.lamp.id,{...e(n),power:!0,moonlight_mode:!1,brightness:f.brightness,color_temp:f.colorTemp});try{f.moonlight?await gt(i.lamp.id,{moonlight:!0,moonlight_brightness:f.brightness}):((B=e(n))!=null&&B.moonlight_mode?await gt(i.lamp.id,{moonlight:!1}):(ve=e(n))!=null&&ve.power||await gt(i.lamp.id,{power:!0}),await gt(i.lamp.id,{brightness:f.brightness,color_temp:f.colorTemp})),K()}catch(s){console.error(s),o(O,null),K()}}function X(f){var s,p,y,Y;if(!e(z))return!1;if(f.moonlight)return((s=e(n))==null?void 0:s.moonlight_mode)??!1;if((p=e(n))!=null&&p.moonlight_mode)return!1;const B=Math.abs((((y=e(n))==null?void 0:y.brightness)??0)-f.brightness)<=5,ve=Math.abs((((Y=e(n))==null?void 0:Y.color_temp)??0)-f.colorTemp)<=200;return B&&ve}var ee=Xa(),M=ie(ee);M.__click=()=>o(F,!0),M.__keydown=f=>f.key==="Enter"&&o(F,!0);var U=a(M),T=a(U);T.__click=D;let C;var v=r(a(T),2);{var b=f=>{var B=Ia();l(f,B)};x(v,f=>{e(k)&&f(b)})}t(T);var ne=r(T,2),oe=a(ne),xe=a(oe,!0);t(oe);var Ae=r(oe,2);{var ke=f=>{var B=Wa();l(f,B)},Je=f=>{var B=ot(),ve=ie(B);{var s=y=>{var Y=ot(),ue=ie(Y);{var ze=q=>{var A=$a();l(q,A)},Me=q=>{var A=Fa(),c=a(A);t(A),g(()=>u(c,`${e(de)??""}% ¬∑ ${e(E)??""}K`)),l(q,A)};x(ue,q=>{var A;(A=e(n))!=null&&A.moonlight_mode?q(ze):q(Me,!1)})}l(y,Y)},p=y=>{var Y=Ha();l(y,Y)};x(ve,y=>{e(z)?y(s):y(p,!1)},!0)}l(f,B)};x(Ae,f=>{e(S)?f(Je,!1):f(ke)})}t(ne),t(U),t(M);var Ce=r(M,2);St(Ce,{get open(){return e(F)},onclose:()=>o(F,!1),get title(){return e(h)},children:(f,B)=>{var ve=Za(),s=a(ve),p=r(a(s),2),y=a(p);{var Y=q=>{var A=At("Offline");l(q,A)},ue=q=>{var A=ot(),c=ie(A);{var m=J=>{var te=At();g(()=>{var fe;return u(te,(fe=e(n))!=null&&fe.moonlight_mode?"Moonlight":"On")}),l(J,te)},I=J=>{var te=At("Off");l(J,te)};x(c,J=>{e(z)?J(m):J(I,!1)},!0)}l(q,A)};x(y,q=>{e(S)?q(ue,!1):q(Y)})}t(p),t(s);var ze=r(s,2);{var Me=q=>{var A=Qa(),c=ie(A);c.__click=D;var m=a(c),I=r(m);{var J=re=>{var L=Ga();l(re,L)};x(I,re=>{e(k)&&re(J)})}t(c);var te=r(c,2);{var fe=re=>{var L=Ua(),W=ie(L),Q=r(a(W),2);$e(Q,21,()=>Oe,st,(Pe,be)=>{var he=Ya();he.__click=()=>De(e(be));var Le=a(he),Fe=r(Le);{var et=Te=>{var Ue=Ka();l(Te,Ue)};x(Fe,Te=>{e(O)===e(be).id&&Te(et)})}t(he),g(Te=>{_(he,1,`py-2.5 text-sm rounded-lg transition-all relative
                       ${Te??""}`),u(Le,`${e(be).label??""} `)},[()=>X(e(be))||e(O)===e(be).id?e(be).moonlight?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"]),l(Pe,he)}),t(Q),t(W);var ge=r(W,2);{var Ee=Pe=>{var be=qa(),he=ie(be),Le=a(he),Fe=r(a(Le),2),et=a(Fe);t(Fe),t(Le);var Te=r(Le,2);wt(Te),Te.__input=Be=>pe(parseInt(Be.currentTarget.value)),t(he);var Ue=r(he,2),Re=a(Ue),Ie=r(a(Re),2),He=a(Ie);t(Ie),t(Re);var Ge=r(Re,2);wt(Ge),Ge.__input=Be=>Se(parseInt(Be.currentTarget.value)),ba(2),t(Ue),g(()=>{u(et,`${e(de)??""}%`),Tt(Te,e(de)),u(He,`${e(E)??""}K`),Tt(Ge,e(E))}),l(Pe,be)},Xe=Pe=>{var be=Ja();l(Pe,be)};x(ge,Pe=>{e(n).moonlight_mode?Pe(Xe,!1):Pe(Ee)})}l(re,L)};x(te,re=>{e(z)&&re(fe)})}var je=r(te,2),ae=a(je),we=r(a(ae),2),le=a(we,!0);t(we),t(ae),t(je),g(()=>{_(c,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(z)?e(n).moonlight_mode?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),u(m,`${e(z)?"Turn Off":"Turn On"} `),u(le,i.lamp.ip)}),l(q,A)};x(ze,q=>{e(S)&&e(n)&&q(Me)})}t(ve),g(()=>{var q;return _(p,1,`font-medium ${e(z)?(q=e(n))!=null&&q.moonlight_mode?"text-device-audio-text":"text-device-lights-text":"text-content-tertiary"}`)}),l(f,ve)},$$slots:{default:!0}}),g(()=>{var f;_(M,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),T.disabled=!e(S),C=_(T,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(z)?(f=e(n))!=null&&f.moonlight_mode?"bg-device-audio-bg text-device-audio-text":"badge-lights":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,C,{"status-active":e(z)}),u(xe,e(h))}),l(se,ee),ut()}bt(["click","keydown","input"]);var tr=d("<p> </p>"),ar=d('<p class="text-xs text-content-secondary">Offline</p>'),rr=d('<div class="flex items-center gap-1 text-xs shrink-0"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 11.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zm4-3a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-4z"></path><path d="M8 4.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v8a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-8z"></path></svg> <span> </span></div>'),sr=d('<span class="absolute top-1 right-1 w-2 h-2 bg-success rounded-full animate-pulse"></span>'),nr=d('<span class="absolute top-1 right-1 w-2 h-2 bg-warning rounded-full animate-pulse"></span>'),or=d('<span class="absolute top-1 right-1 w-2 h-2 bg-info rounded-full animate-pulse"></span>'),ir=d('<span class="absolute top-2 right-2 w-2 h-2 bg-content-secondary rounded-full animate-pulse"></span>'),lr=d('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-device-audio-text rounded-full animate-pulse"></span>'),cr=d('<button><div class="text-base mb-0.5"> </div> <!></button>'),dr=d('<span class="absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-device-sensors-text rounded-full animate-pulse"></span>'),vr=d('<button><div class="text-base mb-0.5"> </div> <!></button>'),ur=d(`<div><p class="text-sm text-content-secondary mb-2">Actions</p> <div class="grid grid-cols-3 gap-2"><button class="py-4 rounded-xl bg-success/20 text-success text-sm font-medium relative
                     hover:bg-success/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> Start <!></button> <button class="py-4 rounded-xl bg-warning/20 text-warning text-sm font-medium relative
                     hover:bg-warning/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Pause <!></button> <button class="py-4 rounded-xl bg-info/20 text-info text-sm font-medium relative
                     hover:bg-info/30 transition-colors flex flex-col items-center gap-1"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg> Home <!></button></div></div> <div><button class="w-full py-3 rounded-xl bg-surface-recessed text-content-secondary text-sm font-medium relative
                   hover:bg-stroke-default transition-colors">Find Robot <!></button></div> <div><p class="text-sm text-content-secondary mb-2">Suction Power</p> <div class="grid grid-cols-4 gap-1"></div></div> <div><p class="text-sm text-content-secondary mb-2">Mop Intensity</p> <div class="grid grid-cols-4 gap-1"></div></div>`,1),fr=d("<button> </button>"),pr=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-sensors-text rounded-full animate-pulse"></span>'),mr=d(`<button class="w-full mt-3 py-3 rounded-xl badge-sensors text-sm font-medium relative
                       hover:opacity-90 transition-colors"> <!></button>`),xr=d('<div class="grid grid-cols-2 gap-2"></div> <!>',1),_r=d('<p class="text-content-tertiary text-sm">Loading rooms...</p>'),gr=d('<div><p class="text-sm text-content-secondary mb-2">Select rooms to clean</p> <!></div>'),br=d('<div><p class="text-sm text-content-secondary mb-3">Consumables</p> <div class="space-y-3"><div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Main Brush</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Side Brush</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Filter</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div> <div><div class="flex justify-between text-xs mb-1"><span class="text-content-secondary">Sensors</span> <div class="flex items-center gap-2"><span class="text-content-tertiary"> </span> <button>Reset</button></div></div> <div class="h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div></div></div>'),hr=d('<p class="text-content-tertiary text-sm">Loading consumables...</p>'),yr=d('<div><div class="flex justify-between items-center mb-2"><span class="text-sm text-content-secondary">Volume</span> <span class="text-sm font-medium text-content-primary"> </span></div> <input type="range" min="0" max="100" step="10" class="w-full"/></div> <!>',1),wr=d('<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Battery</span> <p> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Fan Speed</span> <p class="text-2xl font-bold mt-1 text-content-primary"> </p></div></div> <div class="flex gap-1 bg-surface-recessed rounded-lg p-1"><button>Controls</button> <button>Rooms</button> <button>Settings</button></div> <!>',1),kr=d('<div class="text-center py-8 text-content-secondary">Start bridge to control robot</div>'),Sr=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),Mr=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z" clip-rule="evenodd"></path></svg></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate">Roborock</h4> <!></div> <!></div></div> <!>',1);function Tr(se,i){vt(i,!0);let j=dt(i,"compact",3,!1),h=R(!1),n=R(null),S=R(null),F=R(null),Z=R(!1),k=R(null),O=R(null),w=R(null),N=H(()=>{var c;return e(O)??((c=i.status)==null?void 0:c.fanPower)??102}),z=H(()=>{var c;return e(w)??((c=i.status)==null?void 0:c.waterBoxMode)??200}),de=R(Qt([])),E=R(Qt(new Set)),D=R(30),K=R(null),ye=H(()=>e(K)??e(D)),P=R(null),pe=R("controls");const Se={1:"Starting",2:"Charger disconnected",3:"Idle",4:"Remote control",5:"Cleaning",6:"Returning",7:"Manual mode",8:"Charging",9:"Charging problem",10:"Paused",11:"Spot cleaning",12:"Error",13:"Shutting down",14:"Updating",15:"Docking",16:"Going to target",17:"Zoned cleaning",18:"Segment cleaning",22:"Emptying dustbin",23:"Washing mop",26:"Going to wash mop"},Oe=[{mode:101,name:"Quiet",icon:"üîá"},{mode:102,name:"Balanced",icon:"‚öñÔ∏è"},{mode:103,name:"Turbo",icon:"üí®"},{mode:104,name:"Max",icon:"üî•"}],De=[{mode:200,name:"Off",icon:"‚ùå"},{mode:201,name:"Low",icon:"üíß"},{mode:202,name:"Med",icon:"üíßüíß"},{mode:203,name:"High",icon:"üíßüíßüíß"}];function X(c){return Se[c]||"Unknown"}function ee(c){const m=Oe.find(I=>I.mode===c);return m?m.name:`${c}%`}async function M(){try{const[c,m,I]=await Promise.all([ka(),Sa(),Zt()]);o(de,c.rooms,!0),o(D,m.volume,!0),o(P,I,!0)}catch(c){console.error("Failed to load extended data:",c)}}async function U(c){o(n,c,!0);try{await Ma(c),ce.refreshRoborock()}catch(m){console.error(m)}o(n,null)}async function T(c){o(O,c,!0),o(S,c,!0);try{await Ta(c),ce.refreshRoborock()}catch(m){console.error(m),o(O,null)}o(S,null)}async function C(c){o(w,c,!0),o(F,c,!0);try{await Ca(c),ce.refreshRoborock()}catch(m){console.error(m),o(w,null)}o(F,null)}const[v]=kt(async c=>{try{await Pa(c),o(D,c,!0)}catch(m){console.error(m)}o(K,null)},300);function b(c){o(K,c,!0),v(c)}function ne(c){const m=new Set(e(E));m.has(c)?m.delete(c):m.add(c),o(E,m,!0)}async function oe(){if(e(E).size!==0){o(Z,!0);try{await za([...e(E)]),o(E,new Set,!0),ce.refreshRoborock()}catch(c){console.error(c)}o(Z,!1)}}function xe(c,m){const I=c/3600;return Math.max(0,Math.min(100,I/m*100))}function Ae(c){return c<50?"bg-success":c<80?"bg-warning":"bg-error"}async function ke(c){o(k,c,!0);try{await ja(c);const m=await Zt();o(P,m,!0)}catch(m){console.error(m)}o(k,null)}function Je(c){switch(c){case 5:case 11:case 17:case 18:return{color:"text-success",bg:"bg-success/20"};case 8:return{color:"text-info",bg:"bg-info/20"};case 3:return{color:"text-content-tertiary",bg:"bg-surface-recessed"};case 10:return{color:"text-warning",bg:"bg-warning/20"};case 6:case 15:case 16:case 26:return{color:"text-device-sensors-text",bg:"bg-device-sensors-bg"};case 12:case 9:return{color:"text-error",bg:"bg-error/20"};default:return{color:"text-content-tertiary",bg:"bg-surface-recessed"}}}let Ce=H(()=>i.status?Je(i.status.state):{color:"text-content-tertiary",bg:"bg-surface-recessed"});Lt(()=>{e(h)&&M()});var f=Mr(),B=ie(f);B.__click=()=>o(h,!0),B.__keydown=c=>c.key==="Enter"&&o(h,!0);var ve=a(B),s=a(ve);let p;var y=r(s,2),Y=r(a(y),2);{var ue=c=>{var m=tr(),I=a(m,!0);t(m),g(J=>{_(m,1,`text-xs ${e(Ce).color??""}`),u(I,J)},[()=>X(i.status.state)]),l(c,m)},ze=c=>{var m=ar();l(c,m)};x(Y,c=>{i.status?c(ue):c(ze,!1)})}t(y);var Me=r(y,2);{var q=c=>{var m=rr(),I=a(m),J=r(I,2),te=a(J);t(J),t(m),g(()=>{_(I,0,`w-3.5 h-3.5 ${i.status.battery>20?"text-success":"text-error"}`),_(J,1,i.status.battery>20?"text-content-secondary":"text-error"),u(te,`${i.status.battery??""}%`)}),l(c,m)};x(Me,c=>{j()&&i.status&&c(q)})}t(ve),t(B);var A=r(B,2);St(A,{get open(){return e(h)},onclose:()=>o(h,!1),title:"Roborock",children:(c,m)=>{var I=Sr(),J=a(I),te=r(a(J),2),fe=a(te,!0);t(te),t(J);var je=r(J,2);{var ae=le=>{var re=wr(),L=ie(re),W=a(L),Q=r(a(W),2),ge=a(Q);t(Q),t(W);var Ee=r(W,2),Xe=r(a(Ee),2),Pe=a(Xe,!0);t(Xe),t(Ee),t(L);var be=r(L,2),he=a(be);he.__click=()=>o(pe,"controls");var Le=r(he,2);Le.__click=()=>o(pe,"rooms");var Fe=r(Le,2);Fe.__click=()=>o(pe,"settings"),t(be);var et=r(be,2);{var Te=Re=>{var Ie=ur(),He=ie(Ie),Ge=r(a(He),2),Be=a(Ge);Be.__click=()=>U("start");var G=r(a(Be),2);{var V=me=>{var _e=sr();l(me,_e)};x(G,me=>{e(n)==="start"&&me(V)})}t(Be);var $=r(Be,2);$.__click=()=>U("pause");var Qe=r(a($),2);{var ft=me=>{var _e=nr();l(me,_e)};x(Qe,me=>{e(n)==="pause"&&me(ft)})}t($);var Ke=r($,2);Ke.__click=()=>U("home");var tt=r(a(Ke),2);{var nt=me=>{var _e=or();l(me,_e)};x(tt,me=>{e(n)==="home"&&me(nt)})}t(Ke),t(Ge),t(He);var it=r(He,2),pt=a(it);pt.__click=()=>U("find");var Ze=r(a(pt));{var Ye=me=>{var _e=ir();l(me,_e)};x(Ze,me=>{e(n)==="find"&&me(Ye)})}t(pt),t(it);var We=r(it,2),lt=r(a(We),2);$e(lt,21,()=>Oe,st,(me,_e)=>{var Ne=cr();Ne.__click=()=>T(e(_e).mode);var at=a(Ne),mt=a(at,!0);t(at);var xt=r(at),ht=r(xt);{var yt=rt=>{var _t=lr();l(rt,_t)};x(ht,rt=>{e(S)===e(_e).mode&&rt(yt)})}t(Ne),g(()=>{_(Ne,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${e(N)===e(_e).mode?"badge-audio ring-1 ring-device-audio-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(mt,e(_e).icon),u(xt,` ${e(_e).name??""} `)}),l(me,Ne)}),t(lt),t(We);var Ve=r(We,2),qe=r(a(Ve),2);$e(qe,21,()=>De,st,(me,_e)=>{var Ne=vr();Ne.__click=()=>C(e(_e).mode);var at=a(Ne),mt=a(at,!0);t(at);var xt=r(at),ht=r(xt);{var yt=rt=>{var _t=dr();l(rt,_t)};x(ht,rt=>{e(F)===e(_e).mode&&rt(yt)})}t(Ne),g(()=>{_(Ne,1,`py-2 px-1 rounded-lg text-xs font-medium transition-colors relative
                       ${e(z)===e(_e).mode?"badge-sensors ring-1 ring-device-sensors-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(mt,e(_e).icon),u(xt,` ${e(_e).name??""} `)}),l(me,Ne)}),t(qe),t(Ve),l(Re,Ie)},Ue=Re=>{var Ie=ot(),He=ie(Ie);{var Ge=G=>{var V=gr(),$=r(a(V),2);{var Qe=Ke=>{var tt=xr(),nt=ie(tt);$e(nt,21,()=>e(de),st,(Ze,Ye)=>{var We=fr();We.__click=()=>ne(e(Ye).segmentId);var lt=a(We,!0);t(We),g(Ve=>{_(We,1,`py-3 px-3 rounded-xl text-sm font-medium transition-colors text-left
                         ${Ve??""}`),u(lt,e(Ye).name)},[()=>e(E).has(e(Ye).segmentId)?"badge-sensors ring-1 ring-device-sensors-text/50":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"]),l(Ze,We)}),t(nt);var it=r(nt,2);{var pt=Ze=>{var Ye=mr();Ye.__click=oe;var We=a(Ye),lt=r(We);{var Ve=qe=>{var me=pr();l(qe,me)};x(lt,qe=>{e(Z)&&qe(Ve)})}t(Ye),g(()=>u(We,`Clean ${e(E).size??""} room${e(E).size>1?"s":""} `)),l(Ze,Ye)};x(it,Ze=>{e(E).size>0&&Ze(pt)})}l(Ke,tt)},ft=Ke=>{var tt=_r();l(Ke,tt)};x($,Ke=>{e(de).length>0?Ke(Qe):Ke(ft,!1)})}t(V),l(G,V)},Be=G=>{var V=ot(),$=ie(V);{var Qe=ft=>{var Ke=yr(),tt=ie(Ke),nt=a(tt),it=r(a(nt),2),pt=a(it);t(it),t(nt);var Ze=r(nt,2);wt(Ze),Ze.__input=Ve=>b(parseInt(Ve.currentTarget.value)),t(tt);var Ye=r(tt,2);{var We=Ve=>{var qe=br(),me=r(a(qe),2),_e=a(me),Ne=a(_e),at=r(a(Ne),2),mt=a(at),xt=a(mt);t(mt);var ht=r(mt,2);ht.__click=()=>ke("main_brush_work_time"),t(at),t(Ne);var yt=r(Ne,2),rt=a(yt);t(yt),t(_e);var _t=r(_e,2),zt=a(_t),Vt=r(a(zt),2),jt=a(Vt),ra=a(jt);t(jt);var Nt=r(jt,2);Nt.__click=()=>ke("side_brush_work_time"),t(Vt),t(zt);var Et=r(zt,2),It=a(Et);t(Et),t(_t);var Pt=r(_t,2),Rt=a(Pt),Wt=r(a(Rt),2),Bt=a(Wt),sa=a(Bt);t(Bt);var $t=r(Bt,2);$t.__click=()=>ke("filter_work_time"),t(Wt),t(Rt);var Ft=r(Rt,2),Ht=a(Ft);t(Ft),t(Pt);var Gt=r(Pt,2),Ot=a(Gt),Kt=r(a(Ot),2),Dt=a(Kt),na=a(Dt);t(Dt);var Yt=r(Dt,2);Yt.__click=()=>ke("sensor_dirty_time"),t(Kt),t(Ot);var qt=r(Ot,2),Jt=a(qt);t(qt),t(Gt),t(me),t(qe),g((oa,ia,la,ca,da,va,ua,fa,pa,ma,xa,_a)=>{u(xt,`${oa??""}h`),_(ht,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary relative ${e(k)==="main_brush_work_time"?"opacity-50":""}`),_(rt,1,`h-full ${ia??""} transition-all`),Mt(rt,`width: ${la??""}%`),u(ra,`${ca??""}h`),_(Nt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="side_brush_work_time"?"opacity-50":""}`),_(It,1,`h-full ${da??""} transition-all`),Mt(It,`width: ${va??""}%`),u(sa,`${ua??""}h`),_($t,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="filter_work_time"?"opacity-50":""}`),_(Ht,1,`h-full ${fa??""} transition-all`),Mt(Ht,`width: ${pa??""}%`),u(na,`${ma??""}h`),_(Yt,1,`text-[10px] px-1.5 py-0.5 rounded bg-surface-recessed hover:bg-stroke-default text-content-secondary ${e(k)==="sensor_dirty_time"?"opacity-50":""}`),_(Jt,1,`h-full ${xa??""} transition-all`),Mt(Jt,`width: ${_a??""}%`)},[()=>Math.round(e(P).mainBrushWorkTime/3600),()=>Ae(xe(e(P).mainBrushWorkTime,300)),()=>xe(e(P).mainBrushWorkTime,300),()=>Math.round(e(P).sideBrushWorkTime/3600),()=>Ae(xe(e(P).sideBrushWorkTime,200)),()=>xe(e(P).sideBrushWorkTime,200),()=>Math.round(e(P).filterWorkTime/3600),()=>Ae(xe(e(P).filterWorkTime,150)),()=>xe(e(P).filterWorkTime,150),()=>Math.round(e(P).sensorDirtyTime/3600),()=>Ae(xe(e(P).sensorDirtyTime,30)),()=>xe(e(P).sensorDirtyTime,30)]),l(Ve,qe)},lt=Ve=>{var qe=hr();l(Ve,qe)};x(Ye,Ve=>{e(P)?Ve(We):Ve(lt,!1)})}g(()=>{u(pt,`${e(ye)??""}%`),Tt(Ze,e(ye))}),l(ft,Ke)};x($,ft=>{e(pe)==="settings"&&ft(Qe)},!0)}l(G,V)};x(He,G=>{e(pe)==="rooms"?G(Ge):G(Be,!1)},!0)}l(Re,Ie)};x(et,Re=>{e(pe)==="controls"?Re(Te):Re(Ue,!1)})}g(Re=>{_(Q,1,`text-3xl font-bold mt-1 ${i.status.battery>20?"text-content-primary":"text-error"}`),u(ge,`${i.status.battery??""}%`),u(Pe,Re),_(he,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(pe)==="controls"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`),_(Le,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(pe)==="rooms"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`),_(Fe,1,`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors
                 ${e(pe)==="settings"?"bg-surface-elevated text-content-primary":"text-content-secondary hover:text-content-primary"}`)},[()=>ee(i.status.fanPower)]),l(le,re)},we=le=>{var re=kr();l(le,re)};x(je,le=>{i.status?le(ae):le(we,!1)})}t(I),g(le=>{_(te,1,`font-medium ${e(Ce).color??""}`),u(fe,le)},[()=>i.status?X(i.status.state):"Offline"]),l(c,I)},$$slots:{default:!0}}),g(()=>{var c,m,I,J;_(B,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),p=_(s,1,`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${e(Ce).bg??""} ${e(Ce).color??""}`,null,p,{"status-active":((c=i.status)==null?void 0:c.state)===5||((m=i.status)==null?void 0:m.state)===11||((I=i.status)==null?void 0:I.state)===17||((J=i.status)==null?void 0:J.state)===18})}),l(se,f),ut()}bt(["click","keydown","input"]);var Cr=d('<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Temperature</span> <p class="text-2xl font-bold mt-1 text-device-sensors-text"> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary">Humidity</span> <p class="text-2xl font-bold mt-1 text-info"> </p></div></div>'),zr=d('<div class="bg-surface-recessed rounded-xl p-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Battery</span> <span> </span></div> <div class="mt-2 h-2 bg-stroke-default rounded-full overflow-hidden"><div></div></div></div>'),jr=d('<div class="space-y-4"><div><span class="text-4xl"> </span> <p> </p> <p class="text-sm text-content-secondary mt-1"> </p></div> <!> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Type</span> <span class="font-medium text-content-primary"> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Online</span> <span> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Device ID</span> <span class="font-mono text-xs text-content-tertiary"> </span></div></div></div>'),Pr=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div> </div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <p> </p></div> <div></div></div></div> <!>',1);function Rr(se,i){vt(i,!0);let j=dt(i,"compact",3,!1),h=H(()=>Ct(i.device.name)),n=R(!1),S=H(()=>()=>{if(!i.device.last_status)return null;try{return JSON.parse(i.device.last_status)}catch{return null}});const F={sj:{label:"Water",icon:"üíß"},mcs:{label:"Door",icon:"üö™"},wsdcg:{label:"Climate",icon:"üå°Ô∏è"},wfcon:{label:"Gateway",icon:"üì°"},cz:{label:"Remote",icon:"üì∫"}},Z=15;function k(M,U){if(!M)return U==="sj"||U==="mcs"?{text:"Monitoring",alert:!1,color:"text-content-tertiary",lowBattery:!1}:{text:"No data",alert:!1,color:"text-content-tertiary",lowBattery:!1};switch(U){case"sj":{const T=M[1],C=T==="alarm"||T==="1"||T===1,v=M[4],b=v!==void 0&&v<=Z;return C?{text:"Water detected!",alert:!0,color:"text-error",lowBattery:b,batteryPercent:v}:{text:b?`Dry ¬∑ ${v}%`:"Dry",alert:!1,color:"text-success",lowBattery:b,batteryPercent:v}}case"mcs":{const T=M[101]===!0||M[1]===!0,C=M[103]||M[4],v=C!==void 0&&C<=Z;return{text:v?`${T?"Open":"Closed"} ¬∑ ${C}%`:T?"Open":"Closed",alert:T,color:T?"text-warning":"text-success",lowBattery:v,batteryPercent:C}}case"wsdcg":{const T=M[103],C=M[102];return T!==void 0&&C!==void 0?{text:`${(T/100).toFixed(1)}¬∞C ¬∑ ${C}%`,alert:!1,color:"text-device-sensors-text",lowBattery:!1}:{text:"N/A",alert:!1,color:"text-content-tertiary",lowBattery:!1}}default:return{text:i.device.online?"Online":"Offline",alert:!1,color:i.device.online?"text-success":"text-content-tertiary",lowBattery:!1}}}let O=H(()=>F[i.device.category]||{label:i.device.category,icon:"üì±"}),w=H(()=>k(e(S)(),i.device.category));var N=Pr(),z=ie(N);z.__click=()=>o(n,!0),z.__keydown=M=>M.key==="Enter"&&o(n,!0);var de=a(z),E=a(de);let D;var K=a(E,!0);t(E);var ye=r(E,2),P=a(ye),pe=a(P,!0);t(P);var Se=r(P,2),Oe=a(Se,!0);t(Se),t(ye);var De=r(ye,2);let X;t(de),t(z);var ee=r(z,2);St(ee,{get open(){return e(n)},onclose:()=>o(n,!1),get title(){return e(h)},children:(M,U)=>{var T=jr(),C=a(T),v=a(C),b=a(v,!0);t(v);var ne=r(v,2),oe=a(ne,!0);t(ne);var xe=r(ne,2),Ae=a(xe);t(xe),t(C);var ke=r(C,2);{var Je=A=>{const c=H(()=>e(S)());var m=ot(),I=ie(m);{var J=te=>{var fe=Cr(),je=a(fe),ae=r(a(je),2),we=a(ae);t(ae),t(je);var le=r(je,2),re=r(a(le),2),L=a(re);t(re),t(le),t(fe),g(W=>{u(we,`${W??""}¬∞C`),u(L,`${e(c)[102]??""}%`)},[()=>(e(c)[103]/100).toFixed(1)]),l(te,fe)};x(I,te=>{e(c)&&te(J)})}l(A,m)};x(ke,A=>{i.device.category==="wsdcg"&&A(Je)})}var Ce=r(ke,2);{var f=A=>{const c=H(()=>e(S)());var m=ot(),I=ie(m);{var J=te=>{const fe=H(()=>e(c)[4]||e(c)[103]);var je=ot(),ae=ie(je);{var we=le=>{var re=zr(),L=a(re),W=r(a(L),2),Q=a(W);t(W),t(L);var ge=r(L,2),Ee=a(ge);t(ge),t(re),g(()=>{_(W,1,`font-bold ${e(fe)>20?"text-success":"text-error"}`),u(Q,`${e(fe)??""}%`),_(Ee,1,`h-full rounded-full transition-all ${e(fe)>20?"bg-success":"bg-error"}`),Mt(Ee,`width: ${e(fe)??""}%`)}),l(le,re)};x(ae,le=>{e(fe)!==void 0&&le(we)})}l(te,je)};x(I,te=>{e(c)&&te(J)})}l(A,m)};x(Ce,A=>{(i.device.category==="sj"||i.device.category==="mcs")&&A(f)})}var B=r(Ce,2),ve=a(B),s=r(a(ve),2),p=a(s,!0);t(s),t(ve);var y=r(ve,2),Y=r(a(y),2),ue=a(Y,!0);t(Y),t(y);var ze=r(y,2),Me=r(a(ze),2),q=a(Me);t(Me),t(ze),t(B),t(T),g(A=>{_(C,1,`rounded-xl p-6 text-center ${e(w).alert?"bg-error/20":"bg-surface-recessed"}`),u(b,e(O).icon),_(ne,1,`text-2xl font-bold mt-2 ${e(w).color??""}`),u(oe,e(w).text),u(Ae,`${e(O).label??""} Sensor`),u(p,e(O).label),_(Y,1,i.device.online?"text-success":"text-error"),u(ue,i.device.online?"Yes":"No"),u(q,`${A??""}...`)},[()=>i.device.id.slice(0,12)]),l(M,T)},$$slots:{default:!0}}),g(()=>{_(z,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer
         ${e(w).lowBattery?"border-warning/50 bg-warning/10":""}`),D=_(E,1,`w-10 h-10 rounded-xl flex items-center justify-center text-base shrink-0
             ${e(w).alert?"bg-error/20":e(w).lowBattery?"bg-warning/20":"badge-sensors"}`,null,D,{"status-active":e(w).alert}),u(K,e(O).icon),u(pe,e(h)),_(Se,1,`text-xs ${(e(w).lowBattery?"text-warning":e(w).color)??""}`),u(Oe,e(w).text),X=_(De,1,`w-2 h-2 rounded-full shrink-0
             ${i.device.online?"bg-success":"bg-content-tertiary"}`,null,X,{"status-dot":i.device.online})}),l(se,N),ut()}bt(["click","keydown"]);var Br=aa('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd"></path></svg>'),Or=aa('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M5.05 3.636a1 1 0 010 1.414 7 7 0 000 9.9 1 1 0 11-1.414 1.414 9 9 0 010-12.728 1 1 0 011.414 0zm9.9 0a1 1 0 011.414 0 9 9 0 010 12.728 1 1 0 11-1.414-1.414 7 7 0 000-9.9 1 1 0 010-1.414zM7.879 6.464a1 1 0 010 1.414 3 3 0 000 4.243 1 1 0 11-1.415 1.414 5 5 0 010-7.07 1 1 0 011.415 0zm4.242 0a1 1 0 011.415 0 5 5 0 010 7.072 1 1 0 01-1.415-1.415 3 3 0 000-4.242 1 1 0 010-1.415zM10 9a1 1 0 011 1v.01a1 1 0 11-2 0V10a1 1 0 011-1z"></path></svg>'),Dr=d('<p class="text-xs text-content-secondary"> </p>'),Ar=d('<p class="text-xs text-content-secondary">No data</p>'),Lr=d('<input type="number" min="5" max="30" step="0.5" class="text-3xl font-bold w-24 text-center bg-transparent border-b-2 border-device-climate-heat-text outline-none text-content-primary [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/>'),Vr=d('<button class="text-3xl font-bold w-24 text-center text-content-primary hover:text-device-climate-heat-text transition-colors cursor-text" title="Click to edit"> </button>'),Nr=d('<span class="absolute -top-1 -right-1 w-2 h-2 bg-device-climate-heat-text rounded-full animate-pulse"></span>'),Er=d('<span class="absolute -top-1 -right-1 w-2 h-2 bg-error rounded-full"></span>'),Ir=d("<button> </button>"),Wr=d(`<div class="grid grid-cols-2 gap-3"><div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary uppercase tracking-wide">Current</span> <p class="text-3xl font-bold mt-1 text-content-primary"> </p></div> <div class="bg-surface-recessed rounded-xl p-4 text-center"><span class="text-xs text-content-secondary uppercase tracking-wide">Target</span> <p class="text-3xl font-bold mt-1 text-device-climate-heat-text"> </p></div></div> <div><p class="text-sm text-content-secondary mb-3">Set Temperature</p> <div class="flex items-center justify-center gap-4"><button class="w-14 h-14 rounded-full badge-climate-cool text-2xl font-medium
                   hover:opacity-80 disabled:opacity-50 transition-all">‚àí</button> <div class="relative"><!> <!> <!></div> <button class="w-14 h-14 rounded-full badge-climate-heat text-2xl font-medium
                   hover:opacity-80 disabled:opacity-50 transition-all">+</button></div></div> <div><p class="text-sm text-content-secondary mb-2">Quick Set</p> <div class="grid grid-cols-4 gap-2"></div></div>`,1),$r=d('<div class="text-center py-8 text-content-secondary">No data available</div>'),Fr=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Valve</span> <span> </span></div> <!> <div class="pt-4 border-t border-stroke-default space-y-2 text-sm"><div class="flex justify-between"><span class="text-content-secondary">Device ID</span> <span class="font-mono text-xs text-content-tertiary"> </span></div> <div class="flex justify-between"><span class="text-content-secondary">Online</span> <span> </span></div></div></div>'),Hr=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><div><!></div> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function Gr(se,i){vt(i,!0);let j=dt(i,"device",7),h=dt(i,"compact",3,!1),n=H(()=>Ct(j().name)),S=R(!1),F=R(null),Z=R(!1),k=R(!1),O=R(!1),w=R(""),N=R(null),z=H(()=>()=>{if(!j().last_status)return null;try{return JSON.parse(j().last_status)}catch{return null}}),de=H(()=>{var s;return(s=e(z)())!=null&&s["5"]?e(z)()[5]/10:null}),E=H(()=>{var s;return(s=e(z)())!=null&&s["4"]?e(z)()[4]/10:null}),D=H(()=>e(F)??e(E)),K=H(()=>{var s;return((s=e(z)())==null?void 0:s["3"])||"unknown"});const[ye,P]=kt(s=>{pe(s)},500);async function pe(s){o(Z,!0),o(k,!1);const p=e(E);try{await fetch(`/api/devices/${j().id}/control`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dps:4,value:Math.round(s*10)})}),Se()}catch(y){console.error(y),o(k,!0),o(F,p,!0),setTimeout(()=>o(k,!1),3e3)}}async function Se(){try{const s=await fetch(`/api/devices/${j().id}/status`);if(s.ok){const p=await s.json();j().last_status=JSON.stringify(p.status),o(F,null)}}catch(s){console.error(s)}o(Z,!1)}function Oe(s){if(e(D)===null)return;const p=Math.max(5,Math.min(30,e(D)+s));o(F,p,!0),ye(p)}function De(s){o(F,s,!0),P(),pe(s)}function X(){e(D)!==null&&(o(w,e(D).toString(),!0),o(O,!0),La().then(()=>{var s;return(s=e(N))==null?void 0:s.select()}))}function ee(){const s=parseFloat(e(w));if(!isNaN(s)&&s>=5&&s<=30){const p=Math.round(s*2)/2;De(p)}o(O,!1)}function M(){o(O,!1)}var U=Hr(),T=ie(U);T.__click=()=>o(S,!0),T.__keydown=s=>s.key==="Enter"&&o(S,!0);var C=a(T),v=a(C);let b;var ne=a(v);{var oe=s=>{var p=Br();l(s,p)},xe=s=>{var p=Or();l(s,p)};x(ne,s=>{e(K)==="opened"?s(oe):s(xe,!1)})}t(v);var Ae=r(v,2),ke=a(Ae),Je=a(ke,!0);t(ke);var Ce=r(ke,2);{var f=s=>{var p=Dr(),y=a(p);t(p),g(()=>u(y,`${e(de)??""}¬∞C ${e(K)==="opened"?"‚Üí":"¬∑"} ${e(D)??""}¬∞C`)),l(s,p)},B=s=>{var p=Ar();l(s,p)};x(Ce,s=>{e(de)!==null?s(f):s(B,!1)})}t(Ae),t(C),t(T);var ve=r(T,2);St(ve,{get open(){return e(S)},onclose:()=>o(S,!1),get title(){return e(n)},children:(s,p)=>{var y=Fr(),Y=a(y),ue=r(a(Y),2),ze=a(ue,!0);t(ue),t(Y);var Me=r(Y,2);{var q=ae=>{var we=Wr(),le=ie(we),re=a(le),L=r(a(re),2),W=a(L);t(L),t(re);var Q=r(re,2),ge=r(a(Q),2),Ee=a(ge);t(ge),t(Q),t(le);var Xe=r(le,2),Pe=r(a(Xe),2),be=a(Pe);be.__click=()=>Oe(-.5);var he=r(be,2),Le=a(he);{var Fe=G=>{var V=Lr();wt(V),V.__keydown=$=>{$.key==="Enter"&&ee(),$.key==="Escape"&&M()},Ba(V,$=>o(N,$),()=>e(N)),ta("blur",V,ee),Aa(V,()=>e(w),$=>o(w,$)),l(G,V)},et=G=>{var V=Vr();V.__click=X;var $=a(V);t(V),g(()=>u($,`${e(D)??""}¬∞C`)),l(G,V)};x(Le,G=>{e(O)?G(Fe):G(et,!1)})}var Te=r(Le,2);{var Ue=G=>{var V=Nr();l(G,V)};x(Te,G=>{e(Z)&&G(Ue)})}var Re=r(Te,2);{var Ie=G=>{var V=Er();l(G,V)};x(Re,G=>{e(k)&&G(Ie)})}t(he);var He=r(he,2);He.__click=()=>Oe(.5),t(Pe),t(Xe);var Ge=r(Xe,2),Be=r(a(Ge),2);$e(Be,20,()=>[15,18,21,24],st,(G,V)=>{var $=Ir();$.__click=()=>De(V);var Qe=a($);t($),g(()=>{_($,1,`py-2 text-sm rounded-lg transition-colors
                     ${e(D)===V?"badge-climate-heat":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Qe,`${V??""}¬∞`)}),l(G,$)}),t(Be),t(Ge),g(()=>{u(W,`${e(de)??""}¬∞C`),u(Ee,`${e(D)??""}¬∞C`),be.disabled=e(D)!==null&&e(D)<=5,He.disabled=e(D)!==null&&e(D)>=30}),l(ae,we)},A=ae=>{var we=$r();l(ae,we)};x(Me,ae=>{e(de)!==null&&e(D)!==null?ae(q):ae(A,!1)})}var c=r(Me,2),m=a(c),I=r(a(m),2),J=a(I);t(I),t(m);var te=r(m,2),fe=r(a(te),2),je=a(fe,!0);t(fe),t(te),t(c),t(y),g(ae=>{_(ue,1,`font-medium ${e(K)==="opened"?"text-device-climate-heat-text":"text-device-climate-cool-text"}`),u(ze,e(K)==="opened"?"Heating":"Idle"),u(J,`${ae??""}...`),_(fe,1,j().online?"text-success":"text-error"),u(je,j().online?"Yes":"No")},[()=>j().id.slice(0,12)]),l(s,y)},$$slots:{default:!0}}),g(()=>{_(T,1,`card transition-card hover:scale-[1.02] ${h()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b=_(v,1,`w-10 h-10 rounded-xl flex items-center justify-center shrink-0
             ${e(K)==="opened"?"badge-climate-heat":"badge-climate-cool"}`,null,b,{"status-active":e(K)==="opened"}),u(Je,e(n))}),l(se,U),ut()}bt(["click","keydown"]);var Kr=d('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-audio-text rounded-full animate-pulse"></span>'),Yr=d('<p class="text-xs text-content-secondary"> </p>'),qr=d('<p class="text-xs text-content-secondary"> </p>'),Jr=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-audio-text rounded-full animate-pulse"></span>'),Ur=d("<button> </button>"),Qr=d("<button> </button>"),Zr=d('<div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Volume</span> <span class="font-medium text-content-primary"> </span></div> <div class="flex gap-2 items-center"><input type="range" min="0" max="100" class="flex-1"/> <button> </button></div></div> <div><p class="text-sm text-content-secondary mb-2">Input</p> <div class="grid grid-cols-2 gap-2"></div></div> <div><p class="text-sm text-content-secondary mb-2">Sound Program</p> <div class="grid grid-cols-3 gap-2"></div></div> <div><p class="text-sm text-content-secondary mb-2">Audio</p> <div class="grid grid-cols-2 gap-2"><button>Clear Voice</button> <button>Bass Ext.</button></div></div> <div><div class="flex justify-between text-sm text-content-secondary mb-2"><span>Subwoofer</span> <span class="font-medium text-content-primary"> </span></div> <input type="range" min="-6" max="6" step="1" class="w-full"/></div>',1),Xr=d("<button> <!></button> <!>",1),es=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),ts=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate"> </h4> <!></div></div></div> <!>',1);function as(se,i){vt(i,!0);let j=dt(i,"compact",3,!1),h=H(()=>Ct(i.device.name)),n=R(null),S=R(!1),F=R(!1),Z=R(null),k=R(!1),O=R(null),w=R(null),N=H(()=>{var s;return e(Z)??((s=e(n))==null?void 0:s.power)??"standby"}),z=H(()=>{var s;return e(O)??((s=e(n))==null?void 0:s.volume)??0}),de=H(()=>{var s;return e(w)??((s=e(n))==null?void 0:s.subwoofer_volume)??0});Lt(()=>{if(!e(S)&&i.device.last_status)try{o(n,JSON.parse(i.device.last_status),!0)}catch{}}),Lt(()=>{e(S)||(o(S,!0),Xt(i.device.id).then(s=>o(n,s.status,!0)).catch(()=>{}))});async function E(){const s=e(N)==="on"?"standby":"on";o(Z,s,!0),o(k,!0);try{await ct(i.device.id,{power:s==="on"}),D()}catch(p){console.error(p),o(Z,null),o(k,!1)}}async function D(){try{const s=await Xt(i.device.id);o(n,s.status,!0),o(Z,null)}catch(s){console.error(s)}o(k,!1)}const[K]=kt(async s=>{try{await ct(i.device.id,{volume:s}),e(n)&&o(n,{...e(n),volume:s},!0)}catch(p){console.error(p)}o(O,null)},300),[ye]=kt(async s=>{try{await ct(i.device.id,{subwoofer_volume:s}),e(n)&&o(n,{...e(n),subwoofer_volume:s},!0)}catch(p){console.error(p)}o(w,null)},300);function P(s){o(O,s,!0),K(s)}function pe(s){o(w,s,!0),ye(s)}async function Se(){var p;const s=!((p=e(n))!=null&&p.mute);e(n)&&o(n,{...e(n),mute:s},!0);try{await ct(i.device.id,{mute:s})}catch(y){console.error(y),e(n)&&o(n,{...e(n),mute:!s},!0)}}async function Oe(s){var y;const p=(y=e(n))==null?void 0:y.input;e(n)&&o(n,{...e(n),input:s},!0);try{await ct(i.device.id,{input:s})}catch(Y){console.error(Y),e(n)&&p&&o(n,{...e(n),input:p},!0)}}async function De(s){var y;const p=(y=e(n))==null?void 0:y.sound_program;e(n)&&o(n,{...e(n),sound_program:s},!0);try{await ct(i.device.id,{sound_program:s})}catch(Y){console.error(Y),e(n)&&p&&o(n,{...e(n),sound_program:p},!0)}}async function X(){var p;const s=!((p=e(n))!=null&&p.clear_voice);e(n)&&o(n,{...e(n),clear_voice:s},!0);try{await ct(i.device.id,{clear_voice:s})}catch(y){console.error(y),e(n)&&o(n,{...e(n),clear_voice:!s},!0)}}async function ee(){var p;const s=!((p=e(n))!=null&&p.bass_extension);e(n)&&o(n,{...e(n),bass_extension:s},!0);try{await ct(i.device.id,{bass_extension:s})}catch(y){console.error(y),e(n)&&o(n,{...e(n),bass_extension:!s},!0)}}const M=["tv","bluetooth"],U=[{id:"movie",label:"Movie"},{id:"music",label:"Music"},{id:"sports",label:"Sports"},{id:"game",label:"Game"},{id:"tv_program",label:"TV"},{id:"stereo",label:"Stereo"}];var T=ts(),C=ie(T);C.__click=()=>o(F,!0),C.__keydown=s=>s.key==="Enter"&&o(F,!0);var v=a(C),b=a(v);b.__click=s=>{s.stopPropagation(),E()};let ne;var oe=r(a(b),2);{var xe=s=>{var p=Kr();l(s,p)};x(oe,s=>{e(k)&&s(xe)})}t(b);var Ae=r(b,2),ke=a(Ae),Je=a(ke,!0);t(ke);var Ce=r(ke,2);{var f=s=>{var p=Yr(),y=a(p);t(p),g(()=>{var Y,ue;return u(y,`${(Y=e(n))!=null&&Y.mute?"Muted":`${e(z)}%`} ¬∑ ${((ue=e(n))==null?void 0:ue.input)??""}`)}),l(s,p)},B=s=>{var p=qr(),y=a(p,!0);t(p),g(()=>u(y,e(n)?"Standby":"Offline")),l(s,p)};x(Ce,s=>{e(N)==="on"?s(f):s(B,!1)})}t(Ae),t(v),t(C);var ve=r(C,2);St(ve,{get open(){return e(F)},onclose:()=>o(F,!1),get title(){return e(h)},children:(s,p)=>{var y=es(),Y=a(y),ue=r(a(Y),2),ze=a(ue,!0);t(ue),t(Y);var Me=r(Y,2);{var q=A=>{var c=Xr(),m=ie(c);m.__click=E;var I=a(m),J=r(I);{var te=ae=>{var we=Jr();l(ae,we)};x(J,ae=>{e(k)&&ae(te)})}t(m);var fe=r(m,2);{var je=ae=>{var we=Zr(),le=ie(we),re=a(le),L=r(a(re),2),W=a(L,!0);t(L),t(re);var Q=r(re,2),ge=a(Q);wt(ge),ge.__input=G=>P(parseInt(G.currentTarget.value));var Ee=r(ge,2);Ee.__click=Se;var Xe=a(Ee,!0);t(Ee),t(Q),t(le);var Pe=r(le,2),be=r(a(Pe),2);$e(be,21,()=>M,st,(G,V)=>{var $=Ur();$.__click=()=>Oe(e(V));var Qe=a($,!0);t($),g(()=>{_($,1,`py-3 text-sm rounded-lg transition-colors uppercase
                       ${e(n).input===e(V)?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Qe,e(V)==="bluetooth"?"BT":"TV")}),l(G,$)}),t(be),t(Pe);var he=r(Pe,2),Le=r(a(he),2);$e(Le,21,()=>U,st,(G,V)=>{var $=Qr();$.__click=()=>De(e(V).id);var Qe=a($,!0);t($),g(()=>{_($,1,`py-2.5 text-sm rounded-lg transition-colors
                       ${e(n).sound_program===e(V).id?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Qe,e(V).label)}),l(G,$)}),t(Le),t(he);var Fe=r(he,2),et=r(a(Fe),2),Te=a(et);Te.__click=X;var Ue=r(Te,2);Ue.__click=ee,t(et),t(Fe);var Re=r(Fe,2),Ie=a(Re),He=r(a(Ie),2),Ge=a(He);t(He),t(Ie);var Be=r(Ie,2);wt(Be),Be.__input=G=>pe(parseInt(G.currentTarget.value)),t(Re),g(()=>{u(W,e(n).mute?"Muted":`${e(z)}%`),Tt(ge,e(z)),_(Ee,1,`w-10 h-10 rounded-lg transition-colors text-lg
                     ${e(n).mute?"bg-error/20 text-error":"bg-surface-recessed text-content-secondary"}
                     hover:bg-stroke-default`),u(Xe,e(n).mute?"üîá":"üîä"),_(Te,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(n).clear_voice?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),_(Ue,1,`py-3 text-sm rounded-lg transition-colors
                     ${e(n).bass_extension?"badge-audio":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(Ge,`${e(de)>0?"+":""}${e(de)??""}`),Tt(Be,e(de))}),l(ae,we)};x(fe,ae=>{e(N)==="on"&&ae(je)})}g(()=>{_(m,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(N)==="on"?"badge-audio":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),u(I,`${e(N)==="on"?"Turn Off":"Turn On"} `)}),l(A,c)};x(Me,A=>{e(n)&&A(q)})}t(y),g(()=>{_(ue,1,`font-medium ${e(N)==="on"?"text-device-audio-text":"text-content-tertiary"}`),u(ze,e(N)==="on"?"On":e(n)?"Standby":"Offline")}),l(s,y)},$$slots:{default:!0}}),g(()=>{_(C,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),b.disabled=!e(n),ne=_(b,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(N)==="on"?"badge-audio":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,ne,{"status-active":e(N)==="on"}),u(Je,e(h))}),l(se,T),ut()}bt(["click","keydown","input"]);var rs=d('<span class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-device-air-text rounded-full animate-pulse"></span>'),ss=d('<p class="text-xs text-content-secondary"> </p>'),ns=d('<p class="text-xs text-content-secondary"> </p>'),os=d("<div> </div>"),is=d('<span class="absolute top-2 right-2 w-2 h-2 bg-device-air-text rounded-full animate-pulse"></span>'),ls=d("<button> </button>"),cs=d('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Humidity</span> <p class="text-lg font-bold mt-1 text-content-primary"> </p></div>'),ds=d('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Temp</span> <p class="text-lg font-bold mt-1 text-content-primary"> </p></div>'),vs=d('<div class="bg-surface-recessed rounded-xl p-3 text-center"><span class="text-xs text-content-secondary">Filter</span> <p> </p></div>'),us=d('<div><span class="text-xs uppercase tracking-wide opacity-80">Air Quality Index</span> <p class="text-4xl font-bold mt-1"> </p> <p class="text-sm mt-1"> </p></div> <div><p class="text-sm text-content-secondary mb-2">Mode</p> <div class="grid grid-cols-3 gap-2"></div></div> <div class="grid grid-cols-3 gap-3"><!> <!> <!></div>',1),fs=d("<button> <!></button> <!>",1),ps=d('<div class="space-y-4"><div class="flex items-center justify-between"><span class="text-content-secondary">Status</span> <span> </span></div> <!></div>'),ms=d('<div role="button" tabindex="0"><div class="flex items-center gap-2.5"><button><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.414 1.415l.708-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z" clip-rule="evenodd"></path></svg> <!></button> <div class="min-w-0 flex-1"><h4 class="font-medium text-sm text-content-primary truncate">Air Purifier</h4> <!></div> <!></div></div> <!>',1);function xs(se,i){vt(i,!0);let j=dt(i,"compact",3,!1),h=H(()=>ce.airPurifier),n=R(!1),S=R(null),F=R(null),Z=R(!1),k=H(()=>{var v;return e(S)??((v=e(h))==null?void 0:v.power)??!1}),O=H(()=>{var v;return e(F)??((v=e(h))==null?void 0:v.mode)??"auto"});async function w(){const v=!e(k);o(S,v),o(Z,!0);try{await ea({power:v}),ce.refreshAirPurifier()}catch(b){console.error(b),o(S,null)}o(Z,!1),o(S,null)}async function N(v){const b=e(O);o(F,v,!0);try{await ea({mode:v}),ce.refreshAirPurifier()}catch(ne){console.error(ne),o(F,b,!0)}o(F,null)}function z(v){return v<=50?"text-success bg-success/20":v<=100?"text-warning bg-warning/20":v<=150?"text-device-climate-heat-text bg-device-climate-heat-bg":"text-error bg-error/20"}function de(v){return v<=50?"Good":v<=100?"Moderate":v<=150?"Unhealthy":"Very Unhealthy"}const E={auto:"Auto",silent:"Night",favorite:"Manual"};var D=ms(),K=ie(D);K.__click=()=>o(n,!0),K.__keydown=v=>v.key==="Enter"&&o(n,!0);var ye=a(K),P=a(ye);P.__click=v=>{v.stopPropagation(),w()};let pe;var Se=r(a(P),2);{var Oe=v=>{var b=rs();l(v,b)};x(Se,v=>{e(Z)&&v(Oe)})}t(P);var De=r(P,2),X=r(a(De),2);{var ee=v=>{var b=ss(),ne=a(b);t(b),g(()=>{var oe;return u(ne,`${(E[e(O)]||e(O))??""} ¬∑ ${((oe=e(h))==null?void 0:oe.aqi)??0??""} AQI`)}),l(v,b)},M=v=>{var b=ns(),ne=a(b,!0);t(b),g(()=>u(ne,e(h)?"Off":"Offline")),l(v,b)};x(X,v=>{e(k)?v(ee):v(M,!1)})}t(De);var U=r(De,2);{var T=v=>{var b=os(),ne=a(b,!0);t(b),g(oe=>{_(b,1,`px-2 py-1 rounded-md text-xs font-medium shrink-0 ${oe??""}`),u(ne,e(h).aqi)},[()=>z(e(h).aqi)]),l(v,b)};x(U,v=>{var b;j()&&((b=e(h))!=null&&b.power)&&v(T)})}t(ye),t(K);var C=r(K,2);St(C,{get open(){return e(n)},onclose:()=>o(n,!1),title:"Air Purifier",children:(v,b)=>{var ne=ps(),oe=a(ne),xe=r(a(oe),2),Ae=a(xe,!0);t(xe),t(oe);var ke=r(oe,2);{var Je=Ce=>{var f=fs(),B=ie(f);B.__click=w;var ve=a(B),s=r(ve);{var p=ue=>{var ze=is();l(ue,ze)};x(s,ue=>{e(Z)&&ue(p)})}t(B);var y=r(B,2);{var Y=ue=>{var ze=us(),Me=ie(ze),q=r(a(Me),2),A=a(q,!0);t(q);var c=r(q,2),m=a(c,!0);t(c),t(Me);var I=r(Me,2),J=r(a(I),2);$e(J,20,()=>[{value:"auto",label:"Auto"},{value:"silent",label:"Night"},{value:"favorite",label:"Manual"}],st,(L,W)=>{var Q=ls();Q.__click=()=>N(W.value);var ge=a(Q,!0);t(Q),g(()=>{_(Q,1,`py-3 text-sm rounded-lg transition-colors
                       ${e(O)===W.value?"badge-air":"bg-surface-recessed text-content-secondary hover:bg-stroke-default"}`),u(ge,W.label)}),l(L,Q)}),t(J),t(I);var te=r(I,2),fe=a(te);{var je=L=>{var W=cs(),Q=r(a(W),2),ge=a(Q);t(Q),t(W),g(()=>u(ge,`${e(h).humidity??""}%`)),l(L,W)};x(fe,L=>{e(h).humidity!==void 0&&L(je)})}var ae=r(fe,2);{var we=L=>{var W=ds(),Q=r(a(W),2),ge=a(Q);t(Q),t(W),g(()=>u(ge,`${e(h).temperature??""}¬∞C`)),l(L,W)};x(ae,L=>{e(h).temperature!==void 0&&L(we)})}var le=r(ae,2);{var re=L=>{var W=vs(),Q=r(a(W),2),ge=a(Q);t(Q),t(W),g(()=>{_(Q,1,`text-lg font-bold mt-1 ${e(h).filter_life<20?"text-error":"text-content-primary"}`),u(ge,`${e(h).filter_life??""}%`)}),l(L,W)};x(le,L=>{e(h).filter_life!==void 0&&L(re)})}t(te),g((L,W)=>{_(Me,1,`rounded-xl p-4 text-center ${L??""}`),u(A,e(h).aqi),u(m,W)},[()=>z(e(h).aqi),()=>de(e(h).aqi)]),l(ue,ze)};x(y,ue=>{e(k)&&ue(Y)})}g(()=>{_(B,1,`w-full py-4 rounded-xl text-lg font-medium transition-all relative
               ${e(k)?"badge-air":"bg-surface-recessed text-content-secondary"}
               hover:scale-[1.02]`),u(ve,`${e(k)?"Turn Off":"Turn On"} `)}),l(Ce,f)};x(ke,Ce=>{e(h)&&Ce(Je)})}t(ne),g(()=>{_(xe,1,`font-medium ${e(k)?"text-device-air-text":"text-content-tertiary"}`),u(Ae,e(k)?"On":e(h)?"Off":"Offline")}),l(v,ne)},$$slots:{default:!0}}),g(()=>{_(K,1,`card transition-card hover:scale-[1.02] ${j()?"p-2.5":"p-3"} w-full text-left cursor-pointer`),P.disabled=!e(h),pe=_(P,1,`w-10 h-10 rounded-xl flex items-center justify-center transition-all shrink-0 relative
             ${e(k)?"badge-air":"bg-surface-recessed text-content-tertiary"}
             hover:scale-105 disabled:opacity-50 disabled:hover:scale-100`,null,pe,{"status-active":e(k)})}),l(se,D),ut()}bt(["click","keydown"]);var _s=d('<div class="card rounded-xl p-2.5"><div class="flex items-center gap-2.5"><div class="w-9 h-9 rounded-lg bg-surface-recessed animate-pulse"></div> <div class="flex-1 space-y-1.5"><div class="w-20 h-3.5 rounded bg-surface-recessed animate-pulse"></div> <div class="w-14 h-3 rounded bg-surface-recessed animate-pulse"></div></div></div></div>'),gs=d('<section><div class="w-20 h-5 rounded bg-surface-recessed animate-pulse mb-3"></div> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),bs=d('<div class="space-y-6"></div>'),hs=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-lights-text">üí°</span> Lights <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ys=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-climate-heat-text">üå°Ô∏è</span> Climate <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!> <!></div></section>'),ws=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-sensors-text">üì°</span> Sensors <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),ks=d('<section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-audio-text">üîä</span> Audio <span class="text-xs text-content-tertiary"> </span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"></div></section>'),Ss=d('<!> <!> <!> <!> <section><h2 class="text-sm font-medium text-content-secondary mb-3 flex items-center gap-2"><span class="text-device-robot-text">ü§ñ</span> Robot <span class="text-xs text-content-tertiary">(1)</span></h2> <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2"><!></div></section>',1),Ms=d('<div class="pb-24 space-y-6"><!></div>');function Vs(se,i){vt(i,!0);let j=H(()=>ce.lamps.filter(w=>w.category==="lamp")),h=H(()=>ce.tuyaDevices.filter(w=>w.category==="wkf")),n=H(()=>ce.tuyaDevices.filter(w=>["sj","mcs","wsdcg"].includes(w.category))),S=H(()=>ce.lamps.length>0||ce.tuyaDevices.length>0||ce.yamahaDevices.length>0);var F=Ms();Ra("1uha8ag",w=>{ha(()=>{ya.title="Smart Home"})});var Z=a(F);{var k=w=>{var N=bs();$e(N,20,()=>Array(3),st,(z,de)=>{var E=gs(),D=r(a(E),2);$e(D,20,()=>Array(4),st,(K,ye,P,pe)=>{var Se=_s();l(K,Se)}),t(D),t(E),l(z,E)}),t(N),l(w,N)},O=w=>{var N=Ss(),z=ie(N);{var de=X=>{var ee=hs(),M=a(ee),U=r(a(M),2),T=a(U);t(U),t(M);var C=r(M,2);$e(C,21,()=>e(j),v=>v.id,(v,b)=>{er(v,{get lamp(){return e(b)},compact:!0})}),t(C),t(ee),g(()=>u(T,`(${e(j).length??""})`)),l(X,ee)};x(z,X=>{e(j).length>0&&X(de)})}var E=r(z,2);{var D=X=>{var ee=ys(),M=a(ee),U=r(a(M),2),T=a(U);t(U),t(M);var C=r(M,2),v=a(C);$e(v,17,()=>e(h),oe=>oe.id,(oe,xe)=>{Gr(oe,{get device(){return e(xe)},compact:!0})});var b=r(v,2);{var ne=oe=>{xs(oe,{compact:!0})};x(b,oe=>{ce.airPurifier&&oe(ne)})}t(C),t(ee),g(()=>u(T,`(${e(h).length+(ce.airPurifier?1:0)})`)),l(X,ee)};x(E,X=>{(e(h).length>0||ce.airPurifier)&&X(D)})}var K=r(E,2);{var ye=X=>{var ee=ws(),M=a(ee),U=r(a(M),2),T=a(U);t(U),t(M);var C=r(M,2);$e(C,21,()=>e(n),v=>v.id,(v,b)=>{Rr(v,{get device(){return e(b)},compact:!0})}),t(C),t(ee),g(()=>u(T,`(${e(n).length??""})`)),l(X,ee)};x(K,X=>{e(n).length>0&&X(ye)})}var P=r(K,2);{var pe=X=>{var ee=ks(),M=a(ee),U=r(a(M),2),T=a(U);t(U),t(M);var C=r(M,2);$e(C,21,()=>ce.yamahaDevices,v=>v.id,(v,b)=>{as(v,{get device(){return e(b)},compact:!0})}),t(C),t(ee),g(()=>u(T,`(${ce.yamahaDevices.length??""})`)),l(X,ee)};x(P,X=>{ce.yamahaDevices.length>0&&X(pe)})}var Se=r(P,2),Oe=r(a(Se),2),De=a(Oe);Tr(De,{get status(){return ce.roborock},compact:!0}),t(Oe),t(Se),l(w,N)};x(Z,w=>{ce.loading&&!e(S)?w(k):w(O,!1)})}t(F),l(se,F),ut()}export{Vs as component};
