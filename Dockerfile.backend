FROM oven/bun:1-alpine

WORKDIR /app

# Copy package files first for better caching
COPY backend/package.json ./
RUN bun install

# Copy source code
COPY backend/ ./

# Ensure data directory exists
RUN mkdir -p /app/data

EXPOSE 3001

CMD ["bun", "run", "src/index.ts"]
